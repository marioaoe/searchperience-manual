{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the Searchperience Documentation. Our documentation is organised as follows: Cockpit Manual Information and tips for using any of the functions available inside Searchperience Cockpit. Concepts Basic notions to better understand how Searchperience works. FAQ A collection of most frequently asked questions about Searchperience. Features A list of all features that Searchperience has to offer. Glossary A list of terms that you should be familiar with when reading this documentation. Integrations Information about integrating Searchperience into a separate system.","title":"Start"},{"location":"faq/","text":"FAQ \u00b6 Frontend \u00b6 How is teaserData calculated? \u00b6 teaserData is a calculated object attached to every product. It is built in the Searchperience Frontend using values available in the product fields. In general: If we have the sorting set by selling count, then we fill teaserData with the values from the cheapest variant from the most sold variants. Moreover, if we have selected some facets at the same time, then we take into account only the variants which match all the selected facets. If we have some active facet selections, then we fill teaserData with the values from the variant with the cheapest finalPrice matching all of the provided filters/facets. Moreover, if multiple variants have the same cheapest finalPrice , then the smallest variant will be selected based on the fields variant.attributes.clothingSize or variant.attributes.shoeSize . If we do not have any facet selected, then we fill teaserData with values from configurableProduct. If any of the fields are missing from the variant, then we fill those fields with values from configurableProduct. If we have 'availablePrices' data available, then we take into account the price from that section to find the lowest price. How does teaserData select variants? \u00b6 Incoming document { \"foreignId\": \"Z-en_GB-master\", \"marketplaceCode\": \"Z\", \"sellingCount\": 49, \"teaserData\": \"\", \"variants\": [{ \"marketplaceCode\": \"A\", \"sellingCount\": 0, \"color\": \"red\", \"clothingSize\": \"s\", \"price\": 10.99 },{ \"marketplaceCode\": \"B\", \"sellingCount\": 0, \"color\": \"red\", \"clothingSize\": \"s\", \"price\": 3.99 },{ \"marketplaceCode\": \"C\", \"sellingCount\": 0, \"color\": \"red\", \"clothingSize\": \"l\", \"price\": 3.99 },{ \"marketplaceCode\": \"D\", \"sellingCount\": 32, \"color\": \"blue\", \"clothingSize\": \"xl\", \"price\": 22.00 },{ \"marketplaceCode\": \"E\", \"sellingCount\": 32, \"color\": \"blue\", \"clothingSize\": \"m\", \"price\": 21.00 },{ \"marketplaceCode\": \"F\", \"sellingCount\": 33, \"color\": \"yellow\", \"clothingSize\": \"s\", \"price\": 3.99 }] } Criteria logic to choose teaserPrice teaserPriceFromPrice selectedVariant text/image nothing selected cheapest variant 3,99 true (all) none configurableProduct, variants color=red cheapest and smallest variant with color=red 3,99 true (all) B cheapest smallest variant with color=red nothing selected, sort by selling count cheapest variant with highest selling count 3,99 true (all) F cheapest variant with color=red color=blue, sort by selling count color=blue, cheapest with highest selling count 21,00 true (all) E cheapest variant with color=blue, selling count color=red, sort by selling count color=red (no selling count available for color=red), cheapest smallest variant 3,99 true (all) B cheapest smallest variant with color=red How is the teaserPrice applied? \u00b6 Filled with the activePrice object taken from the variant with the cheapest finalPrice of all (no facet selection) or matching variants (facet selection). How is the teaserAvailablePrices applied? \u00b6 Filled with the availablePrices object taken from the variant with the cheapest finalPrice of all (no facet selection) or matching variants (facet selection). How is the teaserPriceIsFromPrice applied? \u00b6 If the finalPrice of some variant's activePrice differs, this value is true indicating the teaserPrice is the \"from price\" (lowest value) from a range of finalPrice values of either all variants (no facet selections) or the matching variants (facet selection). If the finalPrice of all variants is the same this value is false. How is the finalPrice calculated? \u00b6 The finalPrice is a calculated price built using these rules: If activePrice.isDiscounted is set to true, the finalPrice is the value from the field activePrice.discounted . If activePrice.isDiscounted is set to false or completely missing, the finalPrice is the value from the field activePrice.default . How is teaserData filled? \u00b6 Case 1: Configurable Product - no facet selection \u00b6 shortTitle taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. shortDescription taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. teaserPrice the activePrice object taken from the cheapest-smallest-size variant. teaserPriceIsFromPrice if the finalPrice of every variants activePrice differs, this value is true indicating the teaserPrice is the cheapest of all variant's prices. selectedVariant not existing in that case Case 2: Configurable Product - one or more facets have been selected \u00b6 shortTitle taken from the cheapest-smallest-size variant matched by facets/filters, if field not set, taken from configurableProduct. shortDescription taken from the cheapest-smallest-size variant matched by facets/filters, if field not set, taken from configurableProduct. teaserPrice the activePrice from the cheapest-smallest-size variant matched by facets/filters. teaserPriceIsFromPrice if the finalPrice of the matching variants activePrice differs, this value is true indicating the teaserPrice is the cheapest of all matching variant's prices. selectedVariant contains the marketplaceCode of the cheapest-smallest-size variant matched by facets/filters. Case 3: Simple Product \u00b6 shortTitle taken from the only variant, if field not set, taken from configurableProduct. shortDescription taken from the only variant, if field not set, taken from configurableProduct. teaserPrice the activePrice object taken from the first and only variant teaserPriceIsFromPrice Always false since we only have one variant and therefore only one activePrice selectedVariant not existing in that case Case 4: Configurable Product - multiple variants have the same cheapest final Price \u00b6 shortTitle taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. shortDescription taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. teaserPrice the activePrice from the cheapest-smallest-size variant. teaserPriceIsFromPrice if other variants have a different finalPrice , this value is true selectedVariant contains the marketplaceCode of the smallest-size variant. Cockpit \u00b6 How can I hide a popular search term? \u00b6 To hide a popular search one needs to: Find the context in which the popular search term appears on Find the foreignId of the specific popular search item (also called topkeyword) Find the object in Searchperience's Cockpit and hide it. What is a TopKeyword? \u00b6 The /popularSearches Frontend endpoint returns a collection of TopKeywords objects. Each Topkeyword consists of various elements as can be seen in the next code snippet. { \"foreignId\": \"a114e69a5746e2cfa326f7c8df21ec1a\", // hash of the fields' contents except occurrences \"searchQuery\": \"henne\", // user input in search field \"brandCode\": \"hennessy\", \"retailerCode\": \"world-duty-free\", \"categoryCodes\": [ \"food_drink\", \"food_drink_wine_spirits\", \"food_drink_wine_spirits_cognac\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"referer\": \"-\", \"occurrences\": 1 } A topkeyword contains a searchQuery and information about the context in which the query lead to a purchase. This is the reason why information as brandCode or retailerCode are also present. How to find the context of a TopKeyword? \u00b6 When sending a request to < PROJECT_DOMAIN_FRONTEND /popularSearches>, it is possible to filter by a series of parameters such as brandCode or categoryCode . Possible filters are documented in the Searchperience API documentation. The context in which a popular search appears depend on the current location of the user in the web store. Depending on the category a user find himself in, the web store will request popular searches with the same category as the one the user is in. Find the Id of the popular search item? \u00b6 With the right context one can reproduce the web stores request to < PROJECT_DOMAIN_FRONTEND /popularSearches> by filtering the request. The resulting JSON contains a set of TopKeywords with the format already described above . Finally, one can obtain the foreignId by matching the searchQuery to the popular search item one is looking for. How to hide a document from showing in the search results? \u00b6 Open Cockpit Go to Indexing > All documents (left navigation panel) Search for the foreignId you obtained by sending a filtered request to the Frontend. Prevent the item from appearing in search results by clicking on the Hidden toggle. Indexer \u00b6 How is sellingCount/viewCount included in a product? \u00b6 Values are enriched in the Indexer pipe step by matching data from data processing file. Data contain information about selling/view count per week, month and year. \"sorting\": { \"price\": 14.5, \"sellingCount\": { \"week\": 12, \"month\": 12, \"year\": 12 }, \"viewCount\": { \"week\": 14, \"month\": 14, \"year\": 14 } } How does TopSeller work? \u00b6 Calculation done in the Indexer pipe step by evaluating data from dataprocessing 'topseller' statistic. Depending on settings, top seller flag is set and boosting applied to the document. Setting example from Indexer pipe step configuration: 'topSeller' => [ // values to get top sellers and enrich product 'count' => 100, 'period' => 'week', 'boost' => 100 ] Logic of min and max values calculation \u00b6 You may be wondering how we choose min/max values. When a user provides min and max values for the range facet (e.g. using a slider) we build an Elasticsearch aggregation and an Elasticsearch query filter for it. When the aggregation is returned from the Elasticsearch we use it to build the facet using the new value. For min possible values we take lowest from aggregation or user input, and for the max possible value we take the highest from aggregation or user input. If you look at the table below it may be a bit clearer: available min from available max from selected min from selected max from user did not select anything result result result result user selected min < available min [^rangeMinMax] selected value result selected value selected value user selected max > available max [^rangeMinMax] result selected value selected value selected value user selected min/max available min/max [^rangeMinMax] selected value selected value selected value selected value","title":"FAQ"},{"location":"faq/#faq","text":"","title":"FAQ"},{"location":"faq/#frontend","text":"","title":"Frontend"},{"location":"faq/#how-is-teaserdata-calculated","text":"teaserData is a calculated object attached to every product. It is built in the Searchperience Frontend using values available in the product fields. In general: If we have the sorting set by selling count, then we fill teaserData with the values from the cheapest variant from the most sold variants. Moreover, if we have selected some facets at the same time, then we take into account only the variants which match all the selected facets. If we have some active facet selections, then we fill teaserData with the values from the variant with the cheapest finalPrice matching all of the provided filters/facets. Moreover, if multiple variants have the same cheapest finalPrice , then the smallest variant will be selected based on the fields variant.attributes.clothingSize or variant.attributes.shoeSize . If we do not have any facet selected, then we fill teaserData with values from configurableProduct. If any of the fields are missing from the variant, then we fill those fields with values from configurableProduct. If we have 'availablePrices' data available, then we take into account the price from that section to find the lowest price.","title":"How is teaserData calculated?"},{"location":"faq/#how-does-teaserdata-select-variants","text":"Incoming document { \"foreignId\": \"Z-en_GB-master\", \"marketplaceCode\": \"Z\", \"sellingCount\": 49, \"teaserData\": \"\", \"variants\": [{ \"marketplaceCode\": \"A\", \"sellingCount\": 0, \"color\": \"red\", \"clothingSize\": \"s\", \"price\": 10.99 },{ \"marketplaceCode\": \"B\", \"sellingCount\": 0, \"color\": \"red\", \"clothingSize\": \"s\", \"price\": 3.99 },{ \"marketplaceCode\": \"C\", \"sellingCount\": 0, \"color\": \"red\", \"clothingSize\": \"l\", \"price\": 3.99 },{ \"marketplaceCode\": \"D\", \"sellingCount\": 32, \"color\": \"blue\", \"clothingSize\": \"xl\", \"price\": 22.00 },{ \"marketplaceCode\": \"E\", \"sellingCount\": 32, \"color\": \"blue\", \"clothingSize\": \"m\", \"price\": 21.00 },{ \"marketplaceCode\": \"F\", \"sellingCount\": 33, \"color\": \"yellow\", \"clothingSize\": \"s\", \"price\": 3.99 }] } Criteria logic to choose teaserPrice teaserPriceFromPrice selectedVariant text/image nothing selected cheapest variant 3,99 true (all) none configurableProduct, variants color=red cheapest and smallest variant with color=red 3,99 true (all) B cheapest smallest variant with color=red nothing selected, sort by selling count cheapest variant with highest selling count 3,99 true (all) F cheapest variant with color=red color=blue, sort by selling count color=blue, cheapest with highest selling count 21,00 true (all) E cheapest variant with color=blue, selling count color=red, sort by selling count color=red (no selling count available for color=red), cheapest smallest variant 3,99 true (all) B cheapest smallest variant with color=red","title":"How does teaserData select variants?"},{"location":"faq/#how-is-the-teaserprice-applied","text":"Filled with the activePrice object taken from the variant with the cheapest finalPrice of all (no facet selection) or matching variants (facet selection).","title":"How is the teaserPrice applied?"},{"location":"faq/#how-is-the-teaseravailableprices-applied","text":"Filled with the availablePrices object taken from the variant with the cheapest finalPrice of all (no facet selection) or matching variants (facet selection).","title":"How is the teaserAvailablePrices applied?"},{"location":"faq/#how-is-the-teaserpriceisfromprice-applied","text":"If the finalPrice of some variant's activePrice differs, this value is true indicating the teaserPrice is the \"from price\" (lowest value) from a range of finalPrice values of either all variants (no facet selections) or the matching variants (facet selection). If the finalPrice of all variants is the same this value is false.","title":"How is the teaserPriceIsFromPrice applied?"},{"location":"faq/#how-is-the-finalprice-calculated","text":"The finalPrice is a calculated price built using these rules: If activePrice.isDiscounted is set to true, the finalPrice is the value from the field activePrice.discounted . If activePrice.isDiscounted is set to false or completely missing, the finalPrice is the value from the field activePrice.default .","title":"How is the finalPrice calculated?"},{"location":"faq/#how-is-teaserdata-filled","text":"","title":"How is teaserData filled?"},{"location":"faq/#case-1-configurable-product-no-facet-selection","text":"shortTitle taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. shortDescription taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. teaserPrice the activePrice object taken from the cheapest-smallest-size variant. teaserPriceIsFromPrice if the finalPrice of every variants activePrice differs, this value is true indicating the teaserPrice is the cheapest of all variant's prices. selectedVariant not existing in that case","title":"Case 1: Configurable Product - no facet selection"},{"location":"faq/#case-2-configurable-product-one-or-more-facets-have-been-selected","text":"shortTitle taken from the cheapest-smallest-size variant matched by facets/filters, if field not set, taken from configurableProduct. shortDescription taken from the cheapest-smallest-size variant matched by facets/filters, if field not set, taken from configurableProduct. teaserPrice the activePrice from the cheapest-smallest-size variant matched by facets/filters. teaserPriceIsFromPrice if the finalPrice of the matching variants activePrice differs, this value is true indicating the teaserPrice is the cheapest of all matching variant's prices. selectedVariant contains the marketplaceCode of the cheapest-smallest-size variant matched by facets/filters.","title":"Case 2: Configurable Product - one or more facets have been selected"},{"location":"faq/#case-3-simple-product","text":"shortTitle taken from the only variant, if field not set, taken from configurableProduct. shortDescription taken from the only variant, if field not set, taken from configurableProduct. teaserPrice the activePrice object taken from the first and only variant teaserPriceIsFromPrice Always false since we only have one variant and therefore only one activePrice selectedVariant not existing in that case","title":"Case 3: Simple Product"},{"location":"faq/#case-4-configurable-product-multiple-variants-have-the-same-cheapest-final-price","text":"shortTitle taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. shortDescription taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct. teaserPrice the activePrice from the cheapest-smallest-size variant. teaserPriceIsFromPrice if other variants have a different finalPrice , this value is true selectedVariant contains the marketplaceCode of the smallest-size variant.","title":"Case 4: Configurable Product - multiple variants have the same cheapest final Price"},{"location":"faq/#cockpit","text":"","title":"Cockpit"},{"location":"faq/#how-can-i-hide-a-popular-search-term","text":"To hide a popular search one needs to: Find the context in which the popular search term appears on Find the foreignId of the specific popular search item (also called topkeyword) Find the object in Searchperience's Cockpit and hide it.","title":"How can I hide a popular search term?"},{"location":"faq/#what-is-a-topkeyword","text":"The /popularSearches Frontend endpoint returns a collection of TopKeywords objects. Each Topkeyword consists of various elements as can be seen in the next code snippet. { \"foreignId\": \"a114e69a5746e2cfa326f7c8df21ec1a\", // hash of the fields' contents except occurrences \"searchQuery\": \"henne\", // user input in search field \"brandCode\": \"hennessy\", \"retailerCode\": \"world-duty-free\", \"categoryCodes\": [ \"food_drink\", \"food_drink_wine_spirits\", \"food_drink_wine_spirits_cognac\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"referer\": \"-\", \"occurrences\": 1 } A topkeyword contains a searchQuery and information about the context in which the query lead to a purchase. This is the reason why information as brandCode or retailerCode are also present.","title":"What is a TopKeyword?"},{"location":"faq/#how-to-find-the-context-of-a-topkeyword","text":"When sending a request to < PROJECT_DOMAIN_FRONTEND /popularSearches>, it is possible to filter by a series of parameters such as brandCode or categoryCode . Possible filters are documented in the Searchperience API documentation. The context in which a popular search appears depend on the current location of the user in the web store. Depending on the category a user find himself in, the web store will request popular searches with the same category as the one the user is in.","title":"How to find the context of a TopKeyword?"},{"location":"faq/#find-the-id-of-the-popular-search-item","text":"With the right context one can reproduce the web stores request to < PROJECT_DOMAIN_FRONTEND /popularSearches> by filtering the request. The resulting JSON contains a set of TopKeywords with the format already described above . Finally, one can obtain the foreignId by matching the searchQuery to the popular search item one is looking for.","title":"Find the Id of the popular search item?"},{"location":"faq/#how-to-hide-a-document-from-showing-in-the-search-results","text":"Open Cockpit Go to Indexing > All documents (left navigation panel) Search for the foreignId you obtained by sending a filtered request to the Frontend. Prevent the item from appearing in search results by clicking on the Hidden toggle.","title":"How to hide a document from showing in the search results?"},{"location":"faq/#indexer","text":"","title":"Indexer"},{"location":"faq/#how-is-sellingcountviewcount-included-in-a-product","text":"Values are enriched in the Indexer pipe step by matching data from data processing file. Data contain information about selling/view count per week, month and year. \"sorting\": { \"price\": 14.5, \"sellingCount\": { \"week\": 12, \"month\": 12, \"year\": 12 }, \"viewCount\": { \"week\": 14, \"month\": 14, \"year\": 14 } }","title":"How is sellingCount/viewCount included in a product?"},{"location":"faq/#how-does-topseller-work","text":"Calculation done in the Indexer pipe step by evaluating data from dataprocessing 'topseller' statistic. Depending on settings, top seller flag is set and boosting applied to the document. Setting example from Indexer pipe step configuration: 'topSeller' => [ // values to get top sellers and enrich product 'count' => 100, 'period' => 'week', 'boost' => 100 ]","title":"How does TopSeller work?"},{"location":"faq/#logic-of-min-and-max-values-calculation","text":"You may be wondering how we choose min/max values. When a user provides min and max values for the range facet (e.g. using a slider) we build an Elasticsearch aggregation and an Elasticsearch query filter for it. When the aggregation is returned from the Elasticsearch we use it to build the facet using the new value. For min possible values we take lowest from aggregation or user input, and for the max possible value we take the highest from aggregation or user input. If you look at the table below it may be a bit clearer: available min from available max from selected min from selected max from user did not select anything result result result result user selected min < available min [^rangeMinMax] selected value result selected value selected value user selected max > available max [^rangeMinMax] result selected value selected value selected value user selected min/max available min/max [^rangeMinMax] selected value selected value selected value selected value","title":"Logic of min and max values calculation"},{"location":"features/","text":"Cockpit \u00b6 Widgets \u00b6 Obtain a specific subset of products like most sold products, new arrivals, featured products and more. Widgets are components that allow to find and display products based on a set of filters. Depending on the widget type and configuration one can provide different parameters in order to filter a specific subset of products. The resulting subset of products can be used in previews, teasers, and so on. A set of default widgets is included with Searchperience. Using custom product properties for filtering requires external configuration. Widgets Documentation Enrichments \u00b6 Modify products ranking scores in order to make these more relevant in search results. Through enrichments it is possible to enhance products with keywords for special sorting or to adjust their relevance score so that they are better placed inside search results. Users can configure which products to enrich by defining a set of rules that will match one or many products (higher or lower in the result set). It is also possible to apply enrichments only on certain context for example when searching for a specific brand. Active by default. No predefined enrichments are included. Using custom product properties for matching requires external configuration. Enrichments Documentation Promotions \u00b6 Attach content or generic results to specific search terms or products properties. Promotions allow to deliver tailored content to online shop users when searching for a specific search term or when navigating a specific part of the online shop. The custom content will only appear when users search for a configured search term or their search criteria matches a specific product property based on facets for example when searching for a specific brand. Active by default. No predefined promotions are included. Matching search terms, promotion content, time period and more can be configured in Cockpit. Promotions Documentation Stopwords \u00b6 Remove specific terms from the search query. In order to not pollute the search query and increase the reliability of search, it is possible to define a set of words that should be omitted by the search engine. Online shop users can still be able to type these words, however the search engine will not consider them. Active by default. Modern search engines include a limited list of stopwords with terms like the , and , and so on. Custom stopwords per language can be configured in Cockpit. Stopwords Documentation Synonyms \u00b6 Group or map similar search terms for better search reliability. Synonyms allow to configure relationships between search terms. These relationships permit to group terms with similar meaning so that when searching for any of the terms the same search results are returned. It is also possible to create a mapping between terms so that a term will be replaced by its mapping when searching this is commonly used for acronyms. Active by default. Some example synonyms are included, however users are advised to check them and create new ones which adapt to their needs. All users. Synonyms Documentation Search preview \u00b6 Simulate searching and sorting. Analyze can compare queries. With search preview it is possible to check the results of a search query and analyze how different sorting affect the order of the search results. The preview functions also allow to control the ranking score of a product and determine the reason of their position in search results. Active by default. No extra configuration is needed. Advanced users only. Crawler \u00b6 Analyze and index web documents. Crawling of websites allows to make the content of the specific web site searchable inside Searchperience. These websites can later be included in live search and search results to allow users to navigate around the web site. It is also possible to include additional documents like PDF or Word documents. No defaults. URLs must be configured. Crawler Documentation Document Viewer \u00b6 Check the content and properties of documents in the database. View the content, creation date, last update and other properties of any document in the database. These documents include products, brands, locations, categories, promotions and more. Especially, any notification related to a document can be seen here. A notification will indicate the status of a document whether the document has been processed successful or has some errors and is therefore not available within the search results. Active by default. No configuration needed. Document Definition Frontend \u00b6 Search \u00b6 Find any document stored in the search engine. Search for any document stored in the search engine. Through the use of different parameters and endpoints it is possible to define the scope in which the search will take place. Besides the regular search functionality we do use it in addition for product catalog and product detail page views. Active by default. Autocomplete \u00b6 Provide users helpful suggestions for the query they are searching for. Autocomplete provides users suggestions by returning search terms that match or complete the user input. Active by default. Autocomplete Documentation Livesearch \u00b6 Provide relevant information to users even while searching. Livesearch provides users search teasers based on their input. These teasers involve products, brands, suggestions, and so on and will reflect what the search is returning. Active by default. Livesearch Documentation Facets \u00b6 Allow users to narrow down search results with on the fly generated navigation. Facets provide a easy and reliable way to navigate around search results. Searchperience computes facets on the fly, which means that the data used to generate these elements represents the current state of the possible result set and therefore no empty items are displayed. Almost any product property can be used to generate facets: from size or color, to prices or stock information. Basic facets are active by default. Available facets depend on product's properties. Facets Documentation Filters \u00b6 Filters define the scope of possible search results e.g. the current language. Filters provide a way to obtain a narrowed subset of products, for example, every product in a given category or all products from a given retailer. Multiple filters can be combined to further narrow the subset of results. Depending on configuration some filters are available just on certain endpoints. Basic filters are active by default. Configuration is needed to extend it. Available filters depend on product's properties. Filters Documentation - Endpoints Documentation Property Boosting \u00b6 Improve visibility and findability of products with certain properties. Through property boosting, it is possible to improve the relevance of certain products depending on specific criteria. For example, information located in the product's title can be configured to be more relevant and make the product more visible when users search for any word contained in it. Meanwhile, other properties such as the product's description is less important and a match between the users query plays a lesser role when ranking products. Basic configuration as default. Configuration is needed to extend it. Property Boosting depends on product's properties. Time Boosting \u00b6 Improve visibility and findability of products with certain time criteria. Through time boosting, it is possible to improve the relevance of certain products depending on time related properties such as release-date, last-update-date and so on. Not active by default. Configuration is needed. Facet Sorting \u00b6 Sort facets and even individual facets items based on custom business criteria. The facet sorting allows to customize the order in which list/tree facets and individual facet items are provided. This allows consistent and client-tailored navigation through the Searchperience-generated facets. Searchperience can handle two types of sorting: - Local sorting : facet sorting based on some custom rules hard-coded inside the Searchperience Frontend. - External sorting : facet sorting based on some custom rules defined outside of Searchperience, like in a Product Information Management(PIM) system, and indexed by Searchperience like any other type of data like products or brands. While Searchperience computes search results, it rearranges the order of facets on-the-fly based on the external sortings. If an external sorting has been defined and provided to Searchperience, Searchperience will use it as a first choice, otherwise it will fallback to the local sorting. And as a very last resort, if no local sorting exists, a sorting by alphabetical order will be applied. Active by default. Configuration is needed. Endpoint Configuration \u00b6 Handle and manage different endpoints and the kind of information these provide. Through the use of different endpoints it is possible to selectively search or filter for specific documents saved in the search engine. These documents might be brands, retailers, locations, products and so on. By using different endpoints, it is possible to manage and handle a large amount of information with ease. Some endpoints are default. Configuration is needed. Filters and facets can be customized differently for each endpoint. Endpoints Documentation Redirecting based on Query \u00b6 Redirect users to specific location based on their search input. When an exact match occurs between a search query and a specific word, such as a brand name, Searchperience can be configured to return a special response which can be used to guide users to specific parts in the online shop. No defaults. Matching type must be configured. Redirect on Match Documentation Product Teaser selection \u00b6 Obtain precise product selection based on price or available product's variants used to tease products on all listing views. Searchperience automatically manages and returns the up-to-date price information for a product and any of its variants. When handling filters and facets to narrow down search results, Searchperience will correctly find only products in which at least one variant matches the filtering criteria. Moreover, Searchperience will transform the product data to display the right variant when serving search results. This means that we do serve the most suitable version of that product information to teaser the size, color and price. Variant selection when using facets and filters is active by default. Further variant selection logic and price matching must be configured. Indexer \u00b6 Document Transformation \u00b6 Attach additional information to products even from external sources. Document transformation allows to modify product's information. This information can include external data, such as selling information for sorting, to internal data, such as suggestion analysis, price or stock information. Default is to include price and stock information to products. Additional data sources are possible. Document Validation \u00b6 Validate document properties and prevent irregular data from being saved in the search engine. Document validation allows to verify product properties and recognize products with missing or false information. As a result, these products will not be saved in the search engine. Default example would be that a brand needs to be present. Additional rules need to be configured on demand. Suggestion Extraction \u00b6 Extract relevant terms from product's properties. Suggestion extraction allows to obtain useful information based on product's properties and generate suggestion phrases which will be displayed to users when searching. These phrases are mainly used for autocompletion. Active by default. Properties used for the suggestion generation must be configured. We do include the title, category path, brand and retailer name or color names. Individual configuration possible. Analytics & Personalisation \u00b6 Tracking \u00b6 Log relevant user interactions for later analysis and processing. Searchperience can track and record user interactions by embedding a dedicated JavaScript into the online shop or by using the trackers API. Interactions are saved for later processing. This information can be used to generate product recommendations, smart keywords, popular search terms or increase the relevance of products for the users while using the search. Not active by default. Online shop must be adapted. Tracking Documentation Most Sold Products \u00b6 Obtain up-to-date product's selling information. Through the analysis of tracking data it is possible to obtain sales information about any product in the online shop. This information is available per variant and per product. Selling count info can be attached to the specific product and be used for sorting. Not active by default. Configuration is needed. Tracker should be integrated. Time period can be configured (default: week, month, year). Most Viewed Products \u00b6 Find out which products are the most viewed in the online shop. Through the processing of tracking data it is possible to determine view count information about any product. This information is available on a per product basis and not for a single variant. View counts can be attached to the specific product and used for sorting. Not active by default. Configuration is needed. Tracker should be integrated. Time period can be configured (default: week, month, year). Popular search terms \u00b6 Determine which are the most relevant search terms for users. Through the analysis of tracking data, specially the one related to searching and purchases, it is possible to compute which are the most relevant search queries that result in a purchase. This information can be used for autocomplete, and sales analysis. Not active by default. Configuration is needed. Tracker should be activated. Time period can be configured (default: 90 days). Smart Keywords \u00b6 Enrich and enhance search experience based on user interactions. Purchase data provides a concrete base for the discovery and computation of relationships between search queries and specific products, online shop categories, brands and even retailers. These relations are used to make these documents more discoverable while searching. Not active by default. Configuration is needed. Tracker should be activated. Default time period: 90 days. Default max. number of keywords per document: 50. Recommendations \u00b6 Suggest similar products to users. Searchperience offers the possibility to generate products recommendations based on similar products i.e. \u2018you might also be interested in\u2019 or what similar user bought i.e. \u2018other users also looked at\u2019. Recommendations are accessible through the recommendations widget. Not active by default. Configuration is needed. Tracker should be activated. Recommender should be activated. Cockpit Widgets Personalised Widgets \u00b6 Greet users with personalised content in widgets. Searchperience is able to compute preferences for single users based on their behaviour around the shop. This allows for the generation of widgets that contain favorite brands, categories and retailers. Not active by default. Configuration is needed. Tracker should be activated. Personalised Widgets , User profiles","title":"Features"},{"location":"features/#cockpit","text":"","title":"Cockpit"},{"location":"features/#widgets","text":"Obtain a specific subset of products like most sold products, new arrivals, featured products and more. Widgets are components that allow to find and display products based on a set of filters. Depending on the widget type and configuration one can provide different parameters in order to filter a specific subset of products. The resulting subset of products can be used in previews, teasers, and so on. A set of default widgets is included with Searchperience. Using custom product properties for filtering requires external configuration. Widgets Documentation","title":"Widgets"},{"location":"features/#enrichments","text":"Modify products ranking scores in order to make these more relevant in search results. Through enrichments it is possible to enhance products with keywords for special sorting or to adjust their relevance score so that they are better placed inside search results. Users can configure which products to enrich by defining a set of rules that will match one or many products (higher or lower in the result set). It is also possible to apply enrichments only on certain context for example when searching for a specific brand. Active by default. No predefined enrichments are included. Using custom product properties for matching requires external configuration. Enrichments Documentation","title":"Enrichments"},{"location":"features/#promotions","text":"Attach content or generic results to specific search terms or products properties. Promotions allow to deliver tailored content to online shop users when searching for a specific search term or when navigating a specific part of the online shop. The custom content will only appear when users search for a configured search term or their search criteria matches a specific product property based on facets for example when searching for a specific brand. Active by default. No predefined promotions are included. Matching search terms, promotion content, time period and more can be configured in Cockpit. Promotions Documentation","title":"Promotions"},{"location":"features/#stopwords","text":"Remove specific terms from the search query. In order to not pollute the search query and increase the reliability of search, it is possible to define a set of words that should be omitted by the search engine. Online shop users can still be able to type these words, however the search engine will not consider them. Active by default. Modern search engines include a limited list of stopwords with terms like the , and , and so on. Custom stopwords per language can be configured in Cockpit. Stopwords Documentation","title":"Stopwords"},{"location":"features/#synonyms","text":"Group or map similar search terms for better search reliability. Synonyms allow to configure relationships between search terms. These relationships permit to group terms with similar meaning so that when searching for any of the terms the same search results are returned. It is also possible to create a mapping between terms so that a term will be replaced by its mapping when searching this is commonly used for acronyms. Active by default. Some example synonyms are included, however users are advised to check them and create new ones which adapt to their needs. All users. Synonyms Documentation","title":"Synonyms"},{"location":"features/#search-preview","text":"Simulate searching and sorting. Analyze can compare queries. With search preview it is possible to check the results of a search query and analyze how different sorting affect the order of the search results. The preview functions also allow to control the ranking score of a product and determine the reason of their position in search results. Active by default. No extra configuration is needed. Advanced users only.","title":"Search preview"},{"location":"features/#crawler","text":"Analyze and index web documents. Crawling of websites allows to make the content of the specific web site searchable inside Searchperience. These websites can later be included in live search and search results to allow users to navigate around the web site. It is also possible to include additional documents like PDF or Word documents. No defaults. URLs must be configured. Crawler Documentation","title":"Crawler"},{"location":"features/#document-viewer","text":"Check the content and properties of documents in the database. View the content, creation date, last update and other properties of any document in the database. These documents include products, brands, locations, categories, promotions and more. Especially, any notification related to a document can be seen here. A notification will indicate the status of a document whether the document has been processed successful or has some errors and is therefore not available within the search results. Active by default. No configuration needed. Document Definition","title":"Document Viewer"},{"location":"features/#frontend","text":"","title":"Frontend"},{"location":"features/#search","text":"Find any document stored in the search engine. Search for any document stored in the search engine. Through the use of different parameters and endpoints it is possible to define the scope in which the search will take place. Besides the regular search functionality we do use it in addition for product catalog and product detail page views. Active by default.","title":"Search"},{"location":"features/#autocomplete","text":"Provide users helpful suggestions for the query they are searching for. Autocomplete provides users suggestions by returning search terms that match or complete the user input. Active by default. Autocomplete Documentation","title":"Autocomplete"},{"location":"features/#livesearch","text":"Provide relevant information to users even while searching. Livesearch provides users search teasers based on their input. These teasers involve products, brands, suggestions, and so on and will reflect what the search is returning. Active by default. Livesearch Documentation","title":"Livesearch"},{"location":"features/#facets","text":"Allow users to narrow down search results with on the fly generated navigation. Facets provide a easy and reliable way to navigate around search results. Searchperience computes facets on the fly, which means that the data used to generate these elements represents the current state of the possible result set and therefore no empty items are displayed. Almost any product property can be used to generate facets: from size or color, to prices or stock information. Basic facets are active by default. Available facets depend on product's properties. Facets Documentation","title":"Facets"},{"location":"features/#filters","text":"Filters define the scope of possible search results e.g. the current language. Filters provide a way to obtain a narrowed subset of products, for example, every product in a given category or all products from a given retailer. Multiple filters can be combined to further narrow the subset of results. Depending on configuration some filters are available just on certain endpoints. Basic filters are active by default. Configuration is needed to extend it. Available filters depend on product's properties. Filters Documentation - Endpoints Documentation","title":"Filters"},{"location":"features/#property-boosting","text":"Improve visibility and findability of products with certain properties. Through property boosting, it is possible to improve the relevance of certain products depending on specific criteria. For example, information located in the product's title can be configured to be more relevant and make the product more visible when users search for any word contained in it. Meanwhile, other properties such as the product's description is less important and a match between the users query plays a lesser role when ranking products. Basic configuration as default. Configuration is needed to extend it. Property Boosting depends on product's properties.","title":"Property Boosting"},{"location":"features/#time-boosting","text":"Improve visibility and findability of products with certain time criteria. Through time boosting, it is possible to improve the relevance of certain products depending on time related properties such as release-date, last-update-date and so on. Not active by default. Configuration is needed.","title":"Time Boosting"},{"location":"features/#facet-sorting","text":"Sort facets and even individual facets items based on custom business criteria. The facet sorting allows to customize the order in which list/tree facets and individual facet items are provided. This allows consistent and client-tailored navigation through the Searchperience-generated facets. Searchperience can handle two types of sorting: - Local sorting : facet sorting based on some custom rules hard-coded inside the Searchperience Frontend. - External sorting : facet sorting based on some custom rules defined outside of Searchperience, like in a Product Information Management(PIM) system, and indexed by Searchperience like any other type of data like products or brands. While Searchperience computes search results, it rearranges the order of facets on-the-fly based on the external sortings. If an external sorting has been defined and provided to Searchperience, Searchperience will use it as a first choice, otherwise it will fallback to the local sorting. And as a very last resort, if no local sorting exists, a sorting by alphabetical order will be applied. Active by default. Configuration is needed.","title":"Facet Sorting"},{"location":"features/#endpoint-configuration","text":"Handle and manage different endpoints and the kind of information these provide. Through the use of different endpoints it is possible to selectively search or filter for specific documents saved in the search engine. These documents might be brands, retailers, locations, products and so on. By using different endpoints, it is possible to manage and handle a large amount of information with ease. Some endpoints are default. Configuration is needed. Filters and facets can be customized differently for each endpoint. Endpoints Documentation","title":"Endpoint Configuration"},{"location":"features/#redirecting-based-on-query","text":"Redirect users to specific location based on their search input. When an exact match occurs between a search query and a specific word, such as a brand name, Searchperience can be configured to return a special response which can be used to guide users to specific parts in the online shop. No defaults. Matching type must be configured. Redirect on Match Documentation","title":"Redirecting based on Query"},{"location":"features/#product-teaser-selection","text":"Obtain precise product selection based on price or available product's variants used to tease products on all listing views. Searchperience automatically manages and returns the up-to-date price information for a product and any of its variants. When handling filters and facets to narrow down search results, Searchperience will correctly find only products in which at least one variant matches the filtering criteria. Moreover, Searchperience will transform the product data to display the right variant when serving search results. This means that we do serve the most suitable version of that product information to teaser the size, color and price. Variant selection when using facets and filters is active by default. Further variant selection logic and price matching must be configured.","title":"Product Teaser selection"},{"location":"features/#indexer","text":"","title":"Indexer"},{"location":"features/#document-transformation","text":"Attach additional information to products even from external sources. Document transformation allows to modify product's information. This information can include external data, such as selling information for sorting, to internal data, such as suggestion analysis, price or stock information. Default is to include price and stock information to products. Additional data sources are possible.","title":"Document Transformation"},{"location":"features/#document-validation","text":"Validate document properties and prevent irregular data from being saved in the search engine. Document validation allows to verify product properties and recognize products with missing or false information. As a result, these products will not be saved in the search engine. Default example would be that a brand needs to be present. Additional rules need to be configured on demand.","title":"Document Validation"},{"location":"features/#suggestion-extraction","text":"Extract relevant terms from product's properties. Suggestion extraction allows to obtain useful information based on product's properties and generate suggestion phrases which will be displayed to users when searching. These phrases are mainly used for autocompletion. Active by default. Properties used for the suggestion generation must be configured. We do include the title, category path, brand and retailer name or color names. Individual configuration possible.","title":"Suggestion Extraction"},{"location":"features/#analytics-personalisation","text":"","title":"Analytics &amp; Personalisation"},{"location":"features/#tracking","text":"Log relevant user interactions for later analysis and processing. Searchperience can track and record user interactions by embedding a dedicated JavaScript into the online shop or by using the trackers API. Interactions are saved for later processing. This information can be used to generate product recommendations, smart keywords, popular search terms or increase the relevance of products for the users while using the search. Not active by default. Online shop must be adapted. Tracking Documentation","title":"Tracking"},{"location":"features/#most-sold-products","text":"Obtain up-to-date product's selling information. Through the analysis of tracking data it is possible to obtain sales information about any product in the online shop. This information is available per variant and per product. Selling count info can be attached to the specific product and be used for sorting. Not active by default. Configuration is needed. Tracker should be integrated. Time period can be configured (default: week, month, year).","title":"Most Sold Products"},{"location":"features/#most-viewed-products","text":"Find out which products are the most viewed in the online shop. Through the processing of tracking data it is possible to determine view count information about any product. This information is available on a per product basis and not for a single variant. View counts can be attached to the specific product and used for sorting. Not active by default. Configuration is needed. Tracker should be integrated. Time period can be configured (default: week, month, year).","title":"Most Viewed Products"},{"location":"features/#popular-search-terms","text":"Determine which are the most relevant search terms for users. Through the analysis of tracking data, specially the one related to searching and purchases, it is possible to compute which are the most relevant search queries that result in a purchase. This information can be used for autocomplete, and sales analysis. Not active by default. Configuration is needed. Tracker should be activated. Time period can be configured (default: 90 days).","title":"Popular search terms"},{"location":"features/#smart-keywords","text":"Enrich and enhance search experience based on user interactions. Purchase data provides a concrete base for the discovery and computation of relationships between search queries and specific products, online shop categories, brands and even retailers. These relations are used to make these documents more discoverable while searching. Not active by default. Configuration is needed. Tracker should be activated. Default time period: 90 days. Default max. number of keywords per document: 50.","title":"Smart Keywords"},{"location":"features/#recommendations","text":"Suggest similar products to users. Searchperience offers the possibility to generate products recommendations based on similar products i.e. \u2018you might also be interested in\u2019 or what similar user bought i.e. \u2018other users also looked at\u2019. Recommendations are accessible through the recommendations widget. Not active by default. Configuration is needed. Tracker should be activated. Recommender should be activated. Cockpit Widgets","title":"Recommendations"},{"location":"features/#personalised-widgets","text":"Greet users with personalised content in widgets. Searchperience is able to compute preferences for single users based on their behaviour around the shop. This allows for the generation of widgets that contain favorite brands, categories and retailers. Not active by default. Configuration is needed. Tracker should be activated. Personalised Widgets , User profiles","title":"Personalised Widgets"},{"location":"glossary/","text":"Glossary \u00b6 A \u00b6 Autocomplete \u00b6 Autocomplete is a part of the Livesearch which shows a list of words that begin with the term the user has typed. For example, if a user types the letters moist in the search bar, the following autocompletions will appear: moist ure moist urising moist uriser Notice Autocomplete options always match available documents, there will never be an option that does not match a document. C \u00b6 Configurable Product \u00b6 A configurable product is an item that requires the customer to choose one or more \u2018options\u2019 prior to purchase. For example, when buying shoes, the customers need to select what shoe size they want to buy. Many clothing items may well have both color and size choices that have to be made by the customer. It is possible to specify different prices for some or all of the configurable options in a configurable product. As an example, some store owners might wish to price small, medium and large T-shirts at one price, with XL sizes and above priced slightly higher. 6 D \u00b6 Document \u00b6 A document represents a searchable entity within Searchperience. Each document has a type assigned to it e.g. brand, category, retailer, location, products or even crawled web pages. Types \u00b6 A type represents a subset of documents that share common properties. When searching for any document type the following configuration options are available: generate facets based on the available data expose filters to filter out data show suggestions to user input do a second search in case there are no documents matching the user input provide sorting options for the resulting documents This configuration can be different for every endpoint. It is possible to search for only one type of an endpoint by providing the type parameter in the request. E \u00b6 Endpoint \u00b6 An endpoint is a URL 1 that one can visit to obtain documents . It is possible to use HTTP GET parameters to filter down results or apply sorting . An endpoint can serve results in multiple formats, the response format depends on the provided HTTP-Header . The documents included in the response are normally split in subsets with common properties known as types . An endpoint can be configured to execute searches on a single or multiple types . Elasticsearch \u00b6 Elasticsearch is a distributed, open source search and analytics engine for all types of data, including textual, numerical, geospatial, structured, and unstructured. F \u00b6 Facet \u00b6 Facets behave in a similar way to a filter, however they also provide the available options for that property e.g. a color facet would also return the values {blue, green, red, white, ... } . Danger Facets are visible to users, so that they can easily filter down through documents based. One can think of facets as filters with a user interface. Notice Facet options shown are generated out of the available properties inside documents. This means that there will never be a Facet option that does not have at least one matching document. There are different types of Facets that can be used: a list facet a tree facet and a range facet List \u00b6 A list Facet displays facet options in a flat list structure. Usually in a list Facet multiple options can be selected (this behaviour is configurable). Tree \u00b6 A tree Facet displays facet options in a tree structure of a desired depth. This Facet type is particularly useful for showing categories. Usually in a tree Facet only a single option can be selected (this behaviour is configurable). Range \u00b6 A range Facet displays the minimum and maximum possible facet options from the available documents. The range Facet allows you to select minimum and maximum value for a certain document feature. This Facet is useful for showing e.g. a price or a quantity slider. Filter \u00b6 Filters help to reduce the scope of the search by reducing the number of search results. This is done by requesting only documents that match a certain property e.g. color or size . A filter will only be applied if it has been configured; if a request with a non-configured filter is made, this will just be ignored. Filters can be configured on an endpoint basis, i.e. one endpoint can have filters for sizes and colors , while another endpoint can have filters for brands and retailers . When working with multiple types on a single endpoint, it is possible to configure a filter so that it matches all available types on that endpoint. Frontend \u00b6 This Searchperience application is responsible for delivering search results. Almost all traffic between Searchperience and the online shop would go through this application. Endpoints , results type ( JSON or pre-rendered HTML ) are configured and managed here. G \u00b6 GTM \u00b6 Google Tag Manager is a free tool that allows you manage and deploy marketing tags (snippets of code or tracking pixels) on your website (or mobile app) without having to modify the code. See also Google Marketing Platform H \u00b6 HTML response \u00b6 Using the HTML response format improves rendering speeds for search results and make the experience generally faster, however there are trade-offs as results can not be customized as with a JSON response . An HTML response format is also more useful when dealing with older browsers or slower devices. The Searchperience Frontend can be configured to render custom HTML markup, which can be directly injected into any web page. HTTP-Accept header \u00b6 This HTTP-Header defines which Content-Types are acceptable for the requesting client. See also content negotiation . We do support the following formats: Accept: text/html Accept: application/json (default format) J \u00b6 JSON response \u00b6 The JSON 2 response can be integrated with various clients (apps, single page applications, etc.) It renders pure JSON, which includes facets , pagination and documents . L \u00b6 Livesearch \u00b6 A Livesearch endpoint is a special endpoint used to show users a preview of the search results before executing the search request. A Livesearch request is faster than a normal search request and also offers special features like redirecting on match or expanded navigation (when using the Searchperience JavaScript library ) which allows interaction using a keyboard or mouse. Results shown in the Livesearch can also be highlighted. A Livesearch result typically consists of: an autocomplete section a suggestions section and a section that contains a subset of documents (1 to 5) of some or all available types . M \u00b6 Mime Type \u00b6 A Mime Type is a more technical and specific description for the type (like product or brand ) of a document . It allows us to identify the type of a document and tells us what data format we can expect. Most of the documents are expected to be in the JSON 2 format and are sent to us by external systems. Some of them, like text/html (representing web pages) or application/pdf (representing PDF documents) are downloaded via the Searchperience Crawler. N \u00b6 Node Hash \u00b6 The Node Hash is a feature of Searchperience Frontend which ensures consistently ordered search results for a user. It was needed because the underlying data store (Elasticsearch) distributes its data over multiple nodes and relevance calculation is usually done on one node which could result in \"jumping results\" whenever a user refreshes the same page multiple times. To use it, one just has to append the nodeHash parameter when using Frontend. It can be an arbitrary string which should be calculated based on the user. On search result pages \"jumping results\" are less of an issue. The chance of documents having the same score is not that high since the user provided a query which influences each documents score heavily. (\"How good is a match with that query?\") On category pages that issue can occur much more often because there are only filters set and no query is provided. A filter does not influence a documents score. That means Elasticsearch gives the same score to almost every returned document. You can get more information in the Elasticsearch documentation: Getting consistent scoring Preference (the feature we utilize to achieve consistent scoring) P \u00b6 Pagination \u00b6 In case of a large number of documents , pagination of the results is possible. The maximum number of pages and the number of documents in a page is configurable. R \u00b6 Redirect on match \u00b6 Redirect on match is a feature primarily used in Livesearch endpoints . When a user searches for something an HTTP-Header is returned along with the results indicating that there was an exact match for the provided query. The Searchperience JavaScript library uses this HTTP-Header to redirect to a dedicated page in case the user executes the search request. Possible use case: A user want to search for a brand name If the user enters the name nike as text in the search input field and gets Livesearch options based on it The term nike is the exact name of a brand that belongs to your products so the HTTP-Header indicating this is a valid redirect target When the user executes the search we can redirect him to a dedicated Nike catalogue page with a pre-defined filter on the brand nike . Example HTTP-Header attached to the Livesearch response: SP-Redirect:https://www.yourdomain.com/products/brand/nike/ Relevance \u00b6 The more relevant a product is the higher it will appear in search results. We use the BM25 algorithm to match between the search query and a document. S \u00b6 Search query \u00b6 The input of the user in the search field. In other words, the term or terms the user is searching for. Second Search \u00b6 The Second Search is a core feature and happens transparently in the background. It is commonly used for giving results whenever a search term would yield no results but a similar word would (Spelling Correction). A Second Search is triggered when: No types have results (if one type has results we never fire the Second Search) Suggestions are configured and give back a suggestion for the search term Simple Product \u00b6 A simple product is a physical product that is shipped to a customer. A simple product might be, for example, a lamp, or a vacuum cleaner. It has no options attached to it such as size, color or material. Each simple product will have its own unique SKU. 6 Sorting \u00b6 A Sorting can be used to sort the documents in the search result. The available options are configurable. { .align-left .vertical-top } { .align-right } Stopword \u00b6 Stopwords 4 are a set of terms that the search engine should ignore while querying. The main goal of this feature is to lead to more precise search results and increase the performance of every request (depends on the amount of documents available). For each individual language a standard set of stopwords is preconfigured, check the lucene repository for a detailed overview. However, if you are missing some words within the default list you can use the custom stopwords module within the Searchperience Cockpit. Suggestion \u00b6 Suggestions are a part of the Livesearch that show a list of words that are similar to the term the user typed. This is a great usability feature as it helps users to recognise and correct mistyped words. For example, if a user typed berformance the corresponding suggestion would be performance . Notice Suggestions are generated out of the available documents , so there will never be an option that does not match a document. Synonym \u00b6 Synonyms 5 allow to configure relationships between terms, so that when a user searches for a term, it would be like searching for a similar one. This improves search quality and lead users to better results. One common example would be to create a synonym for the term notebook which also shows results for MacBook . Another case could be to handle abbreviations like TV to be equal to television . Nevertheless, synonyms are a very specialized instrument, which heavily depends on the data provided to Searchperience. In general synonyms are always customer specific, that means that we do not provide any defaults in order to avoid side effects. T \u00b6 TopKeyword \u00b6 A topkeyword contains a searchQuery and information about the context in which the query lead to a purchase. This is the reason why information as brandCode or retailerCode are also present. The /popularSearches Frontend endpoint returns a collection of TopKeywords objects. Each Topkeyword consists of various elements as can be seen in the next code snippet. { \"foreignId\": \"a114e69a5746e2cfa326f7c8df21ec1a\", // hash of the fields' contents except occurrences \"searchQuery\": \"henne\", // user input in search field \"brandCode\": \"hennessy\", \"retailerCode\": \"world-duty-free\", \"categoryCodes\": [ \"food_drink\", \"food_drink_wine_spirits\", \"food_drink_wine_spirits_cognac\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"referer\": \"-\", \"occurrences\": 1 } U \u00b6 User Profile \u00b6 Info Only available when the Searchperience Tracker is integrated into the online shop. Searchperience will generate a document for every logged in user in the shop. Inside it one can find the brands, categories and retailers which the user has interacted with. These entities contain preference values that indicate how relevant is a certain entity to the corresponding user. The values are computed by analysing the number of click, view, addToCart and checkout events a user generates around the shop with different products in the past 365 days. All these interactions are grouped and added up and a user profile document is generated for the corresponding user. These profiles are computed once a day for the events from the day before. The default values for these interactions are the following \"click\" = 1.0 \"view\" = 5.0 \"addToCart\" = 10.0 \"purchase\" = 25.0 A user profile document looks like this { \"foreignId\": \"2719f3e2-e6c7-496b-bf75-f5bdf8a509c0-en_GB-master\", \"userId\": \"2719f3e2-e6c7-496b-bf75-f5bdf8a509c0\", \"channel\": \"master\", \"locale\": \"en_GB\", \"preferences\": { \"brand\": [ { \"brandCode\": \"cath-kidston\", \"preferenceValue\": 250.0 }, { \"brandCode\": \"blackberry\", \"preferenceValue\": 25.0 } ], \"category\": [ { \"categoryCodes\": [ \"women_accessories\" ], \"preferenceValue\": 250.0 }, { \"categoryCodes\": [ \"technology_smartphones\" ], \"preferenceValue\": 25.0 }, { \"categoryCodes\": [ \"beauty_fragrance_women\" ], \"preferenceValue\": 20.0 } ], \"retailer\": [ { \"retailerCode\": \"cath-kidston\", \"preferenceValue\": 250.0 } ] } } W \u00b6 Widget \u00b6 With Widgets it is possible to obtain a group of documents from Searchperience. This flexible content can be used on the website to promote e.g. products. Uniform Resource Locator (URL) \u21a9 JavaScript Object Notation (JSON) \u21a9 \u21a9 For example, a user clicked on a brand facet, thus filtering the result to return less documents and potentially making the price range smaller. \u21a9 More information about stopwords on Wikipedia \u21a9 More information about synonyms on Wikipedia \u21a9 More information about Understanding Simple Products versus Configurable Products in Magento \u21a9 \u21a9","title":"Glossary"},{"location":"glossary/#glossary","text":"","title":"Glossary"},{"location":"glossary/#a","text":"","title":"A"},{"location":"glossary/#autocomplete","text":"Autocomplete is a part of the Livesearch which shows a list of words that begin with the term the user has typed. For example, if a user types the letters moist in the search bar, the following autocompletions will appear: moist ure moist urising moist uriser Notice Autocomplete options always match available documents, there will never be an option that does not match a document.","title":"Autocomplete"},{"location":"glossary/#c","text":"","title":"C"},{"location":"glossary/#configurable-product","text":"A configurable product is an item that requires the customer to choose one or more \u2018options\u2019 prior to purchase. For example, when buying shoes, the customers need to select what shoe size they want to buy. Many clothing items may well have both color and size choices that have to be made by the customer. It is possible to specify different prices for some or all of the configurable options in a configurable product. As an example, some store owners might wish to price small, medium and large T-shirts at one price, with XL sizes and above priced slightly higher. 6","title":"Configurable Product"},{"location":"glossary/#d","text":"","title":"D"},{"location":"glossary/#document","text":"A document represents a searchable entity within Searchperience. Each document has a type assigned to it e.g. brand, category, retailer, location, products or even crawled web pages.","title":"Document"},{"location":"glossary/#types","text":"A type represents a subset of documents that share common properties. When searching for any document type the following configuration options are available: generate facets based on the available data expose filters to filter out data show suggestions to user input do a second search in case there are no documents matching the user input provide sorting options for the resulting documents This configuration can be different for every endpoint. It is possible to search for only one type of an endpoint by providing the type parameter in the request.","title":"Types"},{"location":"glossary/#e","text":"","title":"E"},{"location":"glossary/#endpoint","text":"An endpoint is a URL 1 that one can visit to obtain documents . It is possible to use HTTP GET parameters to filter down results or apply sorting . An endpoint can serve results in multiple formats, the response format depends on the provided HTTP-Header . The documents included in the response are normally split in subsets with common properties known as types . An endpoint can be configured to execute searches on a single or multiple types .","title":"Endpoint"},{"location":"glossary/#elasticsearch","text":"Elasticsearch is a distributed, open source search and analytics engine for all types of data, including textual, numerical, geospatial, structured, and unstructured.","title":"Elasticsearch"},{"location":"glossary/#f","text":"","title":"F"},{"location":"glossary/#facet","text":"Facets behave in a similar way to a filter, however they also provide the available options for that property e.g. a color facet would also return the values {blue, green, red, white, ... } . Danger Facets are visible to users, so that they can easily filter down through documents based. One can think of facets as filters with a user interface. Notice Facet options shown are generated out of the available properties inside documents. This means that there will never be a Facet option that does not have at least one matching document. There are different types of Facets that can be used: a list facet a tree facet and a range facet","title":"Facet"},{"location":"glossary/#list","text":"A list Facet displays facet options in a flat list structure. Usually in a list Facet multiple options can be selected (this behaviour is configurable).","title":"List"},{"location":"glossary/#tree","text":"A tree Facet displays facet options in a tree structure of a desired depth. This Facet type is particularly useful for showing categories. Usually in a tree Facet only a single option can be selected (this behaviour is configurable).","title":"Tree"},{"location":"glossary/#range","text":"A range Facet displays the minimum and maximum possible facet options from the available documents. The range Facet allows you to select minimum and maximum value for a certain document feature. This Facet is useful for showing e.g. a price or a quantity slider.","title":"Range"},{"location":"glossary/#filter","text":"Filters help to reduce the scope of the search by reducing the number of search results. This is done by requesting only documents that match a certain property e.g. color or size . A filter will only be applied if it has been configured; if a request with a non-configured filter is made, this will just be ignored. Filters can be configured on an endpoint basis, i.e. one endpoint can have filters for sizes and colors , while another endpoint can have filters for brands and retailers . When working with multiple types on a single endpoint, it is possible to configure a filter so that it matches all available types on that endpoint.","title":"Filter"},{"location":"glossary/#frontend","text":"This Searchperience application is responsible for delivering search results. Almost all traffic between Searchperience and the online shop would go through this application. Endpoints , results type ( JSON or pre-rendered HTML ) are configured and managed here.","title":"Frontend"},{"location":"glossary/#g","text":"","title":"G"},{"location":"glossary/#gtm","text":"Google Tag Manager is a free tool that allows you manage and deploy marketing tags (snippets of code or tracking pixels) on your website (or mobile app) without having to modify the code. See also Google Marketing Platform","title":"GTM"},{"location":"glossary/#h","text":"","title":"H"},{"location":"glossary/#html-response","text":"Using the HTML response format improves rendering speeds for search results and make the experience generally faster, however there are trade-offs as results can not be customized as with a JSON response . An HTML response format is also more useful when dealing with older browsers or slower devices. The Searchperience Frontend can be configured to render custom HTML markup, which can be directly injected into any web page.","title":"HTML response"},{"location":"glossary/#http-accept-header","text":"This HTTP-Header defines which Content-Types are acceptable for the requesting client. See also content negotiation . We do support the following formats: Accept: text/html Accept: application/json (default format)","title":"HTTP-Accept header"},{"location":"glossary/#j","text":"","title":"J"},{"location":"glossary/#json-response","text":"The JSON 2 response can be integrated with various clients (apps, single page applications, etc.) It renders pure JSON, which includes facets , pagination and documents .","title":"JSON response"},{"location":"glossary/#l","text":"","title":"L"},{"location":"glossary/#livesearch","text":"A Livesearch endpoint is a special endpoint used to show users a preview of the search results before executing the search request. A Livesearch request is faster than a normal search request and also offers special features like redirecting on match or expanded navigation (when using the Searchperience JavaScript library ) which allows interaction using a keyboard or mouse. Results shown in the Livesearch can also be highlighted. A Livesearch result typically consists of: an autocomplete section a suggestions section and a section that contains a subset of documents (1 to 5) of some or all available types .","title":"Livesearch"},{"location":"glossary/#m","text":"","title":"M"},{"location":"glossary/#mime-type","text":"A Mime Type is a more technical and specific description for the type (like product or brand ) of a document . It allows us to identify the type of a document and tells us what data format we can expect. Most of the documents are expected to be in the JSON 2 format and are sent to us by external systems. Some of them, like text/html (representing web pages) or application/pdf (representing PDF documents) are downloaded via the Searchperience Crawler.","title":"Mime Type"},{"location":"glossary/#n","text":"","title":"N"},{"location":"glossary/#node-hash","text":"The Node Hash is a feature of Searchperience Frontend which ensures consistently ordered search results for a user. It was needed because the underlying data store (Elasticsearch) distributes its data over multiple nodes and relevance calculation is usually done on one node which could result in \"jumping results\" whenever a user refreshes the same page multiple times. To use it, one just has to append the nodeHash parameter when using Frontend. It can be an arbitrary string which should be calculated based on the user. On search result pages \"jumping results\" are less of an issue. The chance of documents having the same score is not that high since the user provided a query which influences each documents score heavily. (\"How good is a match with that query?\") On category pages that issue can occur much more often because there are only filters set and no query is provided. A filter does not influence a documents score. That means Elasticsearch gives the same score to almost every returned document. You can get more information in the Elasticsearch documentation: Getting consistent scoring Preference (the feature we utilize to achieve consistent scoring)","title":"Node Hash"},{"location":"glossary/#p","text":"","title":"P"},{"location":"glossary/#pagination","text":"In case of a large number of documents , pagination of the results is possible. The maximum number of pages and the number of documents in a page is configurable.","title":"Pagination"},{"location":"glossary/#r","text":"","title":"R"},{"location":"glossary/#redirect-on-match","text":"Redirect on match is a feature primarily used in Livesearch endpoints . When a user searches for something an HTTP-Header is returned along with the results indicating that there was an exact match for the provided query. The Searchperience JavaScript library uses this HTTP-Header to redirect to a dedicated page in case the user executes the search request. Possible use case: A user want to search for a brand name If the user enters the name nike as text in the search input field and gets Livesearch options based on it The term nike is the exact name of a brand that belongs to your products so the HTTP-Header indicating this is a valid redirect target When the user executes the search we can redirect him to a dedicated Nike catalogue page with a pre-defined filter on the brand nike . Example HTTP-Header attached to the Livesearch response: SP-Redirect:https://www.yourdomain.com/products/brand/nike/","title":"Redirect on match"},{"location":"glossary/#relevance","text":"The more relevant a product is the higher it will appear in search results. We use the BM25 algorithm to match between the search query and a document.","title":"Relevance"},{"location":"glossary/#s","text":"","title":"S"},{"location":"glossary/#search-query","text":"The input of the user in the search field. In other words, the term or terms the user is searching for.","title":"Search query"},{"location":"glossary/#second-search","text":"The Second Search is a core feature and happens transparently in the background. It is commonly used for giving results whenever a search term would yield no results but a similar word would (Spelling Correction). A Second Search is triggered when: No types have results (if one type has results we never fire the Second Search) Suggestions are configured and give back a suggestion for the search term","title":"Second Search"},{"location":"glossary/#simple-product","text":"A simple product is a physical product that is shipped to a customer. A simple product might be, for example, a lamp, or a vacuum cleaner. It has no options attached to it such as size, color or material. Each simple product will have its own unique SKU. 6","title":"Simple Product"},{"location":"glossary/#sorting","text":"A Sorting can be used to sort the documents in the search result. The available options are configurable. { .align-left .vertical-top } { .align-right }","title":"Sorting"},{"location":"glossary/#stopword","text":"Stopwords 4 are a set of terms that the search engine should ignore while querying. The main goal of this feature is to lead to more precise search results and increase the performance of every request (depends on the amount of documents available). For each individual language a standard set of stopwords is preconfigured, check the lucene repository for a detailed overview. However, if you are missing some words within the default list you can use the custom stopwords module within the Searchperience Cockpit.","title":"Stopword"},{"location":"glossary/#suggestion","text":"Suggestions are a part of the Livesearch that show a list of words that are similar to the term the user typed. This is a great usability feature as it helps users to recognise and correct mistyped words. For example, if a user typed berformance the corresponding suggestion would be performance . Notice Suggestions are generated out of the available documents , so there will never be an option that does not match a document.","title":"Suggestion"},{"location":"glossary/#synonym","text":"Synonyms 5 allow to configure relationships between terms, so that when a user searches for a term, it would be like searching for a similar one. This improves search quality and lead users to better results. One common example would be to create a synonym for the term notebook which also shows results for MacBook . Another case could be to handle abbreviations like TV to be equal to television . Nevertheless, synonyms are a very specialized instrument, which heavily depends on the data provided to Searchperience. In general synonyms are always customer specific, that means that we do not provide any defaults in order to avoid side effects.","title":"Synonym"},{"location":"glossary/#t","text":"","title":"T"},{"location":"glossary/#topkeyword","text":"A topkeyword contains a searchQuery and information about the context in which the query lead to a purchase. This is the reason why information as brandCode or retailerCode are also present. The /popularSearches Frontend endpoint returns a collection of TopKeywords objects. Each Topkeyword consists of various elements as can be seen in the next code snippet. { \"foreignId\": \"a114e69a5746e2cfa326f7c8df21ec1a\", // hash of the fields' contents except occurrences \"searchQuery\": \"henne\", // user input in search field \"brandCode\": \"hennessy\", \"retailerCode\": \"world-duty-free\", \"categoryCodes\": [ \"food_drink\", \"food_drink_wine_spirits\", \"food_drink_wine_spirits_cognac\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"referer\": \"-\", \"occurrences\": 1 }","title":"TopKeyword"},{"location":"glossary/#u","text":"","title":"U"},{"location":"glossary/#user-profile","text":"Info Only available when the Searchperience Tracker is integrated into the online shop. Searchperience will generate a document for every logged in user in the shop. Inside it one can find the brands, categories and retailers which the user has interacted with. These entities contain preference values that indicate how relevant is a certain entity to the corresponding user. The values are computed by analysing the number of click, view, addToCart and checkout events a user generates around the shop with different products in the past 365 days. All these interactions are grouped and added up and a user profile document is generated for the corresponding user. These profiles are computed once a day for the events from the day before. The default values for these interactions are the following \"click\" = 1.0 \"view\" = 5.0 \"addToCart\" = 10.0 \"purchase\" = 25.0 A user profile document looks like this { \"foreignId\": \"2719f3e2-e6c7-496b-bf75-f5bdf8a509c0-en_GB-master\", \"userId\": \"2719f3e2-e6c7-496b-bf75-f5bdf8a509c0\", \"channel\": \"master\", \"locale\": \"en_GB\", \"preferences\": { \"brand\": [ { \"brandCode\": \"cath-kidston\", \"preferenceValue\": 250.0 }, { \"brandCode\": \"blackberry\", \"preferenceValue\": 25.0 } ], \"category\": [ { \"categoryCodes\": [ \"women_accessories\" ], \"preferenceValue\": 250.0 }, { \"categoryCodes\": [ \"technology_smartphones\" ], \"preferenceValue\": 25.0 }, { \"categoryCodes\": [ \"beauty_fragrance_women\" ], \"preferenceValue\": 20.0 } ], \"retailer\": [ { \"retailerCode\": \"cath-kidston\", \"preferenceValue\": 250.0 } ] } }","title":"User Profile"},{"location":"glossary/#w","text":"","title":"W"},{"location":"glossary/#widget","text":"With Widgets it is possible to obtain a group of documents from Searchperience. This flexible content can be used on the website to promote e.g. products. Uniform Resource Locator (URL) \u21a9 JavaScript Object Notation (JSON) \u21a9 \u21a9 For example, a user clicked on a brand facet, thus filtering the result to return less documents and potentially making the price range smaller. \u21a9 More information about stopwords on Wikipedia \u21a9 More information about synonyms on Wikipedia \u21a9 More information about Understanding Simple Products versus Configurable Products in Magento \u21a9 \u21a9","title":"Widget"},{"location":"cockpit/api/","text":"API Endpoints \u00b6 Searchperience Cockpit offers various endpoints with different functionality. Crawl endpoint \u00b6 Warning The domain of the URL has to be whitelisted by Searchperience. Otherwise, the request will fail. Used to add url to the crawler queue. $ curl -X POST http://<searchperience cockpit url>/api/crawl?url=https://my-domain/url-to-crawl Endpoint is duplicate functionality described in Crawler Add URL Health endpoint \u00b6 Used to get related services status like: mysql, indexer, frontend and s3 bucket. $ curl -X POST http://<searchperience cockpit url>/api/health Ping endpoint \u00b6 Used to get Cockpit status for the liveness probe. $ curl -X POST http://<searchperience cockpit url>/api/ping","title":"API"},{"location":"cockpit/api/#api-endpoints","text":"Searchperience Cockpit offers various endpoints with different functionality.","title":"API Endpoints"},{"location":"cockpit/api/#crawl-endpoint","text":"Warning The domain of the URL has to be whitelisted by Searchperience. Otherwise, the request will fail. Used to add url to the crawler queue. $ curl -X POST http://<searchperience cockpit url>/api/crawl?url=https://my-domain/url-to-crawl Endpoint is duplicate functionality described in Crawler Add URL","title":"Crawl endpoint"},{"location":"cockpit/api/#health-endpoint","text":"Used to get related services status like: mysql, indexer, frontend and s3 bucket. $ curl -X POST http://<searchperience cockpit url>/api/health","title":"Health endpoint"},{"location":"cockpit/api/#ping-endpoint","text":"Used to get Cockpit status for the liveness probe. $ curl -X POST http://<searchperience cockpit url>/api/ping","title":"Ping endpoint"},{"location":"cockpit/crawler/","text":"Crawler \u00b6 In this module all web pages that get crawled using our HTTP-crawler 1 are shown. A web page listed in the table below might be in the Searchperience Frontend available already from a previous crawling. In the case the column Last Processing is empty the web page is new to Searchperience and not yet available for searching using the Searchperience Frontend. Note All web pages are scheduled for re-crawling on a regular base automatically. Search & Filters \u00b6 Allows to search through the URL queue 2 to check if for example a missing web page is already scheduled or was rejected and marked as Error . In rare cases the URL queue 2 is filled with a huge number of URLs, in this case you can use the filters to filter through the possible returned URL queue 2 items. The columns \u00b6 Available Columns \u00b6 Name Value Description Id Integer The internally used identifier. Process start time DateTime DateTime when the processing started. Priority String The priority Immediate defines that the document should be taken next for crawling. Usually only relevant in rare cases when the queue is filled. All other items have the regular priority of Normal . Status String Current status of the document in the crawler queue. URL String URL of the document. Different Queue Item Status \u00b6 Name Description Error This happens when a web page cannot be crawled due to a HTTP-Error returned. Processing The URL queue 2 item gets currently crawled. Waiting The URL is scheduled for crawling and is waiting for a free crawler to get crawled. Add URL \u00b6 Adds a new or missing web page to the crawler URL queue 2 3 . The URL gets added with the priority Immediate to the queue and will be visible in the table listing. Actions \u00b6 To apply one of the two available actions on one ore more queue items, just click the check box in the first column. ReCrawl Selected forces the priority for the selected queue items the priority Immediate . Remove from Queue removes the selected URL queue items from the queue and prevents the web page(s) from getting crawled. Responsible to download web pages and store them in Searchperience. \u21a9 List of web pages that get downloaded using our Searchperience HTTP-Crawler. \u21a9 \u21a9 \u21a9 \u21a9 \u21a9 Only preconfigured domains and URL patterns are allowed for crawling. \u21a9","title":"Crawler"},{"location":"cockpit/crawler/#crawler","text":"In this module all web pages that get crawled using our HTTP-crawler 1 are shown. A web page listed in the table below might be in the Searchperience Frontend available already from a previous crawling. In the case the column Last Processing is empty the web page is new to Searchperience and not yet available for searching using the Searchperience Frontend. Note All web pages are scheduled for re-crawling on a regular base automatically.","title":"Crawler"},{"location":"cockpit/crawler/#search-filters","text":"Allows to search through the URL queue 2 to check if for example a missing web page is already scheduled or was rejected and marked as Error . In rare cases the URL queue 2 is filled with a huge number of URLs, in this case you can use the filters to filter through the possible returned URL queue 2 items.","title":"Search &amp; Filters"},{"location":"cockpit/crawler/#the-columns","text":"","title":"The columns"},{"location":"cockpit/crawler/#available-columns","text":"Name Value Description Id Integer The internally used identifier. Process start time DateTime DateTime when the processing started. Priority String The priority Immediate defines that the document should be taken next for crawling. Usually only relevant in rare cases when the queue is filled. All other items have the regular priority of Normal . Status String Current status of the document in the crawler queue. URL String URL of the document.","title":"Available Columns"},{"location":"cockpit/crawler/#different-queue-item-status","text":"Name Description Error This happens when a web page cannot be crawled due to a HTTP-Error returned. Processing The URL queue 2 item gets currently crawled. Waiting The URL is scheduled for crawling and is waiting for a free crawler to get crawled.","title":"Different Queue Item Status"},{"location":"cockpit/crawler/#add-url","text":"Adds a new or missing web page to the crawler URL queue 2 3 . The URL gets added with the priority Immediate to the queue and will be visible in the table listing.","title":"Add URL"},{"location":"cockpit/crawler/#actions","text":"To apply one of the two available actions on one ore more queue items, just click the check box in the first column. ReCrawl Selected forces the priority for the selected queue items the priority Immediate . Remove from Queue removes the selected URL queue items from the queue and prevents the web page(s) from getting crawled. Responsible to download web pages and store them in Searchperience. \u21a9 List of web pages that get downloaded using our Searchperience HTTP-Crawler. \u21a9 \u21a9 \u21a9 \u21a9 \u21a9 Only preconfigured domains and URL patterns are allowed for crawling. \u21a9","title":"Actions"},{"location":"cockpit/dashboard/","text":"Dashboard \u00b6 After successfully logging into Cockpit you will be presented with the dashboard. The Dashboard offers quick access to any available modules (depending on your user privileges) and to the state of document indexing and crawling 1 . Direct Module Access \u00b6 This section gives you direct access to the most important modules inside Searchperience Cockpit. Document Processing Overview \u00b6 The graph offers an overview of the overall processing state of all available documents inside Searchperience. Crawler Url Queue Overview \u00b6 The graph gives an overview about web pages scheduled for crawling . Quick Start \u00b6 The Quick Start tool box gives you three options that you can perform by adding a URL of a web page . Action Description ReIndex Document Schedules a web page for re crawling. Add to Crawler Queue Adds a new (missing) web page to the crawler url queue 2 . Hide From Search Hides a web page from Searchperience Frontend (not in search available). The crawler URL queue, that is responsible to fetch e.g. HTML pages from the internet. \u21a9 Only pre configured domains and url patterns are allowed for crawling. \u21a9","title":"Dashboard"},{"location":"cockpit/dashboard/#dashboard","text":"After successfully logging into Cockpit you will be presented with the dashboard. The Dashboard offers quick access to any available modules (depending on your user privileges) and to the state of document indexing and crawling 1 .","title":"Dashboard"},{"location":"cockpit/dashboard/#direct-module-access","text":"This section gives you direct access to the most important modules inside Searchperience Cockpit.","title":"Direct Module Access"},{"location":"cockpit/dashboard/#document-processing-overview","text":"The graph offers an overview of the overall processing state of all available documents inside Searchperience.","title":"Document Processing Overview"},{"location":"cockpit/dashboard/#crawler-url-queue-overview","text":"The graph gives an overview about web pages scheduled for crawling .","title":"Crawler Url Queue Overview"},{"location":"cockpit/dashboard/#quick-start","text":"The Quick Start tool box gives you three options that you can perform by adding a URL of a web page . Action Description ReIndex Document Schedules a web page for re crawling. Add to Crawler Queue Adds a new (missing) web page to the crawler url queue 2 . Hide From Search Hides a web page from Searchperience Frontend (not in search available). The crawler URL queue, that is responsible to fetch e.g. HTML pages from the internet. \u21a9 Only pre configured domains and url patterns are allowed for crawling. \u21a9","title":"Quick Start"},{"location":"cockpit/documents/","text":"All Documents \u00b6 The All Documents module gives you an overview about any documents available in Searchperience . Note Documents that are listed here are within Searchperience as long as they are not marked as Error , Not Indexed , Duplicated or Redirect . Search & Filters \u00b6 The easiest way to search for a document is to type the URL or foreignId of a document in the search box. In addition to basic search, you can use filters to limit the possible hits. Most common filters are the Source 1 and the Mime Type ones. The columns \u00b6 Each user can manage the visibility of the columns displayed by using the Columns button above the table. Available Columns \u00b6 Name Value Description Created DateTime Date the document was created for the first time within Searchperience. Foreign Id String A unique identifier. In some cases there is no foreignId available for a document, in this case will be a URL present. Hidden Boolean If active the document gets immediately removed from Searchperience Frontend. This means that the document is still present but not available for searching. ID Integer The internally used identifier. Last Processed DateTime Date when the document was processed and pushed therefore it became available in Searchperience Frontend. Mime String Technical type that is used during the indexing process to populate all relevant properties. No Index Internal Boolean If the document has been automatically considered as \"should not be available\" this flag is active. Therefore, the document is not available within Searchperience Frontend for searching. Notification String There are different notification types available that indicate the state of a document. In case this column is empty, the document should be available through the Searchperience Frontend. Source String Short name of the providing owner/master application managing this document. Updated DateTime Date in which Searchperience received the last update for this document. URL String Absolute URL pointing to the detail view of a document. If no URL is shown a Foreign Id should be available. The URL itself is clickable and will open the web page in the current browser. Different Document Notifications \u00b6 Each notification shows a detailed information on mouse hover. Name Status Description Duplicate Not visible The same document is already available in Searchperience Frontend. Error Not visible Error during crawling or processing. Not Indexed Not visible Does not fulfill the configured requirements to being visible in Searchperience Frontend. Processing Get processed This document is currently in processing and will be populated in Searchperience Frontend immediately afterwards. Redirect Not visible This web page document is serving a HTTP-Redirect to a new target page. The redirect target page will indexed as well. To Delete Visible, gets deleted soon Document is marked for deletion and will be removed from Searchperience soon. Waiting Waiting for processing The document is marked for processing but still waiting for it to get processed. Document Actions \u00b6 Hide a document \u00b6 Use this toggle to remove a document from being available in Searchperience Frontend. If the toggle is used, the document will get processed with high priority. In order to remove it as fast as possible from search results. To make the document visible in Searchperience Frontend again, just set the toggle to disabled (grey). ReCrawl & ReIndex \u00b6 Usually there is no need to ReCrawl or ReIndex one ore more documents. Searchperience is configured to maintain the continuous re-crawling and processing of all documents known in the system. However, if you have a web page that you want to have updated immediately, use Search & Filters to get to the document, activate the checkbox and hit the ReCrawl button. View documents raw data \u00b6 The Cockpit All Documents module also offers the possibility to display the document raw data. To open the detail view of a document just click on the eye icon under the Actions column. The content area shows the document raw data, this can be in various formats like HTML, XML, JSON. The source of the document is the short textual name of the owner/master application managing the specific document type. \u21a9","title":"All Documents"},{"location":"cockpit/documents/#all-documents","text":"The All Documents module gives you an overview about any documents available in Searchperience . Note Documents that are listed here are within Searchperience as long as they are not marked as Error , Not Indexed , Duplicated or Redirect .","title":"All Documents"},{"location":"cockpit/documents/#search-filters","text":"The easiest way to search for a document is to type the URL or foreignId of a document in the search box. In addition to basic search, you can use filters to limit the possible hits. Most common filters are the Source 1 and the Mime Type ones.","title":"Search &amp; Filters"},{"location":"cockpit/documents/#the-columns","text":"Each user can manage the visibility of the columns displayed by using the Columns button above the table.","title":"The columns"},{"location":"cockpit/documents/#available-columns","text":"Name Value Description Created DateTime Date the document was created for the first time within Searchperience. Foreign Id String A unique identifier. In some cases there is no foreignId available for a document, in this case will be a URL present. Hidden Boolean If active the document gets immediately removed from Searchperience Frontend. This means that the document is still present but not available for searching. ID Integer The internally used identifier. Last Processed DateTime Date when the document was processed and pushed therefore it became available in Searchperience Frontend. Mime String Technical type that is used during the indexing process to populate all relevant properties. No Index Internal Boolean If the document has been automatically considered as \"should not be available\" this flag is active. Therefore, the document is not available within Searchperience Frontend for searching. Notification String There are different notification types available that indicate the state of a document. In case this column is empty, the document should be available through the Searchperience Frontend. Source String Short name of the providing owner/master application managing this document. Updated DateTime Date in which Searchperience received the last update for this document. URL String Absolute URL pointing to the detail view of a document. If no URL is shown a Foreign Id should be available. The URL itself is clickable and will open the web page in the current browser.","title":"Available Columns"},{"location":"cockpit/documents/#different-document-notifications","text":"Each notification shows a detailed information on mouse hover. Name Status Description Duplicate Not visible The same document is already available in Searchperience Frontend. Error Not visible Error during crawling or processing. Not Indexed Not visible Does not fulfill the configured requirements to being visible in Searchperience Frontend. Processing Get processed This document is currently in processing and will be populated in Searchperience Frontend immediately afterwards. Redirect Not visible This web page document is serving a HTTP-Redirect to a new target page. The redirect target page will indexed as well. To Delete Visible, gets deleted soon Document is marked for deletion and will be removed from Searchperience soon. Waiting Waiting for processing The document is marked for processing but still waiting for it to get processed.","title":"Different Document Notifications"},{"location":"cockpit/documents/#document-actions","text":"","title":"Document Actions"},{"location":"cockpit/documents/#hide-a-document","text":"Use this toggle to remove a document from being available in Searchperience Frontend. If the toggle is used, the document will get processed with high priority. In order to remove it as fast as possible from search results. To make the document visible in Searchperience Frontend again, just set the toggle to disabled (grey).","title":"Hide a document"},{"location":"cockpit/documents/#recrawl-reindex","text":"Usually there is no need to ReCrawl or ReIndex one ore more documents. Searchperience is configured to maintain the continuous re-crawling and processing of all documents known in the system. However, if you have a web page that you want to have updated immediately, use Search & Filters to get to the document, activate the checkbox and hit the ReCrawl button.","title":"ReCrawl &amp; ReIndex"},{"location":"cockpit/documents/#view-documents-raw-data","text":"The Cockpit All Documents module also offers the possibility to display the document raw data. To open the detail view of a document just click on the eye icon under the Actions column. The content area shows the document raw data, this can be in various formats like HTML, XML, JSON. The source of the document is the short textual name of the owner/master application managing the specific document type. \u21a9","title":"View documents raw data"},{"location":"cockpit/enrichments/","text":"Business Enrichments \u00b6 The idea behind Business Enrichments is to promote documents that match certain rules and adjust their relevance i.e. change their position in search results. Warning Business Enrichments are a powerful tool for manipulating search results. However, it is possible to get unexpected results in the overall relevance calculation when multiple matching rules match the same set of documents. Info Business Enrichments will only affect product grids and product result pages. Info Business Enrichments will only change the priority of products when the sorting is set to recommended . When to use Business Enrichments : A document or set of documents are missing relevant keywords. A document or set of documents, which have a promotional campaign assigned to them, should be more relevant in the search results. A document or set of documents should appear higher or lower in search results on a specific category. Note Business Enrichments are applied during document processing, meaning that any changes to an Enrichment will trigger a reprocessing. Any documents waiting to be enriched will be marked as waiting and only after the indexing process is done changes will be visible. Enrichments Overview Page \u00b6 Info Enrichments can only be activated when fully configured. To be fully configured an enrichment has to have at least one matching rule and one boosting action. Name Description Title Name of the enrichment, ideally a speaking one. Description [Optional] Should provide more detailed information about which products will match the enrichment. Active Toggle control which enables or disables the enrichment. Actions Edit changes the configuration. Copy re-uses one enrichment to create a new one. Delete erases the enrichment - can not be undone. Actions \u00b6 New \u00b6 Open the new enrichment view to create a new Business Enrichment . Edit \u00b6 The enrichment overview page allows the editing of an existing enrichment. Copy \u00b6 The enrichment overview page allows copying an existing enrichment. Delete \u00b6 The enrichment overview page allows deleting an existing enrichment. Add or edit enrichments \u00b6 Every Business Enrichment has a set of Matching Rules and a set of actions . These actions are only applied to the matching documents. General Settings \u00b6 Name Description Title Name of the enrichment, ideally a speaking one. Description [Optional] Should provide more detailed information about which products will match the enrichment. Active Toggle control which enables or disables the enrichment. Matching Rules \u00b6 Good Practice It is a good practice to always set Matching Rules with the fields Common: Channel , Common: Locale and Index type (like: product or brand) for every enrichment you create. Every Business Enrichment must have a set of Matching Rules defined. The rules determine the scope of the documents to which the actions should be applied to. At the very top of the section one can configure how the Matching Rules interact with each other. One can specify that All , Any or None of the rules should be true . Example The following rule boosts any product with a price lower than 100. Field Value Field Selector: Price Operator: is lower than Input Value: 100 Multi-values In order to include multiple values in the Input Values field, one should use brackets [ ] and any values inside should be separated through commas, e.g. [Nike,Adidas,Puma] . However, this notation cannot be used with every operator, check the Multi-value column in the operators section for more information. Field Selector \u00b6 To grasp the idea behind a Field Selector one should know how a document inside Searchperience looks like. The following table includes a list of all available Field Selector s and a list of the fields that these selectors match inside a document. Field Selector Matching Field in Document Common: Channel channel Common: Foreign Id foreignId Common: Locale locale Index type (like: product or brand) Possible values: product , brand , category , retailer , location , web Product or Category or Retailer: Category Path categoryPaths Product or Category: Category Code categoryCodes Product or Retailer: Retailer Code variants[*].retailerCode Product: Bangle Size Label variants[*].attributes.bangleSize_label Product: Boosted Keywords allBoostKeywords Product: Brand Code variants[*].attributes.brandCode Product: Campaign Codes variants[*].attributes.campaignCodes Product: Clothing Size Label variants[*].attributes.clothingSize_label Product: Color variants[*].attributes.baseColor Product: Duty Free variants[*].attributes.dutyFree Product: Exclusive Product variants[*].attributes.exclusiveProduct Product: Featured variants[*].attributes.featured Product: ISPU Limited to Areas variants[*].attributes.ispuLimitedToAreas Product: Keywords keywords Product: Marketplace Code allMarketplaceCodes Product: Media Reference variants[*].media Product: Price sorting.price Product: Product Family productFamily Product: Product Type productType Product: Retailer Category Codes variants.attributes.retailerCategoryCodes Product: Ring Size Label variants[*].attributes.ringSize_label Product: Shoe Size Label variants[*].attributes.shoeSize_label Product: Special Offer variants[*].attributes.specialOffer Product: Title variants[*].title Product: Topics variants[*].attributes.topics Web: Domain domain Web: Url url Now, let's take a look at the different document types and examine which fields can be used to enrich them. Product Document \u00b6 Variants This product is just an example and it contains just one variant with fields that one would not normally see in a single product e.g. clothingSize & bangleSize { \"categoryPaths\": [ \"Clothing & Accessories/Men's/Tops\" ], \"categoryCodes\": [ \"clothing\", \"clothing_men\" ], \"categoryForeignId\": [ \"clothing-en_GB-master\", \"clothing_men-en_GB-master\" ], \"updatedAt\": \"2040-02-22T06:25:31Z\", \"channel\": \"master\", \"configurableProduct\": { \"internalName\": \"ATS135 Awesome Searchperience Product\", \"title\": \"Awesome Searchperience Product\", \"createdAt\": \"2040-02-22T06:25:31Z\", \"updatedAt\": \"2040-02-22T06:25:31Z\", \"attributes\": { \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"campaignCodes\": [ \"MultibuyTotal_4for45\" ], \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ] } }, \"variantVariationAttributesSorting\": {}, \"productType\": \"configurable\", \"locale\": \"en_GB\", \"foreignId\": \"martRetailer_ATS135-en_GB-master\", \"sorting\": { \"price\": 15, \"sellingCount\": { \"week\": 10, \"month\": 45, \"year\": 123 }, \"viewCount\": { \"week\": 21, \"month\": 91, \"year\": 567 } }, \"variantVariationAttributes\": [ \"manufacturerColor\", \"clothingSize\" ], \"visibilityScope\": [ \"catalog\", \"search\" ], \"isNew\": false, \"createdAt\": \"2018-12-03T08:16:10Z\", \"marketplaceCode\": \"martRetailer_ATS135\", \"allBoostKeywords\" : [ \"awesomeProduct\", \"goodValue\" ], \"keywords\" : [ \"searchperience\", \"product\" ], \"allMarketplaceCodes\" : [ \"martRetailer_ATS135\", \"martRetailer_9417657621822\" ] \"variants\": [ { \"updatedAt\": \"2040-12-11T04:43:46Z\", \"shortTitle\": \"Awesome Searchperience Product Variant\", \"retailerSku\": \"9417657634522\", \"stockLevel\": \"high\", \"internalName\": \"ATS135 Awesome Searchperience Product Variant\", \"retailerCode\": \"martRetailer\", \"attributes\": { \"alwaysInStock\": \"true\", \"bangleSize\": \"small_60mm\", \"bangleSize_label\": \"Small 60mm\", \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"brandType\": \"default\", \"brandName\": \"Hallifax\", \"brandToCodeMapping\": \"Hallifax:hallifax\", \"baseColor\": [ \"black\" ], \"baseColor_label\": \"Black\", \"campaignCodes_codeLabel\": \"Campaign Codes\", \"campaignCodes\": [ \"MultibuyTotal_4for45\", \"allPromotions\" ], \"clothingSize\": \"s\", \"clothingSize_label\": \"S\", \"collectionOption_codeLabel\": \"Collection Option\", \"collectionOption\": [ \"departure\" ], \"collectionOption_label\": \"Departure\", \"dutyFree\": \"false\", \"dutyFree_label\": \"No\", \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ], \"exclusiveProduct\": \"true\", \"exclusiveProduct_label\": \"Yes\", \"featured\": \"false\", \"featured_label\": \"No\", \"manufacturerColor\": \"Black\", \"ispuLimitedToAreas\" : [ \"onairport_t4_departure\", \"onairport_t5_departure_a\" ], \"retailerCategoryCodes\" : [ \"fashion\", \"clothing\" ], \"ringSize\": \"small_size_k\", \"ringSize_label\": \"Small Size K\", \"shoeSize\": \"UK_42\", \"ShoeSize_label\": \"UK 42\", \"specialOffer\" : true, \"topic\" : [ \"xmas\", \"sale\" ] }, \"activePrice\": { \"default\": 15, \"isDiscounted\": false, \"currency\": \"EUR\", \"context\": { \"customerGroup\": \"\", \"channel\": null, \"locale\": \"en_GB\" }, \"denyMoreDiscounts\": true, \"rulesApplied\": [ \"campaign_code\" ] }, \"retailerForeignId\": \"martRetailer-en_GB-master\", \"createdAt\": \"2018-12-03T08:16:10Z\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpeg\", \"usage\": \"detail\", \"title\": \"\", \"reference\": \"8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg\" } ], \"marketplaceCode\": \"martRetailer_9417657621822\", \"retailerName\": \"Mart Retailer\", \"title\": \"Awesome Searchperience Product Variant\", \"boostKeywords\": [ \"awesomeProduct\", \"goodValue\" ], \"saleableFrom\": null, \"saleableTo\": null, \"isSaleable\": true, \"productFamily\": \"happyFamily\" } ] } The following table displays the Field Selector , the corresponding field inside the document and the content of the field that would match. Field Selector Field to Match Field content Common: Channel channel master Common: Foreign Id foreignId retailer_ATS135-en_GB-master Common: Locale locale en_GB Index type one should use product Product or Category or Retailer: Category Path categoryPaths [Clothing & Accessories/Men's/Tops] Product or Category: Category Code categoryCodes [clothing\", \"clothing_men] Product or Retailer: Retailer Code variants[*].retailerCode martRetailer Product: Bangle Size Label variants[*].attributes.bangleSize_label Small 60mm Product: Boosted Keywords allBoostKeywords [awesomeProduct, goodValue] Product: Brand Code variants[*].attributes.brandCode hallifax Product: Campaign Codes variants[*].attributes.campaignCodes [MultibuyTotal_4for45, allPromotions] Product: Clothing Size Label variants[*].attributes.clothingSize_label S Product: Color variants[*].attributes.baseColor [black] Product: Duty Free variants[*].attributes.dutyFree false Product: Exclusive Product variants[*].attributes.exclusiveProduct true Product: Featured variants[*].attributes.featured false Product: ISPU Limited to Areas variants[*].attributes.ispuLimitedToAreas [onairport_t4_departure,onairport_t5_departure_a] Product: Keywords keywords [searchperience,product] Product: Marketplace Code allMarketplaceCodes [martRetailer_ATS135, martRetailer_9417657621822] Product: Media Reference variants[*].media.reference 8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg Product: Price sorting.price 15 Product: Product Family productFamily happyFamily Product: Product Type productType configurable Product: Retailer Category Codes variants[*].attributes.retailerCategoryCodes [fashion,clothing] Product: Ring Size Label variants[*].attributes.ringSize_label Small Size K Product: Shoe Size Label variants[*].attributes.shoeSize_label UK 42 Product: Special Offer variants[*].attributes.specialOffer true Product: Title variants[*].title Awesome Searchperience Product Variant Product: Topics variants[*].attributes.topics [xmas,sale] Brand Document \u00b6 { \"document\": { \"foreignId\": \"bombay-sapphire-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"code\": \"bombay-sapphire\", \"type\": \"featured\", \"title\": \"Bombay Sapphire\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpg\", \"usage\": \"logo\", \"title\": \"Front View\", \"reference\": \"/media/images/89/white.jpg\" } ], \"keywords\": [] }, \"highlights\": {} } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId bombay-sapphire-en_GB-master Common: Locale locale en_GB Index type one should use brand Category Document \u00b6 { \"foreignId\": \"technology_camera_actioncams-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"path\": \"Technology/Camera & Video/Action Cameras\", \"code\": \"technology_camera_actioncams\", \"media\": [], \"label\": \"Action Cameras\", \"isPromoted\": false, \"parentCategoryCode\": \"technology_camera\", \"categoryType\": \"ProductCategory\", \"title\": \"Action Cameras\" } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId technology_camera_actioncams-en_GB-master Common: Locale locale en_GB Index type one should use category Retailer Document \u00b6 { \"foreignId\": \"icebreaker-en_GB-master\", \"code\": \"icebreaker\", \"categoryPaths\": [ \"collection-point\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"title\": \"Icebreaker\", \"terminals\": [ \"I\" ], \"email\": \"icebreaker@online.com\" } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId icebreaker-en_GB-master Common: Locale locale en_GB Index type one should use retailer Location Document \u00b6 { \"code\": \"world-duty-free-t5\", \"brands\": [ \"prada\", \"dolce-and-gabbana\", \"bulgari\", \"cartier\" ], \"channel\": \"master\", \"pickup\": true, \"media\": [ { \"reference\": \"/media/images/7/CHE13789d.jpg\", \"usage\": \"heroImage\", \"mimeType\": \"image/jpg\", \"type\": \"image-api\", \"title\": \"Front View\" } ], \"locale\": \"en_GB\", \"title\": \"World Duty Free, T5, Level 2 / Gate A8\", \"foreignId\": \"world-duty-free-t5-en_GB-master\", \"airportZone\": { \"area\": \"A\", \"level\": 2, \"landside\": false, \"schengen\": false, \"terminal\": \"5\", \"title\": \"T5, Airside, Level , Gates A1 - A23\" }, \"email\": \"om3.sandra.flamingo@gmail.com\" } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId world-duty-free-t5-en_GB-master Common: Locale locale en_GB Index type one should use location Operators \u00b6 An operator controls how the value in the document's field is compared to the Input Value . Input Values Check Field Selector examples above to have an idea how the Input Value should look like. For specific use cases, find an example of the document you want to match. A of how to do this can be found in the Documents section. Operator Description Multi-value matches Case sensitive match of the value in the document and the Input Value . yes contains Case insensitive match, the Input Value is either contained or equal to the value in the document. yes does not equal Case sensitive difference of the value in the document and the Input Value . yes does not contains Case insensitive difference, the Input Value is neither contained nor equal to the value in the document. yes is greater than Numeric comparison between the value in the document and the Input Value . If the value in the document or the Input Value do not contain a numeric value it will be considered as 0 . no is lower than Numeric comparison between the value in the document and the Input Value . If the value in the document or the Input Value do not contain a numeric value it will be considered as 0 . no is empty Check if the document's field is empty or if the field does not exist inside the document. - In Range Of Enrichments do not offer an in range of operator. However, it is possible to replicate this operation by using is greater than and is lower than . For the next example, one should think of a document with the following fields. { \"title\": \"Cool clothing piece\", \"categoryCodes\": [ \"men\", \"women\", \"kids\" ], \"isExclusive\" : true, \"price\" : 89.99, \"ringSize\": \"62 mm\", \"media\" : [] } The following table gives an overview of how matching works between different field names, operators, and input values. Field Name Operator Input Value Matches title matches Cool clothing piece Yes title matches cool clothing piece No title matches [Cool clothing piece] Yes title contains clothing Yes title contains Clothing Yes title contains [Clothing] Yes categoryCodes matches men Yes categoryCodes matches Men No categoryCodes matches [men] Yes categoryCodes matches [boys,men] Yes categoryCodes contains kid Yes categoryCodes contains [kid] Yes categoryCodes contains [baby,kid] Yes isExclusive matches true Yes isExclusive matches True No price matches 89.99 Yes price lower than men No price lower than 100 Yes price lower than [100] Yes ringSize lower than 100 Yes price higher than men No price higher than 80 Yes price higher than [80,90] No ringSize higher than 50 Yes title is empty - No media is empty - Yes retailer is empty - Yes Actions \u00b6 Global Boost Factor \u00b6 By changing the boost factor, it is possible to influence the ranking score of documents. The default value of 100% (1.0) suggest no change in the ranking score and therefore it is not considered as a configuration. Example A boost factor of 300% (3.0) means the ranking score will be increased by 200%. A boost factor of 25% (0.25) means the ranking score will be reduced by 75%. Enrich with Keywords \u00b6 By enriching any matching documents with specific keywords, the ranking of the documents will be increased when a user searches for the same keywords. One can differentiate between 3 groups of keywords: low boosted: + 25% boosting normal boosted: + 50% boosting high boosted: + 100% boosting Context Boosting \u00b6 Context Boosting increases product's relevance based on a specific context, i.e. a category or brand page. Note When using Context Boosting you need to reference a specific category or brand through their foreign Ids. Use categoryForeignId 1 for categories and brandForeignId 2 for brands. Note It is not necessary to set the Global Boost Factor when using Context Boosting. Context Boosting should be used when applying enrichments to an specific context. Due to technical constraints, using multiple \"normal\" enrichments on different sub-categories delivers unexpected results. Example \u00b6 To get a better idea about the differences between Global Boost Factor and Context Boosting , check the following example: Boost any Nike products with the filter \"Product or Brand : Brand Code\" - \"matches\" - \"Nike\" when the user is in the \"men_shoes-en_GB-master\" category. Example 1) Enrichment with Global Boost Factor Matching rule Index type is product Locale is en_GB Price lower than 100 Brand is Nike Actions Global Boost Factor is 400% Example 2) Enrichment with Context Boosting Matching rule Index type is product Locale is en_GB Price lower than 100 Brand is Nike Actions Context Boosting Category is men_shoes-en_GB-master 1 Boost Factor is 400 % How would these two enrichments behave? The first enrichment will boost any products with a price lower than 100 by 400%. In other words: When one finds a product cheaper than 100, the product is placed much higher in the search results. The second enrichment will also boost any products by \"nike\" with a price lower than 100 by 400%. However, this only happens when the user is inside the category page with the foreign Id \"men_shoes-en_GB-master\" . A category foreign Id is built from category code , locale and channel connected together with a - sign. E.g. category_code-en_GB-master . \u21a9 \u21a9 A brand foreign Id is built from brand code , locale and channel connected together with a - sign. E.g. brand_code-en_GB-master . \u21a9","title":"Business Enrichments"},{"location":"cockpit/enrichments/#business-enrichments","text":"The idea behind Business Enrichments is to promote documents that match certain rules and adjust their relevance i.e. change their position in search results. Warning Business Enrichments are a powerful tool for manipulating search results. However, it is possible to get unexpected results in the overall relevance calculation when multiple matching rules match the same set of documents. Info Business Enrichments will only affect product grids and product result pages. Info Business Enrichments will only change the priority of products when the sorting is set to recommended . When to use Business Enrichments : A document or set of documents are missing relevant keywords. A document or set of documents, which have a promotional campaign assigned to them, should be more relevant in the search results. A document or set of documents should appear higher or lower in search results on a specific category. Note Business Enrichments are applied during document processing, meaning that any changes to an Enrichment will trigger a reprocessing. Any documents waiting to be enriched will be marked as waiting and only after the indexing process is done changes will be visible.","title":"Business Enrichments"},{"location":"cockpit/enrichments/#enrichments-overview-page","text":"Info Enrichments can only be activated when fully configured. To be fully configured an enrichment has to have at least one matching rule and one boosting action. Name Description Title Name of the enrichment, ideally a speaking one. Description [Optional] Should provide more detailed information about which products will match the enrichment. Active Toggle control which enables or disables the enrichment. Actions Edit changes the configuration. Copy re-uses one enrichment to create a new one. Delete erases the enrichment - can not be undone.","title":"Enrichments Overview Page"},{"location":"cockpit/enrichments/#actions","text":"","title":"Actions"},{"location":"cockpit/enrichments/#new","text":"Open the new enrichment view to create a new Business Enrichment .","title":"New"},{"location":"cockpit/enrichments/#edit","text":"The enrichment overview page allows the editing of an existing enrichment.","title":"Edit"},{"location":"cockpit/enrichments/#copy","text":"The enrichment overview page allows copying an existing enrichment.","title":"Copy"},{"location":"cockpit/enrichments/#delete","text":"The enrichment overview page allows deleting an existing enrichment.","title":"Delete"},{"location":"cockpit/enrichments/#add-or-edit-enrichments","text":"Every Business Enrichment has a set of Matching Rules and a set of actions . These actions are only applied to the matching documents.","title":"Add or edit enrichments"},{"location":"cockpit/enrichments/#general-settings","text":"Name Description Title Name of the enrichment, ideally a speaking one. Description [Optional] Should provide more detailed information about which products will match the enrichment. Active Toggle control which enables or disables the enrichment.","title":"General Settings"},{"location":"cockpit/enrichments/#matching-rules","text":"Good Practice It is a good practice to always set Matching Rules with the fields Common: Channel , Common: Locale and Index type (like: product or brand) for every enrichment you create. Every Business Enrichment must have a set of Matching Rules defined. The rules determine the scope of the documents to which the actions should be applied to. At the very top of the section one can configure how the Matching Rules interact with each other. One can specify that All , Any or None of the rules should be true . Example The following rule boosts any product with a price lower than 100. Field Value Field Selector: Price Operator: is lower than Input Value: 100 Multi-values In order to include multiple values in the Input Values field, one should use brackets [ ] and any values inside should be separated through commas, e.g. [Nike,Adidas,Puma] . However, this notation cannot be used with every operator, check the Multi-value column in the operators section for more information.","title":"Matching Rules"},{"location":"cockpit/enrichments/#field-selector","text":"To grasp the idea behind a Field Selector one should know how a document inside Searchperience looks like. The following table includes a list of all available Field Selector s and a list of the fields that these selectors match inside a document. Field Selector Matching Field in Document Common: Channel channel Common: Foreign Id foreignId Common: Locale locale Index type (like: product or brand) Possible values: product , brand , category , retailer , location , web Product or Category or Retailer: Category Path categoryPaths Product or Category: Category Code categoryCodes Product or Retailer: Retailer Code variants[*].retailerCode Product: Bangle Size Label variants[*].attributes.bangleSize_label Product: Boosted Keywords allBoostKeywords Product: Brand Code variants[*].attributes.brandCode Product: Campaign Codes variants[*].attributes.campaignCodes Product: Clothing Size Label variants[*].attributes.clothingSize_label Product: Color variants[*].attributes.baseColor Product: Duty Free variants[*].attributes.dutyFree Product: Exclusive Product variants[*].attributes.exclusiveProduct Product: Featured variants[*].attributes.featured Product: ISPU Limited to Areas variants[*].attributes.ispuLimitedToAreas Product: Keywords keywords Product: Marketplace Code allMarketplaceCodes Product: Media Reference variants[*].media Product: Price sorting.price Product: Product Family productFamily Product: Product Type productType Product: Retailer Category Codes variants.attributes.retailerCategoryCodes Product: Ring Size Label variants[*].attributes.ringSize_label Product: Shoe Size Label variants[*].attributes.shoeSize_label Product: Special Offer variants[*].attributes.specialOffer Product: Title variants[*].title Product: Topics variants[*].attributes.topics Web: Domain domain Web: Url url Now, let's take a look at the different document types and examine which fields can be used to enrich them.","title":"Field Selector"},{"location":"cockpit/enrichments/#product-document","text":"Variants This product is just an example and it contains just one variant with fields that one would not normally see in a single product e.g. clothingSize & bangleSize { \"categoryPaths\": [ \"Clothing & Accessories/Men's/Tops\" ], \"categoryCodes\": [ \"clothing\", \"clothing_men\" ], \"categoryForeignId\": [ \"clothing-en_GB-master\", \"clothing_men-en_GB-master\" ], \"updatedAt\": \"2040-02-22T06:25:31Z\", \"channel\": \"master\", \"configurableProduct\": { \"internalName\": \"ATS135 Awesome Searchperience Product\", \"title\": \"Awesome Searchperience Product\", \"createdAt\": \"2040-02-22T06:25:31Z\", \"updatedAt\": \"2040-02-22T06:25:31Z\", \"attributes\": { \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"campaignCodes\": [ \"MultibuyTotal_4for45\" ], \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ] } }, \"variantVariationAttributesSorting\": {}, \"productType\": \"configurable\", \"locale\": \"en_GB\", \"foreignId\": \"martRetailer_ATS135-en_GB-master\", \"sorting\": { \"price\": 15, \"sellingCount\": { \"week\": 10, \"month\": 45, \"year\": 123 }, \"viewCount\": { \"week\": 21, \"month\": 91, \"year\": 567 } }, \"variantVariationAttributes\": [ \"manufacturerColor\", \"clothingSize\" ], \"visibilityScope\": [ \"catalog\", \"search\" ], \"isNew\": false, \"createdAt\": \"2018-12-03T08:16:10Z\", \"marketplaceCode\": \"martRetailer_ATS135\", \"allBoostKeywords\" : [ \"awesomeProduct\", \"goodValue\" ], \"keywords\" : [ \"searchperience\", \"product\" ], \"allMarketplaceCodes\" : [ \"martRetailer_ATS135\", \"martRetailer_9417657621822\" ] \"variants\": [ { \"updatedAt\": \"2040-12-11T04:43:46Z\", \"shortTitle\": \"Awesome Searchperience Product Variant\", \"retailerSku\": \"9417657634522\", \"stockLevel\": \"high\", \"internalName\": \"ATS135 Awesome Searchperience Product Variant\", \"retailerCode\": \"martRetailer\", \"attributes\": { \"alwaysInStock\": \"true\", \"bangleSize\": \"small_60mm\", \"bangleSize_label\": \"Small 60mm\", \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"brandType\": \"default\", \"brandName\": \"Hallifax\", \"brandToCodeMapping\": \"Hallifax:hallifax\", \"baseColor\": [ \"black\" ], \"baseColor_label\": \"Black\", \"campaignCodes_codeLabel\": \"Campaign Codes\", \"campaignCodes\": [ \"MultibuyTotal_4for45\", \"allPromotions\" ], \"clothingSize\": \"s\", \"clothingSize_label\": \"S\", \"collectionOption_codeLabel\": \"Collection Option\", \"collectionOption\": [ \"departure\" ], \"collectionOption_label\": \"Departure\", \"dutyFree\": \"false\", \"dutyFree_label\": \"No\", \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ], \"exclusiveProduct\": \"true\", \"exclusiveProduct_label\": \"Yes\", \"featured\": \"false\", \"featured_label\": \"No\", \"manufacturerColor\": \"Black\", \"ispuLimitedToAreas\" : [ \"onairport_t4_departure\", \"onairport_t5_departure_a\" ], \"retailerCategoryCodes\" : [ \"fashion\", \"clothing\" ], \"ringSize\": \"small_size_k\", \"ringSize_label\": \"Small Size K\", \"shoeSize\": \"UK_42\", \"ShoeSize_label\": \"UK 42\", \"specialOffer\" : true, \"topic\" : [ \"xmas\", \"sale\" ] }, \"activePrice\": { \"default\": 15, \"isDiscounted\": false, \"currency\": \"EUR\", \"context\": { \"customerGroup\": \"\", \"channel\": null, \"locale\": \"en_GB\" }, \"denyMoreDiscounts\": true, \"rulesApplied\": [ \"campaign_code\" ] }, \"retailerForeignId\": \"martRetailer-en_GB-master\", \"createdAt\": \"2018-12-03T08:16:10Z\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpeg\", \"usage\": \"detail\", \"title\": \"\", \"reference\": \"8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg\" } ], \"marketplaceCode\": \"martRetailer_9417657621822\", \"retailerName\": \"Mart Retailer\", \"title\": \"Awesome Searchperience Product Variant\", \"boostKeywords\": [ \"awesomeProduct\", \"goodValue\" ], \"saleableFrom\": null, \"saleableTo\": null, \"isSaleable\": true, \"productFamily\": \"happyFamily\" } ] } The following table displays the Field Selector , the corresponding field inside the document and the content of the field that would match. Field Selector Field to Match Field content Common: Channel channel master Common: Foreign Id foreignId retailer_ATS135-en_GB-master Common: Locale locale en_GB Index type one should use product Product or Category or Retailer: Category Path categoryPaths [Clothing & Accessories/Men's/Tops] Product or Category: Category Code categoryCodes [clothing\", \"clothing_men] Product or Retailer: Retailer Code variants[*].retailerCode martRetailer Product: Bangle Size Label variants[*].attributes.bangleSize_label Small 60mm Product: Boosted Keywords allBoostKeywords [awesomeProduct, goodValue] Product: Brand Code variants[*].attributes.brandCode hallifax Product: Campaign Codes variants[*].attributes.campaignCodes [MultibuyTotal_4for45, allPromotions] Product: Clothing Size Label variants[*].attributes.clothingSize_label S Product: Color variants[*].attributes.baseColor [black] Product: Duty Free variants[*].attributes.dutyFree false Product: Exclusive Product variants[*].attributes.exclusiveProduct true Product: Featured variants[*].attributes.featured false Product: ISPU Limited to Areas variants[*].attributes.ispuLimitedToAreas [onairport_t4_departure,onairport_t5_departure_a] Product: Keywords keywords [searchperience,product] Product: Marketplace Code allMarketplaceCodes [martRetailer_ATS135, martRetailer_9417657621822] Product: Media Reference variants[*].media.reference 8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg Product: Price sorting.price 15 Product: Product Family productFamily happyFamily Product: Product Type productType configurable Product: Retailer Category Codes variants[*].attributes.retailerCategoryCodes [fashion,clothing] Product: Ring Size Label variants[*].attributes.ringSize_label Small Size K Product: Shoe Size Label variants[*].attributes.shoeSize_label UK 42 Product: Special Offer variants[*].attributes.specialOffer true Product: Title variants[*].title Awesome Searchperience Product Variant Product: Topics variants[*].attributes.topics [xmas,sale]","title":"Product Document"},{"location":"cockpit/enrichments/#brand-document","text":"{ \"document\": { \"foreignId\": \"bombay-sapphire-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"code\": \"bombay-sapphire\", \"type\": \"featured\", \"title\": \"Bombay Sapphire\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpg\", \"usage\": \"logo\", \"title\": \"Front View\", \"reference\": \"/media/images/89/white.jpg\" } ], \"keywords\": [] }, \"highlights\": {} } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId bombay-sapphire-en_GB-master Common: Locale locale en_GB Index type one should use brand","title":"Brand Document"},{"location":"cockpit/enrichments/#category-document","text":"{ \"foreignId\": \"technology_camera_actioncams-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"path\": \"Technology/Camera & Video/Action Cameras\", \"code\": \"technology_camera_actioncams\", \"media\": [], \"label\": \"Action Cameras\", \"isPromoted\": false, \"parentCategoryCode\": \"technology_camera\", \"categoryType\": \"ProductCategory\", \"title\": \"Action Cameras\" } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId technology_camera_actioncams-en_GB-master Common: Locale locale en_GB Index type one should use category","title":"Category Document"},{"location":"cockpit/enrichments/#retailer-document","text":"{ \"foreignId\": \"icebreaker-en_GB-master\", \"code\": \"icebreaker\", \"categoryPaths\": [ \"collection-point\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"title\": \"Icebreaker\", \"terminals\": [ \"I\" ], \"email\": \"icebreaker@online.com\" } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId icebreaker-en_GB-master Common: Locale locale en_GB Index type one should use retailer","title":"Retailer Document"},{"location":"cockpit/enrichments/#location-document","text":"{ \"code\": \"world-duty-free-t5\", \"brands\": [ \"prada\", \"dolce-and-gabbana\", \"bulgari\", \"cartier\" ], \"channel\": \"master\", \"pickup\": true, \"media\": [ { \"reference\": \"/media/images/7/CHE13789d.jpg\", \"usage\": \"heroImage\", \"mimeType\": \"image/jpg\", \"type\": \"image-api\", \"title\": \"Front View\" } ], \"locale\": \"en_GB\", \"title\": \"World Duty Free, T5, Level 2 / Gate A8\", \"foreignId\": \"world-duty-free-t5-en_GB-master\", \"airportZone\": { \"area\": \"A\", \"level\": 2, \"landside\": false, \"schengen\": false, \"terminal\": \"5\", \"title\": \"T5, Airside, Level , Gates A1 - A23\" }, \"email\": \"om3.sandra.flamingo@gmail.com\" } Field Selector Field to Match Result Common: Channel channel master Common: Foreign Id foreignId world-duty-free-t5-en_GB-master Common: Locale locale en_GB Index type one should use location","title":"Location Document"},{"location":"cockpit/enrichments/#operators","text":"An operator controls how the value in the document's field is compared to the Input Value . Input Values Check Field Selector examples above to have an idea how the Input Value should look like. For specific use cases, find an example of the document you want to match. A of how to do this can be found in the Documents section. Operator Description Multi-value matches Case sensitive match of the value in the document and the Input Value . yes contains Case insensitive match, the Input Value is either contained or equal to the value in the document. yes does not equal Case sensitive difference of the value in the document and the Input Value . yes does not contains Case insensitive difference, the Input Value is neither contained nor equal to the value in the document. yes is greater than Numeric comparison between the value in the document and the Input Value . If the value in the document or the Input Value do not contain a numeric value it will be considered as 0 . no is lower than Numeric comparison between the value in the document and the Input Value . If the value in the document or the Input Value do not contain a numeric value it will be considered as 0 . no is empty Check if the document's field is empty or if the field does not exist inside the document. - In Range Of Enrichments do not offer an in range of operator. However, it is possible to replicate this operation by using is greater than and is lower than . For the next example, one should think of a document with the following fields. { \"title\": \"Cool clothing piece\", \"categoryCodes\": [ \"men\", \"women\", \"kids\" ], \"isExclusive\" : true, \"price\" : 89.99, \"ringSize\": \"62 mm\", \"media\" : [] } The following table gives an overview of how matching works between different field names, operators, and input values. Field Name Operator Input Value Matches title matches Cool clothing piece Yes title matches cool clothing piece No title matches [Cool clothing piece] Yes title contains clothing Yes title contains Clothing Yes title contains [Clothing] Yes categoryCodes matches men Yes categoryCodes matches Men No categoryCodes matches [men] Yes categoryCodes matches [boys,men] Yes categoryCodes contains kid Yes categoryCodes contains [kid] Yes categoryCodes contains [baby,kid] Yes isExclusive matches true Yes isExclusive matches True No price matches 89.99 Yes price lower than men No price lower than 100 Yes price lower than [100] Yes ringSize lower than 100 Yes price higher than men No price higher than 80 Yes price higher than [80,90] No ringSize higher than 50 Yes title is empty - No media is empty - Yes retailer is empty - Yes","title":"Operators"},{"location":"cockpit/enrichments/#actions_1","text":"","title":"Actions"},{"location":"cockpit/enrichments/#global-boost-factor","text":"By changing the boost factor, it is possible to influence the ranking score of documents. The default value of 100% (1.0) suggest no change in the ranking score and therefore it is not considered as a configuration. Example A boost factor of 300% (3.0) means the ranking score will be increased by 200%. A boost factor of 25% (0.25) means the ranking score will be reduced by 75%.","title":"Global Boost Factor"},{"location":"cockpit/enrichments/#enrich-with-keywords","text":"By enriching any matching documents with specific keywords, the ranking of the documents will be increased when a user searches for the same keywords. One can differentiate between 3 groups of keywords: low boosted: + 25% boosting normal boosted: + 50% boosting high boosted: + 100% boosting","title":"Enrich with Keywords"},{"location":"cockpit/enrichments/#context-boosting","text":"Context Boosting increases product's relevance based on a specific context, i.e. a category or brand page. Note When using Context Boosting you need to reference a specific category or brand through their foreign Ids. Use categoryForeignId 1 for categories and brandForeignId 2 for brands. Note It is not necessary to set the Global Boost Factor when using Context Boosting. Context Boosting should be used when applying enrichments to an specific context. Due to technical constraints, using multiple \"normal\" enrichments on different sub-categories delivers unexpected results.","title":"Context Boosting"},{"location":"cockpit/enrichments/#example","text":"To get a better idea about the differences between Global Boost Factor and Context Boosting , check the following example: Boost any Nike products with the filter \"Product or Brand : Brand Code\" - \"matches\" - \"Nike\" when the user is in the \"men_shoes-en_GB-master\" category. Example 1) Enrichment with Global Boost Factor Matching rule Index type is product Locale is en_GB Price lower than 100 Brand is Nike Actions Global Boost Factor is 400% Example 2) Enrichment with Context Boosting Matching rule Index type is product Locale is en_GB Price lower than 100 Brand is Nike Actions Context Boosting Category is men_shoes-en_GB-master 1 Boost Factor is 400 % How would these two enrichments behave? The first enrichment will boost any products with a price lower than 100 by 400%. In other words: When one finds a product cheaper than 100, the product is placed much higher in the search results. The second enrichment will also boost any products by \"nike\" with a price lower than 100 by 400%. However, this only happens when the user is inside the category page with the foreign Id \"men_shoes-en_GB-master\" . A category foreign Id is built from category code , locale and channel connected together with a - sign. E.g. category_code-en_GB-master . \u21a9 \u21a9 A brand foreign Id is built from brand code , locale and channel connected together with a - sign. E.g. brand_code-en_GB-master . \u21a9","title":"Example"},{"location":"cockpit/promotions/","text":"Promotions \u00b6 Promotions allow to create predefined search results that are attached to one or a set of search terms. Promotions are a special type of search results and have their own field in the search response. Promotions can be used to point users to campaigns, informational information or external web pages. When are promotions shown? \u00b6 Promotions are shown when the search term (via a search query) or a matching path (via a search facet) matches the user's search criteria. Promotions Overview \u00b6 Name Description Title Title of the promotion. Search Terms [Optional] Search terms for which the promotion will appear. Target URL Link where the promotion leads to. Active Toggle to enable or disable the promotion. Actions Edit to change the configuration. Copy to re-use one promotion to create a new one. Delete to erase the promotion. It can not be undone. Add a new Promotion \u00b6 A new promotion can be added by using the top right button . Afterwards, a form will appear allowing to configure a new promotion. General Settings \u00b6 Name Description Title Title of the promotion. Target URL Link where the promotion leads to. Language Language the promotion should match with. Active Toggle to enable or disable the promotion. Triggering Configuration \u00b6 You can define here when and where the promotion should be displayed: Name Description Search Terms Search terms for which the promotion will appear. Matching Paths Paths e.g. category, brand names for which the promotion shall appear. Limited Time Time period in which a promotion should appear in. It is possible to prepare promotions in advance so that they appear at a later date. To accomplish this the from and until values need to be filled with a future date/time range. You must define at least one search term or a matching path. You can also use both at the same time, in that case the promotion will only be found if both of those criteria match. In the above screen the promotion will appear only if the user uses one of the search terms watches , luxury AND selects the option Rolex in the brand facet. Promotion Content \u00b6 Here it is possible to configure the text and image shown to the user. Text can be edited through the text editor, which supports basic styling and adding links.","title":"Promotions"},{"location":"cockpit/promotions/#promotions","text":"Promotions allow to create predefined search results that are attached to one or a set of search terms. Promotions are a special type of search results and have their own field in the search response. Promotions can be used to point users to campaigns, informational information or external web pages.","title":"Promotions"},{"location":"cockpit/promotions/#when-are-promotions-shown","text":"Promotions are shown when the search term (via a search query) or a matching path (via a search facet) matches the user's search criteria.","title":"When are promotions shown?"},{"location":"cockpit/promotions/#promotions-overview","text":"Name Description Title Title of the promotion. Search Terms [Optional] Search terms for which the promotion will appear. Target URL Link where the promotion leads to. Active Toggle to enable or disable the promotion. Actions Edit to change the configuration. Copy to re-use one promotion to create a new one. Delete to erase the promotion. It can not be undone.","title":"Promotions Overview"},{"location":"cockpit/promotions/#add-a-new-promotion","text":"A new promotion can be added by using the top right button . Afterwards, a form will appear allowing to configure a new promotion.","title":"Add a new Promotion"},{"location":"cockpit/promotions/#general-settings","text":"Name Description Title Title of the promotion. Target URL Link where the promotion leads to. Language Language the promotion should match with. Active Toggle to enable or disable the promotion.","title":"General Settings"},{"location":"cockpit/promotions/#triggering-configuration","text":"You can define here when and where the promotion should be displayed: Name Description Search Terms Search terms for which the promotion will appear. Matching Paths Paths e.g. category, brand names for which the promotion shall appear. Limited Time Time period in which a promotion should appear in. It is possible to prepare promotions in advance so that they appear at a later date. To accomplish this the from and until values need to be filled with a future date/time range. You must define at least one search term or a matching path. You can also use both at the same time, in that case the promotion will only be found if both of those criteria match. In the above screen the promotion will appear only if the user uses one of the search terms watches , luxury AND selects the option Rolex in the brand facet.","title":"Triggering Configuration"},{"location":"cockpit/promotions/#promotion-content","text":"Here it is possible to configure the text and image shown to the user. Text can be edited through the text editor, which supports basic styling and adding links.","title":"Promotion Content"},{"location":"cockpit/stopwords/","text":"Custom Stopwords Module \u00b6 The custom stopwords module provides an easy way to manage custom stopwords within Searchperience. Stopwords are considered while performing a search query 1 using the search page. Stopwords are not considered when serving widgets or any non-search related endpoint in Frontend . The columns \u00b6 Name Description Stopword Name of the stopword. Language Stopword's language. Active Toggle to enable or disable the record. Actions Edit to change the configuration. Delete one record. Add a new Stopword \u00b6 New stopwords are added using the top right button which leads to the following form to configure a new stopword . More information about search queries on Wikipedia \u21a9","title":"Stopwords"},{"location":"cockpit/stopwords/#custom-stopwords-module","text":"The custom stopwords module provides an easy way to manage custom stopwords within Searchperience. Stopwords are considered while performing a search query 1 using the search page. Stopwords are not considered when serving widgets or any non-search related endpoint in Frontend .","title":"Custom Stopwords Module"},{"location":"cockpit/stopwords/#the-columns","text":"Name Description Stopword Name of the stopword. Language Stopword's language. Active Toggle to enable or disable the record. Actions Edit to change the configuration. Delete one record.","title":"The columns"},{"location":"cockpit/stopwords/#add-a-new-stopword","text":"New stopwords are added using the top right button which leads to the following form to configure a new stopword . More information about search queries on Wikipedia \u21a9","title":"Add a new Stopword"},{"location":"cockpit/synonyms/","text":"Synonyms \u00b6 Synonyms provide an easy way to manage synonyms within Searchperience. Use Case When a user searches for \u201cthe US\u201d, he expects to find documents that contain United States, USA, U.S.A., America. The columns \u00b6 Name Description Synonyms List of configured synonyms . Mapped Words List of words the synonyms get mapped into. Language The language. Matching Type Can be of type Grouping Mapping Active Toggle to enable or disable the record. Actions Edit to change the configuration. Delete one record. Note Synonyms and Mapped Words are case insensitive. Add or edit a Synonym \u00b6 Grouping \u00b6 The option Grouping of synonyms is used to define a list of words where Searchperience will search for as soon as one of the words out of the list is entered into the search. This means when a user is searching for Baggage internally Searchperience is searching for both words Baggage and Luggage to find matching documents . Mapping \u00b6 The option Mapping defines in the following example that on the search terms bosss , bos , etc. Searchperience will use BOSS to find the matching documents that should be returned to the user.","title":"Synonyms"},{"location":"cockpit/synonyms/#synonyms","text":"Synonyms provide an easy way to manage synonyms within Searchperience. Use Case When a user searches for \u201cthe US\u201d, he expects to find documents that contain United States, USA, U.S.A., America.","title":"Synonyms"},{"location":"cockpit/synonyms/#the-columns","text":"Name Description Synonyms List of configured synonyms . Mapped Words List of words the synonyms get mapped into. Language The language. Matching Type Can be of type Grouping Mapping Active Toggle to enable or disable the record. Actions Edit to change the configuration. Delete one record. Note Synonyms and Mapped Words are case insensitive.","title":"The columns"},{"location":"cockpit/synonyms/#add-or-edit-a-synonym","text":"","title":"Add or edit a Synonym"},{"location":"cockpit/synonyms/#grouping","text":"The option Grouping of synonyms is used to define a list of words where Searchperience will search for as soon as one of the words out of the list is entered into the search. This means when a user is searching for Baggage internally Searchperience is searching for both words Baggage and Luggage to find matching documents .","title":"Grouping"},{"location":"cockpit/synonyms/#mapping","text":"The option Mapping defines in the following example that on the search terms bosss , bos , etc. Searchperience will use BOSS to find the matching documents that should be returned to the user.","title":"Mapping"},{"location":"cockpit/user-administration/","text":"User Administration \u00b6 Note Not all users will have access to the User Administration module. Search \u00b6 The simple search available within the User Administration gives you the option to search for users by Username . The Columns \u00b6 Name Description Username The unique name used to login to the Searchperience Cockpit. Name The real name of the user. E-Mail The E-Mail address of the user. Access Rights Usually set to custom which means that the user got individual rights assigned. Actions There is the option to access the edit mode to adjust the information and permissions of a user. Deletion of a single user. Available Actions \u00b6 Add New User \u00b6 In the top right of the module there is the + New User button that will open the new user page where all the details can be entered. The first section User Settings is used to add the users basic information. The second section Access Rights is the possible modules that can be assigned to a users. Bulk Actions \u00b6 The list view of the User Administration offers some bulk actions to that can be applied to any user in the list shown by selecting them via the checkbox. Warning It is also possible to select the own user and apply any action on it, this may result to a self delete/de-activate. Name Description Activate selected Activates one or more users that are set to disabled at once. Disable selected Disables one or more active users at once. Delete selected Deletes one or more users at once (they cannot be restored). Access Rights \u00b6 The section Access Rights defines all available modules to the user. Note Any user must have access to the Dashboard , otherwise access is denied after login. Category Module Name Short Description Dashboard Dashboard Module shown right after login, provides quick overview and access to relevant modules. Search Preview Search Module to test a search. Indexing All Documents Module to provide an overview about the known documents within Searchperience and their state. Indexing Crawler Module to provide an overview about the URL queue (the documents that will be created from web page crawling). Marketing Business Enrichments Module to manage enrichments. Marketing Promotions Module to manage promotions. Marketing Widgets Module to manage widgets . Search Intelligence Stopwords Module to manage stopwords . Search Intelligence Synonyms Module to manage synonyms . Admin Tools Users Module for Cockpit user administration. Admin Tools Eventlog Module where the event log is shown. Admin Tools Indexer Module to interact with the Searchperience Indexer. Analytics Analytics Module for analytics.","title":"User Administration"},{"location":"cockpit/user-administration/#user-administration","text":"Note Not all users will have access to the User Administration module.","title":"User Administration"},{"location":"cockpit/user-administration/#search","text":"The simple search available within the User Administration gives you the option to search for users by Username .","title":"Search"},{"location":"cockpit/user-administration/#the-columns","text":"Name Description Username The unique name used to login to the Searchperience Cockpit. Name The real name of the user. E-Mail The E-Mail address of the user. Access Rights Usually set to custom which means that the user got individual rights assigned. Actions There is the option to access the edit mode to adjust the information and permissions of a user. Deletion of a single user.","title":"The Columns"},{"location":"cockpit/user-administration/#available-actions","text":"","title":"Available Actions"},{"location":"cockpit/user-administration/#add-new-user","text":"In the top right of the module there is the + New User button that will open the new user page where all the details can be entered. The first section User Settings is used to add the users basic information. The second section Access Rights is the possible modules that can be assigned to a users.","title":"Add New User"},{"location":"cockpit/user-administration/#bulk-actions","text":"The list view of the User Administration offers some bulk actions to that can be applied to any user in the list shown by selecting them via the checkbox. Warning It is also possible to select the own user and apply any action on it, this may result to a self delete/de-activate. Name Description Activate selected Activates one or more users that are set to disabled at once. Disable selected Disables one or more active users at once. Delete selected Deletes one or more users at once (they cannot be restored).","title":"Bulk Actions"},{"location":"cockpit/user-administration/#access-rights","text":"The section Access Rights defines all available modules to the user. Note Any user must have access to the Dashboard , otherwise access is denied after login. Category Module Name Short Description Dashboard Dashboard Module shown right after login, provides quick overview and access to relevant modules. Search Preview Search Module to test a search. Indexing All Documents Module to provide an overview about the known documents within Searchperience and their state. Indexing Crawler Module to provide an overview about the URL queue (the documents that will be created from web page crawling). Marketing Business Enrichments Module to manage enrichments. Marketing Promotions Module to manage promotions. Marketing Widgets Module to manage widgets . Search Intelligence Stopwords Module to manage stopwords . Search Intelligence Synonyms Module to manage synonyms . Admin Tools Users Module for Cockpit user administration. Admin Tools Eventlog Module where the event log is shown. Admin Tools Indexer Module to interact with the Searchperience Indexer. Analytics Analytics Module for analytics.","title":"Access Rights"},{"location":"cockpit/widgets/","text":"Widgets \u00b6 The idea behind Widgets is to return a filtered set of documents which can be used in different scenarios. When to use Widgets : To obtain data from Searchperience from a custom JavaScript Application. To create a teaser component on your web site, the teaser can include items like \"Most Sold Products\", \"Similar Products\", and more. Widgets Overview \u00b6 Add or edit a Widget \u00b6 Log into Searchperience Cockpit Under Marketing , select Widgets to see a list of all available Widgets. Create a new widget ( + New Widget ) or edit an existing one (click on the pen under Actions ). Note When updating an existing Widget it might occur that data matching your old configuration gets returned right after saving. Wait 10 seconds and then reload the preview page again. General Settings \u00b6 Set the Alias , Title and Type of the widget, and activate it (once it's ready). At the moment, possible options for Type include: Type Description Sorted Filter The results of this widget will be sorted based on the option selected in Sort by . Item Recommendation The results of this widget come from the Searchperience Recommender, the widget will require a item foreignId for every request and return similar items. User Recommendation The results of this widget come from the Searchperience Recommender, the widget will require a userId for every request and return a set of items that this user may like. More like This Recommendation The results of this widget are a set of similar items as computed by the search engine. This similarity differs from the recommendation one in that it is computed based on the content of the document's fields and not on user interactions as computed by the Searchperience Recommender. Feed Widget Returns a shorter syntax than the normal widgets. User Profile Check the personalised widgets section for more info. Keep in mind that independently of the widget's Type any configured filters will adjust the results. Sorting & Filter \u00b6 Sorting \u00b6 Sort by allows to configure how the widget's results should be sorted. Sorting options: Selling and View counts Data for these metrics is collected by the Searchperience Tracker and calculated inside Searchperience. Name Description Relevance Sort by relevance score (document's relevance is calculated per request, based on the filters provided). Latest Sort by newest documents (The meaning of \"newest\" is configurable). Product Price Sort by product's price. Random Random sorting. Selling count per week Sort by the number of times a product was sold in the last 7 days. Selling count per month Sort by the number of times a product was sold in the last 28 days. Selling count per year Sort by the number of times a product was sold in the last 365 days. View count per week Sort by the number of times a product was clicked in the last 7 days. View count per month Sort by the number of times a product was clicked in the last 28 days View count per year Sort by the number of times a product was clicked in the last 368 days. Title ASC Sort by the product's title in ascending order. Filter Value Sort by the values in a specific filter. After selecting this option, a info message will indicate which filters can be used for sorting. Filters \u00b6 Additionally, one or more filters can be added to a widget. Filters affect which documents are part of the results. Filters can be: Name Description Filtering Documents that match this filter will be in the results set. Excluding Documents that match this filter will not be in the result set. Boosting Documents that match this filter will be boosted so they appear closer to the top. Sensible values are between 0 and 10, decimal values are allowed. Any value above 1 will improve the relevance of matched documents, values between 0 and 1 will lower the relevance of matched documents. Negative values are not supported. Filters consist of these fields: Good Practice It is a good practice to always set filters with the fields Common: Channel , Common: Locale and Index type (like: product or brand) for every widget you create. Name Description Field name Field used to filter results. See Field names . Operation Defines how the input value should be compared with the value of the field in the document. Value type Defines if filter value is predefined value or needs to be provided in the URL value of . Value When value type set to value . Defines the input value used for the operation. Parameter behavior When value type set to value of . It defines if the filter parameter is required or not i.e. it is possible to leave it out from the request. Operation can be one of: In range of + value of When using the \"in range of\" operation in combination with value of type the value provided by the user needs to be in format \"50::100\" (indicating a range between 50 and 100). Name Description match Checks if the input value and the value in the field are the same. (Case Sensitive) in range of Checks if the document field's value is between the configured values (mostly used for numbers, like price, count, size...) not empty Checks if the field value is not empty. Value type can be one of: Name Description value Provides an unchangeable predefined value that will be used for the filter. value of Configures a parameter name that can be provided by the user of the widget to be used for the filter. Parameter behavior is only relevant if the value type is set to value of . It can be one of: Name Description required The configured parameter is required and must be provided by the user of the widget. optional The configured parameter is optional and can be omitted by the user of the widget. Field Names \u00b6 Field Name Field to Match inside Document Brand: Type type Brand or Category: Only With Products Makes sure only brands/categories with products are returned. Only true is a valid value Common: Channel channel Common: Foreign Id foreignId Common: Locale locale Common: Media Reference media.reference or variants.media.reference Common: Title variants.title Common: Title (Fuzzy) variants.title.search Index type (like: product or brand) Possible values: product , brand , category , retailer , location , web Product or Brand: Brand Code variants.attributes.brandCode Product or Category or Retailer: Category Path categoryPaths Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Product or Category or Retailer: Category Path (Level) categoryPaths.path Product or Category: Category Code categoryCodes Product or Retailer: Retailer Code variants.retailerCode Product: Bangle Size Code variants.attributes.bangleSize Product: Boosted Keywords allBoostKeywords Product: Campaign Codes variants.attributes.campaignCodes Product: Clothing Size Code variants.attributes.clothingSize Product: Color variants.attributes.baseColor Product: Customer Group no matching field, mainly used as external parameter Product: Duty Free variants.attributes.dutyFree Product: Exclusive Product variants.attributes.exclusiveProduct Product: Featured variants.attributes.featured Product: ISPU Limited to Areas variants.attributes.ispuLimitedToAreas Product: Keywords variants.attributes.keywords Product: Marketplace Code allMarketplaceCodes Product: Media Reference variants.media.reference Product: New Checks if date is between newFrom and newTo Product: Price Range sorting.price.search Product: Loyalty Price Range variants.loyaltyPrice.default.search Product: Product Family productFamily Product: Product Type productType Product: Retailer Category Codes variants.attributes.retailerCategoryCodes Product: Ring Size Code variants.attributes.ringSize Product: Shoe Size Code variants.attributes.shoeSize Product: Special Offer variants.attributes.specialOffer Product: In Stock variants.attributes.inStock Product: Topics variants.attributes.topics Web: Domain domain Web: Url url Field Names for Products \u00b6 Variants This product is just an example, it contains just one variant with fields that one would not normally see in a single product e.g. clothingSize & bangleSize { \"categoryPaths\": [ \"Clothing & Accessories/Men's/Tops\" ], \"categoryCodes\": [ \"clothing\", \"clothing_men\" ], \"categoryForeignId\": [ \"clothing-en_GB-master\", \"clothing_men-en_GB-master\" ], \"updatedAt\": \"2040-02-22T06:25:31Z\", \"channel\": \"master\", \"inStock\": true, \"configurableProduct\": { \"internalName\": \"ATS135 Awesome Searchperience Product\", \"title\": \"Awesome Searchperience Product\", \"createdAt\": \"2040-02-22T06:25:31Z\", \"updatedAt\": \"2040-02-22T06:25:31Z\", \"attributes\": { \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"campaignCodes\": [ \"MultibuyTotal_4for45\" ], \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ] } }, \"variantVariationAttributesSorting\": {}, \"productType\": \"configurable\", \"locale\": \"en_GB\", \"foreignId\": \"martRetailer_ATS135-en_GB-master\", \"sorting\": { \"price\": 15, \"sellingCount\": { \"week\": 10, \"month\": 45, \"year\": 123 }, \"viewCount\": { \"week\": 21, \"month\": 91, \"year\": 567 } }, \"variantVariationAttributes\": [ \"manufacturerColor\", \"clothingSize\" ], \"visibilityScope\": [ \"catalog\", \"search\" ], \"isNew\": false, \"createdAt\": \"2018-12-03T08:16:10Z\", \"marketplaceCode\": \"martRetailer_ATS135\", \"allBoostKeywords\" : [ \"awesomeProduct\", \"goodValue\" ], \"keywords\" : [ \"searchperience\", \"product\" ], \"allMarketplaceCodes\" : [ \"martRetailer_ATS135\", \"martRetailer_9417657621822\" ], \"variants\": [ { \"updatedAt\": \"2040-12-11T04:43:46Z\", \"shortTitle\": \"Awesome Searchperience Product Variant\", \"retailerSku\": \"9417657634522\", \"stockLevel\": \"high\", \"internalName\": \"ATS135 Awesome Searchperience Product Variant\", \"retailerCode\": \"martRetailer\", \"attributes\": { \"alwaysInStock\": \"true\", \"bangleSize\": \"small_60mm\", \"bangleSize_label\": \"Small 60mm\", \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"brandType\": \"default\", \"brandName\": \"Hallifax\", \"brandToCodeMapping\": \"Hallifax:hallifax\", \"baseColor\": [ \"black\" ], \"baseColor_label\": \"Black\", \"campaignCodes_codeLabel\": \"Campaign Codes\", \"campaignCodes\": [ \"MultibuyTotal_4for45\", \"allPromotions\" ], \"clothingSize\": \"s\", \"clothingSize_label\": \"S\", \"collectionOption_codeLabel\": \"Collection Option\", \"collectionOption\": [ \"departure\" ], \"collectionOption_label\": \"Departure\", \"dutyFree\": \"false\", \"dutyFree_label\": \"No\", \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ], \"exclusiveProduct\": \"true\", \"exclusiveProduct_label\": \"Yes\", \"featured\": \"false\", \"featured_label\": \"No\", \"manufacturerColor\": \"Black\", \"ispuLimitedToAreas\" : [ \"onairport_t4_departure\", \"onairport_t5_departure_a\" ], \"retailerCategoryCodes\" : [ \"fashion\", \"clothing\" ], \"ringSize\": \"small_size_k\", \"ringSize_label\": \"Small Size K\", \"shoeSize\": \"UK_42\", \"ShoeSize_label\": \"UK 42\", \"specialOffer\" : true, \"topic\" : [ \"xmas\", \"sale\" ] }, \"activePrice\": { \"default\": 15, \"isDiscounted\": false, \"currency\": \"EUR\", \"context\": { \"customerGroup\": \"\", \"channel\": null, \"locale\": \"en_GB\" }, \"denyMoreDiscounts\": true, \"rulesApplied\": [ \"campaign_code\" ] }, \"retailerForeignId\": \"martRetailer-en_GB-master\", \"createdAt\": \"2018-12-03T08:16:10Z\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpeg\", \"usage\": \"detail\", \"title\": \"\", \"reference\": \"8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg\" } ], \"marketplaceCode\": \"martRetailer_9417657621822\", \"retailerName\": \"Mart Retailer\", \"title\": \"Awesome Searchperience Product Variant\", \"boostKeywords\": [ \"awesomeProduct\", \"goodValue\" ], \"saleableFrom\": null, \"saleableTo\": null, \"isSaleable\": true, \"productFamily\": \"happyFamily\" } ] } The following table displays the field selector, the corresponding field inside the document and the content of the field that would match. Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId retailer_ATS135-en_GB-master Common: Locale locale en_GB Common: Media Reference variants.media.reference Exact match with 8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg Common: Title variants.title Exact match with Awesome Searchperience Product Variant Common: Title (Fuzzy) variants.title.search Partial match with Awesome Searchperience Product Variant Index type (like: product or brand) one should use product to match this document type Product or Brand: Brand Code variants.attributes.brandCode hallifax Product or Category or Retailer: Category Path categoryPaths Exact match with Clothing & Accessories/Men's/Tops Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Partial match with Clothing & Accessories/Men's/Tops Product or Category or Retailer: Category Path (Level) categoryPaths.path Exact match with Clothing & Accessories or Men's or Tops Product or Category: Category Code categoryCodes One of clothing or clothing_men Product or Retailer: Retailer Code variants.retailerCode Exact match with martRetailer Product: Bangle Size Code variants.attributes.bangleSize Exact match with small_60mm Product: Boosted Keywords allBoostKeywords Exact match with one of awesomeProduct or goodValue Product: Campaign Codes variants.attributes.campaignCodes Exact match with one of MultibuyTotal_4for45 or allPromotions Product: Clothing Size Code variants.attributes.clothingSize Exact match with s Product: Color variants.attributes.baseColor Exact match with black Product: Customer Group no matching field, mainly used as external parameter Product: Duty Free variants.attributes.dutyFree Exact match with false Product: Exclusive Product variants.attributes.exclusiveProduct Exact match with true Product: Featured variants.attributes.featured Exact match with false Product: ISPU Limited to Areas variants.attributes.ispuLimitedToAreas Exact match with onairport_t4_departure or onairport_t5_departure_a Product: Keywords variants.attributes.keywords Exact match with searchperience or product Product: Marketplace Code allMarketplaceCodes Exact match with martRetailer_ATS135 or martRetailer_9417657621822 Product: New Checks if date is between newFrom and newTo Product: Price Range sorting.price.search 15 Product: Loyalty Price Range variants.loyaltyPrice.default.search 15 Product: Product Family productFamily Exact match with happyFamily Product: Product Type productType Exact match with configurable Product: Retailer Category Codes variants.attributes.retailerCategoryCodes Exact match with one of fashion or clothing Product: Ring Size Code variants.attributes.ringSize Exact match with small_size_k Product: Shoe Size Code variants.attributes.shoeSize Exact match with UK_42 Product: Special Offer variants.attributes.specialOffer Exact match with true Product: Topics variants.attributes.topics Exact match with one of xmas or sale Field Names for Brands \u00b6 { \"document\": { \"foreignId\": \"bombay-sapphire-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"code\": \"bombay-sapphire\", \"type\": \"featured\", \"title\": \"Bombay Sapphire\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpg\", \"usage\": \"logo\", \"title\": \"Front View\", \"reference\": \"/media/images/89/white.jpg\" } ], \"keywords\": [] }, \"highlights\": {} } Field Name Field to Match inside Document Type of match Brand: Type type featured Common: Channel channel master Common: Foreign Id foreignId bombay-sapphire-en_GB-master Common: Locale locale en_GB Common: Media Reference media.reference Exact match with /media/images/89/white.jpg Common: Title title Exact match with Bombay Sapphire Common: Title (Fuzzy) title.search Partial match with Bombay Sapphire Index type (like: product or brand) One should use brand to match this document type Product or Brand: Brand Code code Exact match with code Field Names for Categories \u00b6 { \"foreignId\": \"technology_camera_actioncams-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"path\": \"Technology/Camera & Video/Action Cameras\", \"code\": \"technology_camera_actioncams\", \"media\": [], \"label\": \"Action Cameras\", \"isPromoted\": false, \"parentCategoryCode\": \"technology_camera\", \"categoryType\": \"ProductCategory\", \"title\": \"Action Cameras\" } Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId technology_camera_actioncams-en_GB-master Common: Locale locale en_GB Common: Title title Exact match with Action Cameras Common: Title (Fuzzy) title.search Partial match with Action Cameras Index type (like: product or brand) One should use category to match this document type Product or Category or Retailer: Category Path categoryPaths Exact match with Technology/Camera & Video/Action Cameras Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Partial match with Technology/Camera & Video/Action Cameras Product or Category or Retailer: Category Path (Level) categoryPaths.path Exact match with Technology or Camera & Video or Action Cameras Product or Category: Category Code code technology_camera_actioncams Field Names for Retailers \u00b6 { \"foreignId\": \"icebreaker-en_GB-master\", \"code\": \"icebreaker\", \"categoryPaths\": [ \"collection-point\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"title\": \"Icebreaker\", \"terminals\": [ \"I\" ], \"email\": \"icebreaker@online.com\" } Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId icebreaker-en_GB-master Common: Locale locale en_GB Common: Title title Exact match with Icebreaker Common: Title (Fuzzy) title.search Partial match with Icebreaker Index type (like: product or brand) One should use retailer to match this document type Product or Category or Retailer: Category Path categoryPaths Exact match with collection-point Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Partial match with collection-point Product or Category or Retailer: Category Path (Level) categoryPaths.path Exact match with collection-point . No slashed to separate. Product or Category: Category Code code icebreaker Field Names for Locations \u00b6 { \"code\": \"world-duty-free-t5\", \"brands\": [ \"prada\", \"dolce-and-gabbana\", \"bulgari\", \"cartier\" ], \"channel\": \"master\", \"pickup\": true, \"media\": [ { \"reference\": \"/media/images/7/CHE13789d.jpg\", \"usage\": \"heroImage\", \"mimeType\": \"image/jpg\", \"type\": \"image-api\", \"title\": \"Front View\" } ], \"locale\": \"en_GB\", \"title\": \"World Duty Free, T5, Level 2 / Gate A8\", \"foreignId\": \"world-duty-free-t5-en_GB-master\", \"airportZone\": { \"area\": \"A\", \"level\": 2, \"landside\": false, \"schengen\": false, \"terminal\": \"5\", \"title\": \"T5, Airside, Level , Gates A1 - A23\" }, \"email\": \"om3.sandra.flamingo@gmail.com\" } Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId world-duty-free-t5-en_GB-master Common: Locale locale en_GB Common: Title title Exact match with World Duty Free, T5, Level 2 / Gate A8 Common: Title (Fuzzy) title.search Partial match with World Duty Free, T5, Level 2 / Gate A8 Common: Media Reference variants.media.reference Exact match with /media/images/7/CHE13789d.jpg Index type (like: product or brand) One should use location to match this document type Advanced Settings \u00b6 Limited Time \u00b6 If the widget should be active only for a limited time, you can define a time range here. Once the Limited Time switch is set to active, date and time input fields will be displayed. Result rows \u00b6 The Result rows option guarantees a configured number of results. Typical use-cases are displaying results in a table-like manner or in slider content. This option groups the result items in virtual rows by a fixed multiple of items. Only complete filled rows are displayed. The default value 0 means there is no restriction. Note Result rows can be used in combination with Min result count and Widget Fallback . In general the fallback should have the same settings in order to not break the design. Name Default Description Items per row 0 Sets the number of items in one row Max rows 0 Sets the number of rows to be displayed at maximum. Example configuration: Items per row: 3 Max rows: 3 => Can only result in 0 , 3 , 6 or 9 items (if \"Min result count\" is additionally set to 3 , the result can only have 3 , 6 or 9 items). Min result count \u00b6 Min result count allows to set a required minimum of results per widget. If the minimum configured is not reached, no results will be returned. Note The min result count is only valid for the widget it is configured in and does not apply to the fallback. Widget Fallback \u00b6 Widget Fallback option allows you to select another widget to show in case when the current one does not yield enough results. The provided list contains all active widgets except for the current one. Note about fallback widgets \u00b6 Parameters in Fallback Widgets It is recommended to configure fallbacks widget in such a manner that they do not require any parameters. When using a widget in your web site you can only configure a single widget using its ID or alias. In case that the configured widget does not provide enough results or required widget parameters are not provided, the configured fallback widget will be used. As any widget can be configured as a fallback, it is possible configure fallback widgets so that their filters (parameters) do not overlap with the ones of the original widget. When doing so one should provide the parameters for the fallback widget alongside the originally required widget. Any additional parameters for the fallback widget are provided, the main widget will ignore them. However, when the main widget has similar filters (and expects the same parameters) as the fallback one, both widgets will share these parameters. Similar filters are the ones that are configured to use the same fields and the same parameter names. Code Generation \u00b6 To generate the code of a widget, one should click the eye icon of the desired widget. The Code Generation page displays all the required input parameters and the generated code, which is based on the widget configuration and the parameter's values. Parameter inputs are available for all filters configured in widget that have a predefined value set. After generating the code one can take a look of how the widget's results look like in the Preview section. Disabled widget It is possible to preview a widget even if it's not active. You will see a notice in that case. Personalised Widgets \u00b6 Note Personalised Widgets allow to mix predefined elements with personalised ones. For example, a brand widget will contain the favorite brands of logged in users, and display a default set of brands for not logged in ones. You can use the following filters to set the default list of items that will be shown to not logged in users or users that have not interacted with the shop. \"Product or Brand: Brand Code\" \"Product or Category: Category Code\" The brands or categories defined in these filters will be shown to not logged in users. Moreover, for logged in users that have a small number or no interactions at all these values will supplement the list obtained from the user profile document. The brands or categories with a score >10 will be displayed as personalised categories (as long as the category has an image configured.)","title":"Widgets"},{"location":"cockpit/widgets/#widgets","text":"The idea behind Widgets is to return a filtered set of documents which can be used in different scenarios. When to use Widgets : To obtain data from Searchperience from a custom JavaScript Application. To create a teaser component on your web site, the teaser can include items like \"Most Sold Products\", \"Similar Products\", and more.","title":"Widgets"},{"location":"cockpit/widgets/#widgets-overview","text":"","title":"Widgets Overview"},{"location":"cockpit/widgets/#add-or-edit-a-widget","text":"Log into Searchperience Cockpit Under Marketing , select Widgets to see a list of all available Widgets. Create a new widget ( + New Widget ) or edit an existing one (click on the pen under Actions ). Note When updating an existing Widget it might occur that data matching your old configuration gets returned right after saving. Wait 10 seconds and then reload the preview page again.","title":"Add or edit a Widget"},{"location":"cockpit/widgets/#general-settings","text":"Set the Alias , Title and Type of the widget, and activate it (once it's ready). At the moment, possible options for Type include: Type Description Sorted Filter The results of this widget will be sorted based on the option selected in Sort by . Item Recommendation The results of this widget come from the Searchperience Recommender, the widget will require a item foreignId for every request and return similar items. User Recommendation The results of this widget come from the Searchperience Recommender, the widget will require a userId for every request and return a set of items that this user may like. More like This Recommendation The results of this widget are a set of similar items as computed by the search engine. This similarity differs from the recommendation one in that it is computed based on the content of the document's fields and not on user interactions as computed by the Searchperience Recommender. Feed Widget Returns a shorter syntax than the normal widgets. User Profile Check the personalised widgets section for more info. Keep in mind that independently of the widget's Type any configured filters will adjust the results.","title":"General Settings"},{"location":"cockpit/widgets/#sorting-filter","text":"","title":"Sorting &amp; Filter"},{"location":"cockpit/widgets/#sorting","text":"Sort by allows to configure how the widget's results should be sorted. Sorting options: Selling and View counts Data for these metrics is collected by the Searchperience Tracker and calculated inside Searchperience. Name Description Relevance Sort by relevance score (document's relevance is calculated per request, based on the filters provided). Latest Sort by newest documents (The meaning of \"newest\" is configurable). Product Price Sort by product's price. Random Random sorting. Selling count per week Sort by the number of times a product was sold in the last 7 days. Selling count per month Sort by the number of times a product was sold in the last 28 days. Selling count per year Sort by the number of times a product was sold in the last 365 days. View count per week Sort by the number of times a product was clicked in the last 7 days. View count per month Sort by the number of times a product was clicked in the last 28 days View count per year Sort by the number of times a product was clicked in the last 368 days. Title ASC Sort by the product's title in ascending order. Filter Value Sort by the values in a specific filter. After selecting this option, a info message will indicate which filters can be used for sorting.","title":"Sorting"},{"location":"cockpit/widgets/#filters","text":"Additionally, one or more filters can be added to a widget. Filters affect which documents are part of the results. Filters can be: Name Description Filtering Documents that match this filter will be in the results set. Excluding Documents that match this filter will not be in the result set. Boosting Documents that match this filter will be boosted so they appear closer to the top. Sensible values are between 0 and 10, decimal values are allowed. Any value above 1 will improve the relevance of matched documents, values between 0 and 1 will lower the relevance of matched documents. Negative values are not supported. Filters consist of these fields: Good Practice It is a good practice to always set filters with the fields Common: Channel , Common: Locale and Index type (like: product or brand) for every widget you create. Name Description Field name Field used to filter results. See Field names . Operation Defines how the input value should be compared with the value of the field in the document. Value type Defines if filter value is predefined value or needs to be provided in the URL value of . Value When value type set to value . Defines the input value used for the operation. Parameter behavior When value type set to value of . It defines if the filter parameter is required or not i.e. it is possible to leave it out from the request. Operation can be one of: In range of + value of When using the \"in range of\" operation in combination with value of type the value provided by the user needs to be in format \"50::100\" (indicating a range between 50 and 100). Name Description match Checks if the input value and the value in the field are the same. (Case Sensitive) in range of Checks if the document field's value is between the configured values (mostly used for numbers, like price, count, size...) not empty Checks if the field value is not empty. Value type can be one of: Name Description value Provides an unchangeable predefined value that will be used for the filter. value of Configures a parameter name that can be provided by the user of the widget to be used for the filter. Parameter behavior is only relevant if the value type is set to value of . It can be one of: Name Description required The configured parameter is required and must be provided by the user of the widget. optional The configured parameter is optional and can be omitted by the user of the widget.","title":"Filters"},{"location":"cockpit/widgets/#field-names","text":"Field Name Field to Match inside Document Brand: Type type Brand or Category: Only With Products Makes sure only brands/categories with products are returned. Only true is a valid value Common: Channel channel Common: Foreign Id foreignId Common: Locale locale Common: Media Reference media.reference or variants.media.reference Common: Title variants.title Common: Title (Fuzzy) variants.title.search Index type (like: product or brand) Possible values: product , brand , category , retailer , location , web Product or Brand: Brand Code variants.attributes.brandCode Product or Category or Retailer: Category Path categoryPaths Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Product or Category or Retailer: Category Path (Level) categoryPaths.path Product or Category: Category Code categoryCodes Product or Retailer: Retailer Code variants.retailerCode Product: Bangle Size Code variants.attributes.bangleSize Product: Boosted Keywords allBoostKeywords Product: Campaign Codes variants.attributes.campaignCodes Product: Clothing Size Code variants.attributes.clothingSize Product: Color variants.attributes.baseColor Product: Customer Group no matching field, mainly used as external parameter Product: Duty Free variants.attributes.dutyFree Product: Exclusive Product variants.attributes.exclusiveProduct Product: Featured variants.attributes.featured Product: ISPU Limited to Areas variants.attributes.ispuLimitedToAreas Product: Keywords variants.attributes.keywords Product: Marketplace Code allMarketplaceCodes Product: Media Reference variants.media.reference Product: New Checks if date is between newFrom and newTo Product: Price Range sorting.price.search Product: Loyalty Price Range variants.loyaltyPrice.default.search Product: Product Family productFamily Product: Product Type productType Product: Retailer Category Codes variants.attributes.retailerCategoryCodes Product: Ring Size Code variants.attributes.ringSize Product: Shoe Size Code variants.attributes.shoeSize Product: Special Offer variants.attributes.specialOffer Product: In Stock variants.attributes.inStock Product: Topics variants.attributes.topics Web: Domain domain Web: Url url","title":"Field Names"},{"location":"cockpit/widgets/#field-names-for-products","text":"Variants This product is just an example, it contains just one variant with fields that one would not normally see in a single product e.g. clothingSize & bangleSize { \"categoryPaths\": [ \"Clothing & Accessories/Men's/Tops\" ], \"categoryCodes\": [ \"clothing\", \"clothing_men\" ], \"categoryForeignId\": [ \"clothing-en_GB-master\", \"clothing_men-en_GB-master\" ], \"updatedAt\": \"2040-02-22T06:25:31Z\", \"channel\": \"master\", \"inStock\": true, \"configurableProduct\": { \"internalName\": \"ATS135 Awesome Searchperience Product\", \"title\": \"Awesome Searchperience Product\", \"createdAt\": \"2040-02-22T06:25:31Z\", \"updatedAt\": \"2040-02-22T06:25:31Z\", \"attributes\": { \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"campaignCodes\": [ \"MultibuyTotal_4for45\" ], \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ] } }, \"variantVariationAttributesSorting\": {}, \"productType\": \"configurable\", \"locale\": \"en_GB\", \"foreignId\": \"martRetailer_ATS135-en_GB-master\", \"sorting\": { \"price\": 15, \"sellingCount\": { \"week\": 10, \"month\": 45, \"year\": 123 }, \"viewCount\": { \"week\": 21, \"month\": 91, \"year\": 567 } }, \"variantVariationAttributes\": [ \"manufacturerColor\", \"clothingSize\" ], \"visibilityScope\": [ \"catalog\", \"search\" ], \"isNew\": false, \"createdAt\": \"2018-12-03T08:16:10Z\", \"marketplaceCode\": \"martRetailer_ATS135\", \"allBoostKeywords\" : [ \"awesomeProduct\", \"goodValue\" ], \"keywords\" : [ \"searchperience\", \"product\" ], \"allMarketplaceCodes\" : [ \"martRetailer_ATS135\", \"martRetailer_9417657621822\" ], \"variants\": [ { \"updatedAt\": \"2040-12-11T04:43:46Z\", \"shortTitle\": \"Awesome Searchperience Product Variant\", \"retailerSku\": \"9417657634522\", \"stockLevel\": \"high\", \"internalName\": \"ATS135 Awesome Searchperience Product Variant\", \"retailerCode\": \"martRetailer\", \"attributes\": { \"alwaysInStock\": \"true\", \"bangleSize\": \"small_60mm\", \"bangleSize_label\": \"Small 60mm\", \"brandCode\": \"hallifax\", \"brandForeignId\": \"hallifax-en_GB-master\", \"brandType\": \"default\", \"brandName\": \"Hallifax\", \"brandToCodeMapping\": \"Hallifax:hallifax\", \"baseColor\": [ \"black\" ], \"baseColor_label\": \"Black\", \"campaignCodes_codeLabel\": \"Campaign Codes\", \"campaignCodes\": [ \"MultibuyTotal_4for45\", \"allPromotions\" ], \"clothingSize\": \"s\", \"clothingSize_label\": \"S\", \"collectionOption_codeLabel\": \"Collection Option\", \"collectionOption\": [ \"departure\" ], \"collectionOption_label\": \"Departure\", \"dutyFree\": \"false\", \"dutyFree_label\": \"No\", \"deliveryOptions\": [ \"homeDelivery\", \"inflightPreorder\", \"ispu\" ], \"exclusiveProduct\": \"true\", \"exclusiveProduct_label\": \"Yes\", \"featured\": \"false\", \"featured_label\": \"No\", \"manufacturerColor\": \"Black\", \"ispuLimitedToAreas\" : [ \"onairport_t4_departure\", \"onairport_t5_departure_a\" ], \"retailerCategoryCodes\" : [ \"fashion\", \"clothing\" ], \"ringSize\": \"small_size_k\", \"ringSize_label\": \"Small Size K\", \"shoeSize\": \"UK_42\", \"ShoeSize_label\": \"UK 42\", \"specialOffer\" : true, \"topic\" : [ \"xmas\", \"sale\" ] }, \"activePrice\": { \"default\": 15, \"isDiscounted\": false, \"currency\": \"EUR\", \"context\": { \"customerGroup\": \"\", \"channel\": null, \"locale\": \"en_GB\" }, \"denyMoreDiscounts\": true, \"rulesApplied\": [ \"campaign_code\" ] }, \"retailerForeignId\": \"martRetailer-en_GB-master\", \"createdAt\": \"2018-12-03T08:16:10Z\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpeg\", \"usage\": \"detail\", \"title\": \"\", \"reference\": \"8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg\" } ], \"marketplaceCode\": \"martRetailer_9417657621822\", \"retailerName\": \"Mart Retailer\", \"title\": \"Awesome Searchperience Product Variant\", \"boostKeywords\": [ \"awesomeProduct\", \"goodValue\" ], \"saleableFrom\": null, \"saleableTo\": null, \"isSaleable\": true, \"productFamily\": \"happyFamily\" } ] } The following table displays the field selector, the corresponding field inside the document and the content of the field that would match. Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId retailer_ATS135-en_GB-master Common: Locale locale en_GB Common: Media Reference variants.media.reference Exact match with 8/b/9/e/8b9e7841ce37bdf123a59757a2c0dc38_ATS135.jpg Common: Title variants.title Exact match with Awesome Searchperience Product Variant Common: Title (Fuzzy) variants.title.search Partial match with Awesome Searchperience Product Variant Index type (like: product or brand) one should use product to match this document type Product or Brand: Brand Code variants.attributes.brandCode hallifax Product or Category or Retailer: Category Path categoryPaths Exact match with Clothing & Accessories/Men's/Tops Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Partial match with Clothing & Accessories/Men's/Tops Product or Category or Retailer: Category Path (Level) categoryPaths.path Exact match with Clothing & Accessories or Men's or Tops Product or Category: Category Code categoryCodes One of clothing or clothing_men Product or Retailer: Retailer Code variants.retailerCode Exact match with martRetailer Product: Bangle Size Code variants.attributes.bangleSize Exact match with small_60mm Product: Boosted Keywords allBoostKeywords Exact match with one of awesomeProduct or goodValue Product: Campaign Codes variants.attributes.campaignCodes Exact match with one of MultibuyTotal_4for45 or allPromotions Product: Clothing Size Code variants.attributes.clothingSize Exact match with s Product: Color variants.attributes.baseColor Exact match with black Product: Customer Group no matching field, mainly used as external parameter Product: Duty Free variants.attributes.dutyFree Exact match with false Product: Exclusive Product variants.attributes.exclusiveProduct Exact match with true Product: Featured variants.attributes.featured Exact match with false Product: ISPU Limited to Areas variants.attributes.ispuLimitedToAreas Exact match with onairport_t4_departure or onairport_t5_departure_a Product: Keywords variants.attributes.keywords Exact match with searchperience or product Product: Marketplace Code allMarketplaceCodes Exact match with martRetailer_ATS135 or martRetailer_9417657621822 Product: New Checks if date is between newFrom and newTo Product: Price Range sorting.price.search 15 Product: Loyalty Price Range variants.loyaltyPrice.default.search 15 Product: Product Family productFamily Exact match with happyFamily Product: Product Type productType Exact match with configurable Product: Retailer Category Codes variants.attributes.retailerCategoryCodes Exact match with one of fashion or clothing Product: Ring Size Code variants.attributes.ringSize Exact match with small_size_k Product: Shoe Size Code variants.attributes.shoeSize Exact match with UK_42 Product: Special Offer variants.attributes.specialOffer Exact match with true Product: Topics variants.attributes.topics Exact match with one of xmas or sale","title":"Field Names for Products"},{"location":"cockpit/widgets/#field-names-for-brands","text":"{ \"document\": { \"foreignId\": \"bombay-sapphire-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"code\": \"bombay-sapphire\", \"type\": \"featured\", \"title\": \"Bombay Sapphire\", \"media\": [ { \"type\": \"image-api\", \"mimeType\": \"image/jpg\", \"usage\": \"logo\", \"title\": \"Front View\", \"reference\": \"/media/images/89/white.jpg\" } ], \"keywords\": [] }, \"highlights\": {} } Field Name Field to Match inside Document Type of match Brand: Type type featured Common: Channel channel master Common: Foreign Id foreignId bombay-sapphire-en_GB-master Common: Locale locale en_GB Common: Media Reference media.reference Exact match with /media/images/89/white.jpg Common: Title title Exact match with Bombay Sapphire Common: Title (Fuzzy) title.search Partial match with Bombay Sapphire Index type (like: product or brand) One should use brand to match this document type Product or Brand: Brand Code code Exact match with code","title":"Field Names for Brands"},{"location":"cockpit/widgets/#field-names-for-categories","text":"{ \"foreignId\": \"technology_camera_actioncams-en_GB-master\", \"locale\": \"en_GB\", \"channel\": \"master\", \"path\": \"Technology/Camera & Video/Action Cameras\", \"code\": \"technology_camera_actioncams\", \"media\": [], \"label\": \"Action Cameras\", \"isPromoted\": false, \"parentCategoryCode\": \"technology_camera\", \"categoryType\": \"ProductCategory\", \"title\": \"Action Cameras\" } Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId technology_camera_actioncams-en_GB-master Common: Locale locale en_GB Common: Title title Exact match with Action Cameras Common: Title (Fuzzy) title.search Partial match with Action Cameras Index type (like: product or brand) One should use category to match this document type Product or Category or Retailer: Category Path categoryPaths Exact match with Technology/Camera & Video/Action Cameras Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Partial match with Technology/Camera & Video/Action Cameras Product or Category or Retailer: Category Path (Level) categoryPaths.path Exact match with Technology or Camera & Video or Action Cameras Product or Category: Category Code code technology_camera_actioncams","title":"Field Names for Categories"},{"location":"cockpit/widgets/#field-names-for-retailers","text":"{ \"foreignId\": \"icebreaker-en_GB-master\", \"code\": \"icebreaker\", \"categoryPaths\": [ \"collection-point\" ], \"channel\": \"master\", \"locale\": \"en_GB\", \"title\": \"Icebreaker\", \"terminals\": [ \"I\" ], \"email\": \"icebreaker@online.com\" } Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId icebreaker-en_GB-master Common: Locale locale en_GB Common: Title title Exact match with Icebreaker Common: Title (Fuzzy) title.search Partial match with Icebreaker Index type (like: product or brand) One should use retailer to match this document type Product or Category or Retailer: Category Path categoryPaths Exact match with collection-point Product or Category or Retailer: Category Path (Fuzzy) categoryPaths.search Partial match with collection-point Product or Category or Retailer: Category Path (Level) categoryPaths.path Exact match with collection-point . No slashed to separate. Product or Category: Category Code code icebreaker","title":"Field Names for Retailers"},{"location":"cockpit/widgets/#field-names-for-locations","text":"{ \"code\": \"world-duty-free-t5\", \"brands\": [ \"prada\", \"dolce-and-gabbana\", \"bulgari\", \"cartier\" ], \"channel\": \"master\", \"pickup\": true, \"media\": [ { \"reference\": \"/media/images/7/CHE13789d.jpg\", \"usage\": \"heroImage\", \"mimeType\": \"image/jpg\", \"type\": \"image-api\", \"title\": \"Front View\" } ], \"locale\": \"en_GB\", \"title\": \"World Duty Free, T5, Level 2 / Gate A8\", \"foreignId\": \"world-duty-free-t5-en_GB-master\", \"airportZone\": { \"area\": \"A\", \"level\": 2, \"landside\": false, \"schengen\": false, \"terminal\": \"5\", \"title\": \"T5, Airside, Level , Gates A1 - A23\" }, \"email\": \"om3.sandra.flamingo@gmail.com\" } Field Name Field to Match inside Document Type of match Common: Channel channel master Common: Foreign Id foreignId world-duty-free-t5-en_GB-master Common: Locale locale en_GB Common: Title title Exact match with World Duty Free, T5, Level 2 / Gate A8 Common: Title (Fuzzy) title.search Partial match with World Duty Free, T5, Level 2 / Gate A8 Common: Media Reference variants.media.reference Exact match with /media/images/7/CHE13789d.jpg Index type (like: product or brand) One should use location to match this document type","title":"Field Names for Locations"},{"location":"cockpit/widgets/#advanced-settings","text":"","title":"Advanced Settings"},{"location":"cockpit/widgets/#limited-time","text":"If the widget should be active only for a limited time, you can define a time range here. Once the Limited Time switch is set to active, date and time input fields will be displayed.","title":"Limited Time"},{"location":"cockpit/widgets/#result-rows","text":"The Result rows option guarantees a configured number of results. Typical use-cases are displaying results in a table-like manner or in slider content. This option groups the result items in virtual rows by a fixed multiple of items. Only complete filled rows are displayed. The default value 0 means there is no restriction. Note Result rows can be used in combination with Min result count and Widget Fallback . In general the fallback should have the same settings in order to not break the design. Name Default Description Items per row 0 Sets the number of items in one row Max rows 0 Sets the number of rows to be displayed at maximum. Example configuration: Items per row: 3 Max rows: 3 => Can only result in 0 , 3 , 6 or 9 items (if \"Min result count\" is additionally set to 3 , the result can only have 3 , 6 or 9 items).","title":"Result rows"},{"location":"cockpit/widgets/#min-result-count","text":"Min result count allows to set a required minimum of results per widget. If the minimum configured is not reached, no results will be returned. Note The min result count is only valid for the widget it is configured in and does not apply to the fallback.","title":"Min result count"},{"location":"cockpit/widgets/#widget-fallback","text":"Widget Fallback option allows you to select another widget to show in case when the current one does not yield enough results. The provided list contains all active widgets except for the current one.","title":"Widget Fallback"},{"location":"cockpit/widgets/#note-about-fallback-widgets","text":"Parameters in Fallback Widgets It is recommended to configure fallbacks widget in such a manner that they do not require any parameters. When using a widget in your web site you can only configure a single widget using its ID or alias. In case that the configured widget does not provide enough results or required widget parameters are not provided, the configured fallback widget will be used. As any widget can be configured as a fallback, it is possible configure fallback widgets so that their filters (parameters) do not overlap with the ones of the original widget. When doing so one should provide the parameters for the fallback widget alongside the originally required widget. Any additional parameters for the fallback widget are provided, the main widget will ignore them. However, when the main widget has similar filters (and expects the same parameters) as the fallback one, both widgets will share these parameters. Similar filters are the ones that are configured to use the same fields and the same parameter names.","title":"Note about fallback widgets"},{"location":"cockpit/widgets/#code-generation","text":"To generate the code of a widget, one should click the eye icon of the desired widget. The Code Generation page displays all the required input parameters and the generated code, which is based on the widget configuration and the parameter's values. Parameter inputs are available for all filters configured in widget that have a predefined value set. After generating the code one can take a look of how the widget's results look like in the Preview section. Disabled widget It is possible to preview a widget even if it's not active. You will see a notice in that case.","title":"Code Generation"},{"location":"cockpit/widgets/#personalised-widgets","text":"Note Personalised Widgets allow to mix predefined elements with personalised ones. For example, a brand widget will contain the favorite brands of logged in users, and display a default set of brands for not logged in ones. You can use the following filters to set the default list of items that will be shown to not logged in users or users that have not interacted with the shop. \"Product or Brand: Brand Code\" \"Product or Category: Category Code\" The brands or categories defined in these filters will be shown to not logged in users. Moreover, for logged in users that have a small number or no interactions at all these values will supplement the list obtained from the user profile document. The brands or categories with a score >10 will be displayed as personalised categories (as long as the category has an image configured.)","title":"Personalised Widgets"},{"location":"concept/document-relevance/","text":"Product Relevance Calculation \u00b6 The more relevant a product is the higher it will appear in search results. The order of search results is determined by several factors. However, as a general rule of thumb: The less common a word is though all products in the store, the more relevant it is when searching for it. Uncommon words like hippopotamus help zoom out the most relevant products. Products that contain a word fewer times are more relevant. A product that contains the word elegant two times is more significant than a product that contains the same word five times. Words that exactly match a product make this product more relevant in comparison to other product with just a partial match. When searching for phone , products containing the word headphones are less relevant than the ones containing just phone . The field that contains the word plays an important role in relevance. When searching for training , a document containing this word in the title is more relevant than another product which contains the same word in the description. Moreover, keep in mind Searchperience relevance modifiers such as Widgets with a Boosting filter and Enrichments , these elements are designed to override the rules described above and comply with specific business expectations. Fields inside Searchperience \u00b6 To understand how Searchperience handles the content inside a document's field, first you should understand what sub-fields are and how they affect the content of a field. Sub-fields \u00b6 Sub-fields are a copy of the content of a field, however it is transformed so that the content has a higher probability to match the search query. Here is an overview of the sub-field types used by Searchperience. search : Content is lowercased, splitted into smaller pieces. # the word 'phone' gets splitted so it matches more queries \"phone\" => [\"p\", \"ph\", \"pho\", \"phon\", \"phone\"] exact : Content is taken lowercased as a whole. Used to exact match fields like marketplaceCode. # the term is exactly the same \"BS234\" => [\"bs234\"] path : Content is broken down on / . Used for category paths. # the path is splitted so all elements have a chance to match the query \"space/planet/earth\" => [\"space\", \"planet\", \"earth\"] To understand this let's try an example. Imagine a product with the following content: ... \"variants\" : [ { ... \"title\" : \"iPhone X 64GB\" ... } ] ... The content of the field variants.title is iPhone X 64GB . As already stated Searchperience uses sub-fields to increase the probability of matching the user's query, this means that the following field will be implicitly (just inside the database and not visible to the end-user) have the following fields available for matching when searching. variants.title.search : [\"i\", \"ip\", \"iph\", \"ipho\", \"iphon\", \"iphone\", \"x\", \"6\", \"64\", \"64g\", \"64gb\"] variants.title.exact : [\"iphone x 64gb\"] Search Fields & Relevance Multipliers \u00b6 Any fields not listed in the table are not considered when searching. The multiplier value indicates how significant is the match between user query and field's content. For example, if there is an exact match in the variants.shortTitle it is 5 times more relevant than a match in the variants.shortDescription . Field in Searchperience Multiplier boostKeywords.exact 5 categoryPaths.path 2 marketplaceCode.exact 5 normalboostw.exact 5 highboostw.exact 4 lowboostw.exact 3 smartKeywordHigh.exact 5 smartKeywordLow.exact 3 smartKeywordNormal.exact 4 variants.attributes.baseColor.search 2 variants.attributes.brandName.exact 10 variants.attributes.brandName.search 4 variants.attributes.gtin.search variants.attributes.productClassification.search variants.attributes.productClassification.exact 10 variants.boostKeywords.exact 10 variants.description.search variants.marketplaceCode.exact 10 variants.retailerName.exact 10 variants.retailerName.search 4 variants.retailerSku.search variants.shortDescription.search 2 variants.shortTitle.search 4 variants.title.exact 10 variants.title.search 4 variants.shortTitle.exact 10","title":"Product Relevance"},{"location":"concept/document-relevance/#product-relevance-calculation","text":"The more relevant a product is the higher it will appear in search results. The order of search results is determined by several factors. However, as a general rule of thumb: The less common a word is though all products in the store, the more relevant it is when searching for it. Uncommon words like hippopotamus help zoom out the most relevant products. Products that contain a word fewer times are more relevant. A product that contains the word elegant two times is more significant than a product that contains the same word five times. Words that exactly match a product make this product more relevant in comparison to other product with just a partial match. When searching for phone , products containing the word headphones are less relevant than the ones containing just phone . The field that contains the word plays an important role in relevance. When searching for training , a document containing this word in the title is more relevant than another product which contains the same word in the description. Moreover, keep in mind Searchperience relevance modifiers such as Widgets with a Boosting filter and Enrichments , these elements are designed to override the rules described above and comply with specific business expectations.","title":"Product Relevance Calculation"},{"location":"concept/document-relevance/#fields-inside-searchperience","text":"To understand how Searchperience handles the content inside a document's field, first you should understand what sub-fields are and how they affect the content of a field.","title":"Fields inside Searchperience"},{"location":"concept/document-relevance/#sub-fields","text":"Sub-fields are a copy of the content of a field, however it is transformed so that the content has a higher probability to match the search query. Here is an overview of the sub-field types used by Searchperience. search : Content is lowercased, splitted into smaller pieces. # the word 'phone' gets splitted so it matches more queries \"phone\" => [\"p\", \"ph\", \"pho\", \"phon\", \"phone\"] exact : Content is taken lowercased as a whole. Used to exact match fields like marketplaceCode. # the term is exactly the same \"BS234\" => [\"bs234\"] path : Content is broken down on / . Used for category paths. # the path is splitted so all elements have a chance to match the query \"space/planet/earth\" => [\"space\", \"planet\", \"earth\"] To understand this let's try an example. Imagine a product with the following content: ... \"variants\" : [ { ... \"title\" : \"iPhone X 64GB\" ... } ] ... The content of the field variants.title is iPhone X 64GB . As already stated Searchperience uses sub-fields to increase the probability of matching the user's query, this means that the following field will be implicitly (just inside the database and not visible to the end-user) have the following fields available for matching when searching. variants.title.search : [\"i\", \"ip\", \"iph\", \"ipho\", \"iphon\", \"iphone\", \"x\", \"6\", \"64\", \"64g\", \"64gb\"] variants.title.exact : [\"iphone x 64gb\"]","title":"Sub-fields"},{"location":"concept/document-relevance/#search-fields-relevance-multipliers","text":"Any fields not listed in the table are not considered when searching. The multiplier value indicates how significant is the match between user query and field's content. For example, if there is an exact match in the variants.shortTitle it is 5 times more relevant than a match in the variants.shortDescription . Field in Searchperience Multiplier boostKeywords.exact 5 categoryPaths.path 2 marketplaceCode.exact 5 normalboostw.exact 5 highboostw.exact 4 lowboostw.exact 3 smartKeywordHigh.exact 5 smartKeywordLow.exact 3 smartKeywordNormal.exact 4 variants.attributes.baseColor.search 2 variants.attributes.brandName.exact 10 variants.attributes.brandName.search 4 variants.attributes.gtin.search variants.attributes.productClassification.search variants.attributes.productClassification.exact 10 variants.boostKeywords.exact 10 variants.description.search variants.marketplaceCode.exact 10 variants.retailerName.exact 10 variants.retailerName.search 4 variants.retailerSku.search variants.shortDescription.search 2 variants.shortTitle.search 4 variants.title.exact 10 variants.title.search 4 variants.shortTitle.exact 10","title":"Search Fields &amp; Relevance Multipliers"},{"location":"concept/suggestions/","text":"To understand suggestions , you should have a basic understanding of a document inside Searchperience. Suggestions can be used to power a search-as-you-type search or as an auto-correction feature. Indexing \u00b6 When indexing a document, Searchperience extracts suggestions from this document. That means suggestions are always generated out of the available documents, so there will never be an option that does not match a document. Depending on the document type, suggestions are generated from different fields. The conditions, if a suggestion should be generated, the fields itself and their processing are configurable and can be adapted depending on the use case and business expectations. In most cases just the title field is used, e.g. for brands, locations and retailers. Especially for products, fields like variants.title , categoryPaths , variants.attributes.brandName , among others are used. It is also configurable which additional fields from the original document should be saved, e.g. channel and locale . Suggestions are saved in Elasticsearch as its own document type. For indexing Elasticsearch uses differently configured analyzers to examine the fields. The most worth mentioning filters of these analyzers are Stemming 1 Edge n-gramming 2 While it is possible to know to which specific document type mimeType a suggestion corresponds, it is not possible to know the exact document from which the suggestion was extracted from. A suggestion exists only once without reference to how often the term appears in the original documents. To ensure uniqueness, we create a hash from the suggestion text and the additional fields. Example of a product suggestion document in Elasticsearch: { \"mimeType\": \"application/json+sp-suggestion-product\", \"text\": \"Jaguar\", \"timestamp\": 1579584603, \"channel\": \"master\", \"locale\": \"en_GB\" } Searching \u00b6 When searching, suggestions are returned based on how good the match is between user input and the suggestion itself. Elasticsearch uses the BM25 3 similarity algorithm to measure the relevance (score). The suggestions appear depending on how good is the match and if documents have the same score, sorted by length (from short to long). For searching Elasticsearch uses differently configured search analyzers to examine the fields. The most worth mentioning filters of these analyzers are Stemming 1 Edge n-gramming 2 When a user inputs a query that returns 0 results, Searchperience will automatically check if there are any suggestions available: If there are suggestions available, a second search will be performed with the best suggestion as currentQuery . Otherwise, an empty response will be returned. Example of suggestions returned from Searchperience: { \"suggestion\": { \"metaData\": { \"totalHits\": 3, \"currentQuery\": \"Head\", \"originalQuery\": null, \"took\": 19 }, \"hits\": [ { \"document\": { \"text\": \"Headstrap\" }, \"highlights\": { \"text\": \"<span class=\\\"sp-highlight\\\">Head</span>strap\" } }, { \"document\": { \"text\": \"Headphones\" }, \"highlights\": { \"text\": \"<span class=\\\"sp-highlight\\\">Head</span>phones\" } }, { \"document\": { \"text\": \"Wireless Headphones\" }, \"highlights\": { \"text\": \"Wireless <span class=\\\"sp-highlight\\\">Head</span>phones\" } } ] } } More information about Stemming \u21a9 \u21a9 More information about N-gramming \u21a9 \u21a9 More information about BM25 \u21a9","title":"Suggestions"},{"location":"concept/suggestions/#indexing","text":"When indexing a document, Searchperience extracts suggestions from this document. That means suggestions are always generated out of the available documents, so there will never be an option that does not match a document. Depending on the document type, suggestions are generated from different fields. The conditions, if a suggestion should be generated, the fields itself and their processing are configurable and can be adapted depending on the use case and business expectations. In most cases just the title field is used, e.g. for brands, locations and retailers. Especially for products, fields like variants.title , categoryPaths , variants.attributes.brandName , among others are used. It is also configurable which additional fields from the original document should be saved, e.g. channel and locale . Suggestions are saved in Elasticsearch as its own document type. For indexing Elasticsearch uses differently configured analyzers to examine the fields. The most worth mentioning filters of these analyzers are Stemming 1 Edge n-gramming 2 While it is possible to know to which specific document type mimeType a suggestion corresponds, it is not possible to know the exact document from which the suggestion was extracted from. A suggestion exists only once without reference to how often the term appears in the original documents. To ensure uniqueness, we create a hash from the suggestion text and the additional fields. Example of a product suggestion document in Elasticsearch: { \"mimeType\": \"application/json+sp-suggestion-product\", \"text\": \"Jaguar\", \"timestamp\": 1579584603, \"channel\": \"master\", \"locale\": \"en_GB\" }","title":"Indexing"},{"location":"concept/suggestions/#searching","text":"When searching, suggestions are returned based on how good the match is between user input and the suggestion itself. Elasticsearch uses the BM25 3 similarity algorithm to measure the relevance (score). The suggestions appear depending on how good is the match and if documents have the same score, sorted by length (from short to long). For searching Elasticsearch uses differently configured search analyzers to examine the fields. The most worth mentioning filters of these analyzers are Stemming 1 Edge n-gramming 2 When a user inputs a query that returns 0 results, Searchperience will automatically check if there are any suggestions available: If there are suggestions available, a second search will be performed with the best suggestion as currentQuery . Otherwise, an empty response will be returned. Example of suggestions returned from Searchperience: { \"suggestion\": { \"metaData\": { \"totalHits\": 3, \"currentQuery\": \"Head\", \"originalQuery\": null, \"took\": 19 }, \"hits\": [ { \"document\": { \"text\": \"Headstrap\" }, \"highlights\": { \"text\": \"<span class=\\\"sp-highlight\\\">Head</span>strap\" } }, { \"document\": { \"text\": \"Headphones\" }, \"highlights\": { \"text\": \"<span class=\\\"sp-highlight\\\">Head</span>phones\" } }, { \"document\": { \"text\": \"Wireless Headphones\" }, \"highlights\": { \"text\": \"Wireless <span class=\\\"sp-highlight\\\">Head</span>phones\" } } ] } } More information about Stemming \u21a9 \u21a9 More information about N-gramming \u21a9 \u21a9 More information about BM25 \u21a9","title":"Searching"},{"location":"integration/flights/","text":"Flights CSV \u00b6 Info The language in which the flight information like city name or country name should be predefined. CSV, Comma Separated Values (strict form as described in RFC 4180) It is a delimited data format that has fields/columns separated by the comma character %x2C (Hex 2C) records/rows/lines separated by characters indicating a line break. RFC 4180 stipulates the use of CRLF pairs to denote line breaks, where CR is %x0D (Hex 0D) and LF is %x0A (Hex 0A). Each line should contain the same number of fields. Fields that contain a special character (comma, CR, LF, or double quote), must be \"escaped\" by enclosing them in double quotes (Hex 22). The header will contain names corresponding to the fields in the file and should contain the same number of fields as the records in the rest of the file. Airlines \u00b6 For airline clients one should include the arrival and departure information of the flight as it allows users for a more flexible search. Airline specific information is not necessary. Field name Description Example flightNumber Primary flight number. AB0948 codeShareFlightNumber Comma separated list of codeshare flights. AB045,AB124 scheduledDepartureDate ISO 8601 complete calendar date in format \"YYYY-MM-DD\" 2020-11-01 scheduledDepartureTime ISO 8601 time with offset of the scheduled departure. 15:45+02:00 departureArea Area from where the flight is departing. 2 departureTerminal Terminal from which the flight is departing. 2 departureGate Gate from where the flight is departing. 34D departureAirportCode IATA code of the departure airport. PBI departureAirportName Name of the arrival airport, please avoid using the word Aiport . Palm Beach International departureCityName Name of the departure city. Palm Beach departureCountryCode ISO alpha-2 country departure code. US departureCountryName Name of the departure country. United States of America scheduledArrivalDate ISO 8601 complete calendar date in format \"YYYY-MM-DD\" 2020-11-01 scheduledArrivalTime ISO 8601 time with offset of the scheduled arrival. 07:45+02:00 arrivalArea Area to which the flight is arriving. 3 arrivalGate Gate to which the flight is arriving. 2A arrivalTerminal Terminal to which the flight is arriving. 1 arrivalAirportCode IATA code of the arrival airport. LAX arrivalAirportName Name of the arrival airport, please avoid using the word Aiport . Los Angeles arrivalCityName Name of the arrival city. Los Angeles arrivalCountryCode ISO alpha-2 arrival country code. US arrivalCountryName Name of the arrival country. United States of America Example Airlines CSV \u00b6 airline.csv Airport \u00b6 For airport client flights are bounded to arrivals or departures. If necessary Searchperience will handle the transformation into a complete flight route. FieldName Description Example flightNumber Primary flight number. AB0948 codeShareFlightNumber Comma separated list of code share flight numbers. AB045,AB124 scheduledDate ISO 8601 complete calendar date in format \"YYYY-MM-DD\" 2020-11-01 scheduledTime ISO 8601 time with offset arrival/departure (depend on direction) 15:45+02:00 area Area of arrival or departure. 1 terminal Terminal which the flight arrives or departs. 1 direction Arrival A or Departure D flight. A gate Gate of arrival or departure. 2D airlineCode IATA airline code. BA airlineName Complete name of the airline. British Airways airportCode IATA code of the airport. SIN airportName Name of the airport, please avoid using the word Aiport . Singapore Changi cityName Name of the city. Singapore countryCode ISO alpha-2 country departure code. SG countryName Name of the departure country. Singapore Example Airport CSV \u00b6 airport.csv","title":"Flights"},{"location":"integration/flights/#flights-csv","text":"Info The language in which the flight information like city name or country name should be predefined. CSV, Comma Separated Values (strict form as described in RFC 4180) It is a delimited data format that has fields/columns separated by the comma character %x2C (Hex 2C) records/rows/lines separated by characters indicating a line break. RFC 4180 stipulates the use of CRLF pairs to denote line breaks, where CR is %x0D (Hex 0D) and LF is %x0A (Hex 0A). Each line should contain the same number of fields. Fields that contain a special character (comma, CR, LF, or double quote), must be \"escaped\" by enclosing them in double quotes (Hex 22). The header will contain names corresponding to the fields in the file and should contain the same number of fields as the records in the rest of the file.","title":"Flights CSV"},{"location":"integration/flights/#airlines","text":"For airline clients one should include the arrival and departure information of the flight as it allows users for a more flexible search. Airline specific information is not necessary. Field name Description Example flightNumber Primary flight number. AB0948 codeShareFlightNumber Comma separated list of codeshare flights. AB045,AB124 scheduledDepartureDate ISO 8601 complete calendar date in format \"YYYY-MM-DD\" 2020-11-01 scheduledDepartureTime ISO 8601 time with offset of the scheduled departure. 15:45+02:00 departureArea Area from where the flight is departing. 2 departureTerminal Terminal from which the flight is departing. 2 departureGate Gate from where the flight is departing. 34D departureAirportCode IATA code of the departure airport. PBI departureAirportName Name of the arrival airport, please avoid using the word Aiport . Palm Beach International departureCityName Name of the departure city. Palm Beach departureCountryCode ISO alpha-2 country departure code. US departureCountryName Name of the departure country. United States of America scheduledArrivalDate ISO 8601 complete calendar date in format \"YYYY-MM-DD\" 2020-11-01 scheduledArrivalTime ISO 8601 time with offset of the scheduled arrival. 07:45+02:00 arrivalArea Area to which the flight is arriving. 3 arrivalGate Gate to which the flight is arriving. 2A arrivalTerminal Terminal to which the flight is arriving. 1 arrivalAirportCode IATA code of the arrival airport. LAX arrivalAirportName Name of the arrival airport, please avoid using the word Aiport . Los Angeles arrivalCityName Name of the arrival city. Los Angeles arrivalCountryCode ISO alpha-2 arrival country code. US arrivalCountryName Name of the arrival country. United States of America","title":"Airlines"},{"location":"integration/flights/#example-airlines-csv","text":"airline.csv","title":"Example Airlines CSV"},{"location":"integration/flights/#airport","text":"For airport client flights are bounded to arrivals or departures. If necessary Searchperience will handle the transformation into a complete flight route. FieldName Description Example flightNumber Primary flight number. AB0948 codeShareFlightNumber Comma separated list of code share flight numbers. AB045,AB124 scheduledDate ISO 8601 complete calendar date in format \"YYYY-MM-DD\" 2020-11-01 scheduledTime ISO 8601 time with offset arrival/departure (depend on direction) 15:45+02:00 area Area of arrival or departure. 1 terminal Terminal which the flight arrives or departs. 1 direction Arrival A or Departure D flight. A gate Gate of arrival or departure. 2D airlineCode IATA airline code. BA airlineName Complete name of the airline. British Airways airportCode IATA code of the airport. SIN airportName Name of the airport, please avoid using the word Aiport . Singapore Changi cityName Name of the city. Singapore countryCode ISO alpha-2 country departure code. SG countryName Name of the departure country. Singapore","title":"Airport"},{"location":"integration/flights/#example-airport-csv","text":"airport.csv","title":"Example Airport CSV"},{"location":"integration/indexing/crawling/","text":"Crawling allows Searchperience to index web documents and offer them as part of search results. Crawling a document \u00b6 Users can use two different methods to set up which pages should be crawled: through the Cockpit UI . through the Cockpit API . Configuration \u00b6 Searchperience will just crawl configured allowed sites. Searchperience will crawl individual pages or follow any links in a sitemap.xml . Searchperience crawler respects the no-index indicator ` .","title":"Crawling"},{"location":"integration/indexing/crawling/#crawling-a-document","text":"Users can use two different methods to set up which pages should be crawled: through the Cockpit UI . through the Cockpit API .","title":"Crawling a document"},{"location":"integration/indexing/crawling/#configuration","text":"Searchperience will just crawl configured allowed sites. Searchperience will crawl individual pages or follow any links in a sitemap.xml . Searchperience crawler respects the no-index indicator ` .","title":"Configuration"},{"location":"integration/indexing/sqs/","text":"Through the Amazon Simple Queue Service SQS it is possible to send document information to the Searchperience Indexer. Based on the type field, the document will be added to or removed from Searchperience. Add Message \u00b6 [ { \"foreignId\": \"talisker-en_GB-master\", \"source\": \"masterdataportal\", \"type\": \"add\", \"mimeType\": \"application/json+sp-brand\", \"payload\": { \"foreignId\": \"talisker-en_GB-master\", \"code\": \"talisker\", \"channel\": \"master\", \"media\": [ { \"reference\": \"/media/images/86/2018-11-30-08_37_26-Flamingo-Blazing-fast-modern-commerce-experience-layer-perfect-for-your-micr.png\", \"usage\": \"logo\", \"mimeType\": \"image/jpg\", \"type\": \"image-api\", \"title\": \"Front View\" } ], \"locale\": \"en_GB\", \"type\": \"default\", \"title\": \"Talisker\", \"formatVersion\": 1 } } ] Delete Message \u00b6 { \"foreignId\": \"walker-and-hall_100169-en_GB-master\", \"source\": \"pim\", \"type\": \"delete\", \"mimeType\": \"application/json+sp-product\" } Json Schema validation of SQS Messages \u00b6 During pull process from SQS queue, each message and its payload goes throw JSON schema validation. There is two step of validation: * Message structure validation; validates by indexer system core basic fields required by sqs.json schema depending on message type (add/delete) Danger In case of SQS message format validation error, the whole SQS message processing will be skipped and marked as delete from SQS queue , no documents will be processed at all out of not valid SQS message. Field name Field type Required Message type foreignId string yes add/delete source string yes add/delete type string yes add/delete mimeType string yes add/delete payload object yes add sqs.json schema: \u00b6 { \"description\": \"SQS message schema\", \"$schema\": \"http://json-schema.org/draft-06/schema#\", \"definitions\": { \"sqsDeleteMessage\": { \"type\": \"object\", \"required\": [\"foreignId\", \"source\", \"type\", \"mimeType\"], \"properties\": { \"foreignId\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"source\": { \"type\": \"string\" }, \"type\": { \"type\": \"string\", \"enum\": [\"delete\"] }, \"mimeType\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_+\\/.]+)$\" } } }, \"sqsAddMessage\": { \"type\": \"object\", \"required\": [\"foreignId\", \"source\", \"type\", \"mimeType\", \"payload\"], \"properties\": { \"foreignId\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"source\": { \"type\": \"string\" }, \"type\": { \"type\": \"string\", \"enum\": [\"add\"] }, \"mimeType\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_+\\/.]+)$\" }, \"payload\": { \"type\": \"object\" } } }, \"sqsMessage\": { \"oneOf\": [ { \"$ref\": \"#/definitions/sqsAddMessage\" }, { \"$ref\": \"#/definitions/sqsDeleteMessage\" } ] }, \"sqsMessageArray\": { \"type\": \"array\", \"minItems\": 1, \"items\": { \"$ref\": \"#/definitions/sqsMessage\" } } }, \"oneOf\": [ { \"$ref\": \"#/definitions/sqsMessage\" }, { \"$ref\": \"#/definitions/sqsMessageArray\" } ] } Payload validation; validates project specific document type, like brand, location, product etc. against defined schema. Danger In case of payload validation error, the document will be skipped and not processed at all, no documents will be added to the indexer DB and to elasticsearch. brand.json schema validation example: \u00b6 { \"description\": \"Brand schema\", \"$schema\": \"http://json-schema.org/draft-06/schema#\", \"required\": [\"foreignId\", \"code\", \"channel\", \"locale\", \"title\"], \"properties\": { \"foreignId\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"code\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"channel\": { \"type\": \"string\" }, \"shortDescription\": { \"type\": \"string\" }, \"media\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"reference\": { \"type\": \"string\" }, \"usage\": { \"type\": \"string\" }, \"mimeType\": { \"type\": \"string\" }, \"type\": { \"type\": \"string\" }, \"title\": { \"type\": \"string\" } } } }, \"locale\": { \"type\": \"string\" }, \"title\": { \"type\": \"string\" }, \"formatVersion\": { \"type\": \"integer\" }, \"teaser\": { \"type\": \"string\" } } } All information about skipped messages or documents with not valid payload is logged.","title":"SQS"},{"location":"integration/indexing/sqs/#add-message","text":"[ { \"foreignId\": \"talisker-en_GB-master\", \"source\": \"masterdataportal\", \"type\": \"add\", \"mimeType\": \"application/json+sp-brand\", \"payload\": { \"foreignId\": \"talisker-en_GB-master\", \"code\": \"talisker\", \"channel\": \"master\", \"media\": [ { \"reference\": \"/media/images/86/2018-11-30-08_37_26-Flamingo-Blazing-fast-modern-commerce-experience-layer-perfect-for-your-micr.png\", \"usage\": \"logo\", \"mimeType\": \"image/jpg\", \"type\": \"image-api\", \"title\": \"Front View\" } ], \"locale\": \"en_GB\", \"type\": \"default\", \"title\": \"Talisker\", \"formatVersion\": 1 } } ]","title":"Add Message"},{"location":"integration/indexing/sqs/#delete-message","text":"{ \"foreignId\": \"walker-and-hall_100169-en_GB-master\", \"source\": \"pim\", \"type\": \"delete\", \"mimeType\": \"application/json+sp-product\" }","title":"Delete Message"},{"location":"integration/indexing/sqs/#json-schema-validation-of-sqs-messages","text":"During pull process from SQS queue, each message and its payload goes throw JSON schema validation. There is two step of validation: * Message structure validation; validates by indexer system core basic fields required by sqs.json schema depending on message type (add/delete) Danger In case of SQS message format validation error, the whole SQS message processing will be skipped and marked as delete from SQS queue , no documents will be processed at all out of not valid SQS message. Field name Field type Required Message type foreignId string yes add/delete source string yes add/delete type string yes add/delete mimeType string yes add/delete payload object yes add","title":"Json Schema validation of SQS Messages"},{"location":"integration/indexing/sqs/#sqsjson-schema","text":"{ \"description\": \"SQS message schema\", \"$schema\": \"http://json-schema.org/draft-06/schema#\", \"definitions\": { \"sqsDeleteMessage\": { \"type\": \"object\", \"required\": [\"foreignId\", \"source\", \"type\", \"mimeType\"], \"properties\": { \"foreignId\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"source\": { \"type\": \"string\" }, \"type\": { \"type\": \"string\", \"enum\": [\"delete\"] }, \"mimeType\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_+\\/.]+)$\" } } }, \"sqsAddMessage\": { \"type\": \"object\", \"required\": [\"foreignId\", \"source\", \"type\", \"mimeType\", \"payload\"], \"properties\": { \"foreignId\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"source\": { \"type\": \"string\" }, \"type\": { \"type\": \"string\", \"enum\": [\"add\"] }, \"mimeType\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_+\\/.]+)$\" }, \"payload\": { \"type\": \"object\" } } }, \"sqsMessage\": { \"oneOf\": [ { \"$ref\": \"#/definitions/sqsAddMessage\" }, { \"$ref\": \"#/definitions/sqsDeleteMessage\" } ] }, \"sqsMessageArray\": { \"type\": \"array\", \"minItems\": 1, \"items\": { \"$ref\": \"#/definitions/sqsMessage\" } } }, \"oneOf\": [ { \"$ref\": \"#/definitions/sqsMessage\" }, { \"$ref\": \"#/definitions/sqsMessageArray\" } ] } Payload validation; validates project specific document type, like brand, location, product etc. against defined schema. Danger In case of payload validation error, the document will be skipped and not processed at all, no documents will be added to the indexer DB and to elasticsearch.","title":"sqs.json schema:"},{"location":"integration/indexing/sqs/#brandjson-schema-validation-example","text":"{ \"description\": \"Brand schema\", \"$schema\": \"http://json-schema.org/draft-06/schema#\", \"required\": [\"foreignId\", \"code\", \"channel\", \"locale\", \"title\"], \"properties\": { \"foreignId\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"code\": { \"type\": \"string\", \"pattern\": \"^([A-Za-z0-9-_]+)$\" }, \"channel\": { \"type\": \"string\" }, \"shortDescription\": { \"type\": \"string\" }, \"media\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"reference\": { \"type\": \"string\" }, \"usage\": { \"type\": \"string\" }, \"mimeType\": { \"type\": \"string\" }, \"type\": { \"type\": \"string\" }, \"title\": { \"type\": \"string\" } } } }, \"locale\": { \"type\": \"string\" }, \"title\": { \"type\": \"string\" }, \"formatVersion\": { \"type\": \"integer\" }, \"teaser\": { \"type\": \"string\" } } } All information about skipped messages or documents with not valid payload is logged.","title":"brand.json schema validation example:"},{"location":"integration/om3/akeneo/","text":"In OM3 product and category data comes from Akeneo PIM. Flow \u00b6 graph LR A[Retailer] -- Product data and media --> B(Akeneo S3) subgraph PIM B -- Import --> C(Akeneo) C -- Export --> D(Akeneo S3) end subgraph Indexing-PIM D --> E(Indexing PIM) end Akeneo product exports \u00b6 Akeneo PIM exports data as CSV in the Akeneo bucket. Exports can be found under akeneo-s3/tenant/export/ Delta \u00b6 Tip Delta exports do not pick up changes to attributes or categories. Just product information. Frequency Description Every 15 min This export only includes products added / modified in the last 15 min. The result of this export includes a delta_<timestamp>.csv file. Full \u00b6 Tip As it names states, full exports include the entire data in Akeneo. Attributes, Categories and so on will only update in Searchperience after this export takes place. Frequency Description Every 2 hours This export includes all information in Akeneo PIM. The result of this export includes a product.csv file among other files which contain categories, attributes, etc. Indexing PIM \u00b6 An integration application, which is responsible to read the CSV export from Akeneo PIM and convert product and categories information in the Searchperience format. Indexing PIM does multiple transformations / enrichments to the Akeneo PIM data, some include: Each product is pushed for every channel, every language and every currency to Searchperience. Configurable products are aggregated and pushed as a single document to Searchperience. Indexing PIM does multiple validations to the Akeneo PIM data, which includes: Products must be assigned to a category which is a child of the main channel. Products must have a brand which is also available in MasterDataPortal. Most importantly, the brand code in Akeneo PIM and MasterDataPortal have to match exactly . Also, if MasterDataPortal is not reachable (i.e. network error) while indexing a product, the validation will fail and this product will not be imported. Configurable products must at least have one variant. Categories have to be assigned as children of the main channel. All attributes have to be assigned to a product family. Simple products should have stock information or the attribute alwaysInStock must be true . Danger If one of the validation fails the product will not be transformed and therefore not relayed to Searchperience. Indexing PIM is actively listening for changes in stock. Stock update message body example: { \"data\": [ { \"quantity\": 12, \"sku\": \"168277\", \"sourceCode\": \"onairport-t2-landside-aoe-2\", \"sourceRetailerCode\": \"3sixty\" } ] } In case of a stock update, it will automatically reindex the product. Jobs \u00b6 Every 2 minutes Indexing PIM will trigger a new job. The jobs follow this logic: graph TD A(Job starts) --> C{product.csv changed?<br/>Full export} C -->|Yes| D[Start indexing products & categories] C -->|No| E{New `delta_<timestamp>.csv`? <br/>Delta export} E -->|Yes| F[Start updating info of changed products] E -->|No| G[Start processing stock updates if any] Trigger an indexing manually \u00b6 In case there is no change in the product information and you want to trigger a new export because: MasterDataPortal was not reachable when indexing the product.csv You want to update stock information on all products Go to the sp-api-documentation, choose Indexing PIM (picker upper right) and trigger /api/transfer/products for products /api/transfer/categories for categories Compared to the jobs that are executed regularly, the ETag (file identifier) is ignored and a full export is started immediately. As an alternative you can trigger the endpoint /api/reset . This will delete the ETag information of the CSV files and the next job will trigger as a full export.","title":"Akeneo"},{"location":"integration/om3/akeneo/#flow","text":"graph LR A[Retailer] -- Product data and media --> B(Akeneo S3) subgraph PIM B -- Import --> C(Akeneo) C -- Export --> D(Akeneo S3) end subgraph Indexing-PIM D --> E(Indexing PIM) end","title":"Flow"},{"location":"integration/om3/akeneo/#akeneo-product-exports","text":"Akeneo PIM exports data as CSV in the Akeneo bucket. Exports can be found under akeneo-s3/tenant/export/","title":"Akeneo product exports"},{"location":"integration/om3/akeneo/#delta","text":"Tip Delta exports do not pick up changes to attributes or categories. Just product information. Frequency Description Every 15 min This export only includes products added / modified in the last 15 min. The result of this export includes a delta_<timestamp>.csv file.","title":"Delta"},{"location":"integration/om3/akeneo/#full","text":"Tip As it names states, full exports include the entire data in Akeneo. Attributes, Categories and so on will only update in Searchperience after this export takes place. Frequency Description Every 2 hours This export includes all information in Akeneo PIM. The result of this export includes a product.csv file among other files which contain categories, attributes, etc.","title":"Full"},{"location":"integration/om3/akeneo/#indexing-pim","text":"An integration application, which is responsible to read the CSV export from Akeneo PIM and convert product and categories information in the Searchperience format. Indexing PIM does multiple transformations / enrichments to the Akeneo PIM data, some include: Each product is pushed for every channel, every language and every currency to Searchperience. Configurable products are aggregated and pushed as a single document to Searchperience. Indexing PIM does multiple validations to the Akeneo PIM data, which includes: Products must be assigned to a category which is a child of the main channel. Products must have a brand which is also available in MasterDataPortal. Most importantly, the brand code in Akeneo PIM and MasterDataPortal have to match exactly . Also, if MasterDataPortal is not reachable (i.e. network error) while indexing a product, the validation will fail and this product will not be imported. Configurable products must at least have one variant. Categories have to be assigned as children of the main channel. All attributes have to be assigned to a product family. Simple products should have stock information or the attribute alwaysInStock must be true . Danger If one of the validation fails the product will not be transformed and therefore not relayed to Searchperience. Indexing PIM is actively listening for changes in stock. Stock update message body example: { \"data\": [ { \"quantity\": 12, \"sku\": \"168277\", \"sourceCode\": \"onairport-t2-landside-aoe-2\", \"sourceRetailerCode\": \"3sixty\" } ] } In case of a stock update, it will automatically reindex the product.","title":"Indexing PIM"},{"location":"integration/om3/akeneo/#jobs","text":"Every 2 minutes Indexing PIM will trigger a new job. The jobs follow this logic: graph TD A(Job starts) --> C{product.csv changed?<br/>Full export} C -->|Yes| D[Start indexing products & categories] C -->|No| E{New `delta_<timestamp>.csv`? <br/>Delta export} E -->|Yes| F[Start updating info of changed products] E -->|No| G[Start processing stock updates if any]","title":"Jobs"},{"location":"integration/om3/akeneo/#trigger-an-indexing-manually","text":"In case there is no change in the product information and you want to trigger a new export because: MasterDataPortal was not reachable when indexing the product.csv You want to update stock information on all products Go to the sp-api-documentation, choose Indexing PIM (picker upper right) and trigger /api/transfer/products for products /api/transfer/categories for categories Compared to the jobs that are executed regularly, the ETag (file identifier) is ignored and a full export is started immediately. As an alternative you can trigger the endpoint /api/reset . This will delete the ETag information of the CSV files and the next job will trigger as a full export.","title":"Trigger an indexing manually"},{"location":"integration/om3/ecommerce-api/","text":"The endpoints of the Searchperience Frontend are usually internally and used in OM3 only. However, the Searchperience Frontend could also deliver types like products and categories via external endpoints. These external endpoints are exposed via Ambassador which is an API gateway that maps each endpoint with a prefix, e.g. /ecommerce/search , to the /external endpoint(s) of the Searchperience Frontend. Products \u00b6 The external endpoint delivers products in the Google product format . Usually, the product endpoints in OM3 deliver simple and configurable products . Configurable products contain more than one variant of a product, e.g. different sizes or colors. The external endpoint only delivers simple products that means that each variant of a configurable product is also exposed as a simple product. To identify all variants that belong to the same product, these products share an identifier which is called itemGroupId . The products that have an attribute itemGroupId should also have one of these attributes: color, sizes, or gender.","title":"Ecommerce API"},{"location":"integration/om3/ecommerce-api/#products","text":"The external endpoint delivers products in the Google product format . Usually, the product endpoints in OM3 deliver simple and configurable products . Configurable products contain more than one variant of a product, e.g. different sizes or colors. The external endpoint only delivers simple products that means that each variant of a configurable product is also exposed as a simple product. To identify all variants that belong to the same product, these products share an identifier which is called itemGroupId . The products that have an attribute itemGroupId should also have one of these attributes: color, sizes, or gender.","title":"Products"},{"location":"integration/om3/imageservice/","text":"How to build image links? \u00b6 Searchperience provides images as references, so it is up to the consumer of the API to build up the URL if they want to get the image. Images in OM3 are directly served by the image service. Image URL schema \u00b6 The URL is composed of the following items Path element Description Domain The Domain of the OM3 image service Source Application inside OM3 from where the image comes from e.g. pim or mdp . More info in Image source Signature If using one of the default image sizes just use defaults , otherwise consult with us. Size Use one of the default image sizes or a custom ones with the general form {width}x{height} e.g. 10x150 Media Reference String representing the location of the image in OM3. This is the string the Searchperience delivers. In general, the URL schema looks like this: https://<domain>/<source>/<signature>/<image_size>/<media_reference> Examples # Image with `defaults` signature https://images.om3.cloud/pim/defaults/400x/catalog/b/7/0/b/b70bd455bc6b8fbc070d573c67890689_pupm_071t_c01_79_hr.jpg # Image with custom size https://images.om3.cloud/pim/tMNNTLwq1uG2K_8G0DKtoXi1q9WW5jf-JOXiIvSvksI=/10x150/catalog/b/7/0/b/b70bd455bc6b8fbc070d573c67890689_pupm_071t_c01_79_hr.jpg Source \u00b6 Entity Type Source OM3 Application Brand mdp MasterDataPortal Location mdp MasterDataPortal Product pim Akeneo Promotion cockpit Cockpit Retailer mdp MasterDataPortal Barcode barcode -- Signature \u00b6 The signature allows to define which size the image should have. You can access images with the defaults signature when using predefined sizes. E.g. \"200x\", \"300x\", \"400x\" or \"800x\". For custom sizes you need a signed request. Please consult us for more information about signatures. Image size \u00b6 !!! note These are the default image sizes. It is possible to use custom ones, but then the signature cannot be defaults . 100x 200x 300x 400x 800x Media Reference \u00b6 The media reference indicates the path where the image is stored in the Amazon S3 bucket. For most document types one can directly use the content of the reference field in the media object. However, for documents with source pim a prefix is necessary PIM Document Type Prefix product /catalog category /category Examples \u00b6 Document Type Reference Image Link category 8/2/7/5/8275b21eb93d74ed4ffeac43fb2539d7_banner_.jpg https://images.om3/pim/defaults/400x/category/8/2/7/5/8275b21eb93d74ed4ffeac43fb2539d7_banner_.jpg product e/a/e/4/eae4685a25fbd7da95352d077b3183c3_80246531.jpg https://images.om3/pim/defaults/300x/catalog/e/a/e/4/eae4685a25fbd7da95352d077b3183c3_80246531.jpg brand /media/images/362/brand_logo_2019_01.png https://images.om3/mdp/lN3rodS1TAIPAR4L8zbatoUbxDaD0v1W1fJYzt4wYNg=/320x100/media/images/362/brand_logo_2019_01.png retailer /media/images/8/cat.jpg https://images.om3/mdp/b7zRILFhjEip2tTJyzhYBu1jTt_IAS9q3HgPMfPL1qY=/660x550/media/images/8/1-1/w/660/cat.jpg cockpit 09dd0538a5e81abf873957a3d545a12a8f94560e/promo.jpg https://images.om3/cockpit/defaults/400x/09dd0538a5e81abf873957a3d545a12a8f94560e/promo.jpg","title":"Image Service"},{"location":"integration/om3/imageservice/#how-to-build-image-links","text":"Searchperience provides images as references, so it is up to the consumer of the API to build up the URL if they want to get the image. Images in OM3 are directly served by the image service.","title":"How to build image links?"},{"location":"integration/om3/imageservice/#image-url-schema","text":"The URL is composed of the following items Path element Description Domain The Domain of the OM3 image service Source Application inside OM3 from where the image comes from e.g. pim or mdp . More info in Image source Signature If using one of the default image sizes just use defaults , otherwise consult with us. Size Use one of the default image sizes or a custom ones with the general form {width}x{height} e.g. 10x150 Media Reference String representing the location of the image in OM3. This is the string the Searchperience delivers. In general, the URL schema looks like this: https://<domain>/<source>/<signature>/<image_size>/<media_reference> Examples # Image with `defaults` signature https://images.om3.cloud/pim/defaults/400x/catalog/b/7/0/b/b70bd455bc6b8fbc070d573c67890689_pupm_071t_c01_79_hr.jpg # Image with custom size https://images.om3.cloud/pim/tMNNTLwq1uG2K_8G0DKtoXi1q9WW5jf-JOXiIvSvksI=/10x150/catalog/b/7/0/b/b70bd455bc6b8fbc070d573c67890689_pupm_071t_c01_79_hr.jpg","title":"Image URL schema"},{"location":"integration/om3/imageservice/#source","text":"Entity Type Source OM3 Application Brand mdp MasterDataPortal Location mdp MasterDataPortal Product pim Akeneo Promotion cockpit Cockpit Retailer mdp MasterDataPortal Barcode barcode --","title":"Source"},{"location":"integration/om3/imageservice/#signature","text":"The signature allows to define which size the image should have. You can access images with the defaults signature when using predefined sizes. E.g. \"200x\", \"300x\", \"400x\" or \"800x\". For custom sizes you need a signed request. Please consult us for more information about signatures.","title":"Signature"},{"location":"integration/om3/imageservice/#image-size","text":"!!! note These are the default image sizes. It is possible to use custom ones, but then the signature cannot be defaults . 100x 200x 300x 400x 800x","title":"Image size"},{"location":"integration/om3/imageservice/#media-reference","text":"The media reference indicates the path where the image is stored in the Amazon S3 bucket. For most document types one can directly use the content of the reference field in the media object. However, for documents with source pim a prefix is necessary PIM Document Type Prefix product /catalog category /category","title":"Media Reference"},{"location":"integration/om3/imageservice/#examples","text":"Document Type Reference Image Link category 8/2/7/5/8275b21eb93d74ed4ffeac43fb2539d7_banner_.jpg https://images.om3/pim/defaults/400x/category/8/2/7/5/8275b21eb93d74ed4ffeac43fb2539d7_banner_.jpg product e/a/e/4/eae4685a25fbd7da95352d077b3183c3_80246531.jpg https://images.om3/pim/defaults/300x/catalog/e/a/e/4/eae4685a25fbd7da95352d077b3183c3_80246531.jpg brand /media/images/362/brand_logo_2019_01.png https://images.om3/mdp/lN3rodS1TAIPAR4L8zbatoUbxDaD0v1W1fJYzt4wYNg=/320x100/media/images/362/brand_logo_2019_01.png retailer /media/images/8/cat.jpg https://images.om3/mdp/b7zRILFhjEip2tTJyzhYBu1jTt_IAS9q3HgPMfPL1qY=/660x550/media/images/8/1-1/w/660/cat.jpg cockpit 09dd0538a5e81abf873957a3d545a12a8f94560e/promo.jpg https://images.om3/cockpit/defaults/400x/09dd0538a5e81abf873957a3d545a12a8f94560e/promo.jpg","title":"Examples"},{"location":"integration/om3/marketplace-frontend/","text":"How to build links to products detail page (PDP)? \u00b6 In general the URLs are build based on the data you will find in each response. The base domain/url is fixed and not part of the response, so you need to configure it per environment as default value. As convention we do use the following prefix for products https://example.com/en/product/<value> URL Components \u00b6 The URL we have to build consists of the following components: Segment Example Value Description lang en-US 4 char language code entity product the entity which should be shown, in this case it will be always product urlSlug super-product-demo Speaking product name prepared to use as part of the URL (Akeneo field) marketplaceCode c2a4d5037fb0688a value representing the product key containing the retailer name and the retailer sku (Akeneo field) variantMarketplaceCode c2a4d5037fb0688a value representing the product marketplaceCode of a simple which is assigned to an configurable (Akeneo field) Simple product link \u00b6 When building links for single products. Identified by the productType : simple attribute. Schema: /<lang>/<entity>/<urlSlug>_<marketplaceCode> Example: /en-US/product/jellycat-london-bashful-otter-medium_0ea6021d93877677 Configurable product link \u00b6 When building links for configurable products. Identified by the productType : configurable attribute. Schema: /<lang>/<entity>/<urlSlug>_<marketplaceCode>-<variantMarketplaceCode> Example: /en-US/product/jellycat-london-bashful-otter-medium_0ea6021d9387767-de149b1c2f05 If results.product.hits.document.teaserData.selectedVariant is not set, use the form of the productType=simple Brand link \u00b6 For brands you should use https://example.com/en/brands/ as base domain/path, and append the value out of results.brand.hits.document.code as value to build for example: https://example.com/en/brands/apple Retailer link \u00b6 For retailer you should use https://example.com/en/retailer/ as base domain/path, and append the value out of results.retailer.hits.document.code as value to build for example: https://example.com/en/retailer/apple","title":"Marketplace Frontend"},{"location":"integration/om3/marketplace-frontend/#how-to-build-links-to-products-detail-page-pdp","text":"In general the URLs are build based on the data you will find in each response. The base domain/url is fixed and not part of the response, so you need to configure it per environment as default value. As convention we do use the following prefix for products https://example.com/en/product/<value>","title":"How to build links to products detail page (PDP)?"},{"location":"integration/om3/marketplace-frontend/#url-components","text":"The URL we have to build consists of the following components: Segment Example Value Description lang en-US 4 char language code entity product the entity which should be shown, in this case it will be always product urlSlug super-product-demo Speaking product name prepared to use as part of the URL (Akeneo field) marketplaceCode c2a4d5037fb0688a value representing the product key containing the retailer name and the retailer sku (Akeneo field) variantMarketplaceCode c2a4d5037fb0688a value representing the product marketplaceCode of a simple which is assigned to an configurable (Akeneo field)","title":"URL Components"},{"location":"integration/om3/marketplace-frontend/#simple-product-link","text":"When building links for single products. Identified by the productType : simple attribute. Schema: /<lang>/<entity>/<urlSlug>_<marketplaceCode> Example: /en-US/product/jellycat-london-bashful-otter-medium_0ea6021d93877677","title":"Simple product link"},{"location":"integration/om3/marketplace-frontend/#configurable-product-link","text":"When building links for configurable products. Identified by the productType : configurable attribute. Schema: /<lang>/<entity>/<urlSlug>_<marketplaceCode>-<variantMarketplaceCode> Example: /en-US/product/jellycat-london-bashful-otter-medium_0ea6021d9387767-de149b1c2f05 If results.product.hits.document.teaserData.selectedVariant is not set, use the form of the productType=simple","title":"Configurable product link"},{"location":"integration/om3/marketplace-frontend/#brand-link","text":"For brands you should use https://example.com/en/brands/ as base domain/path, and append the value out of results.brand.hits.document.code as value to build for example: https://example.com/en/brands/apple","title":"Brand link"},{"location":"integration/om3/marketplace-frontend/#retailer-link","text":"For retailer you should use https://example.com/en/retailer/ as base domain/path, and append the value out of results.retailer.hits.document.code as value to build for example: https://example.com/en/retailer/apple","title":"Retailer link"},{"location":"integration/om3/masterdataportal/","text":"In OM3 retailer , brand and location data comes from MasterDataPortal (MDP). Flow \u00b6 graph LR A[Client] -- Data and media --> B(MasterDataPortal) B -- API Crawling --> C(Importer) Importer \u00b6 An integration application, which is responsible to crawl the MasterDataPortal API and converts retailer, brand and location information in the Searchperience format. Info Importer just crawls MDP entities that are publicly available i.e. internal = false Crawling \u00b6 Frequency Description Every 1 hour All entities configured - depends on the project - are crawled and updated. Updates \u00b6 In case of an update MDP will send a message to importer indicating that the updated entity should be crawled again. It should take around 10 min to see the changes in Searchperience API.","title":"Master Data Portal"},{"location":"integration/om3/masterdataportal/#flow","text":"graph LR A[Client] -- Data and media --> B(MasterDataPortal) B -- API Crawling --> C(Importer)","title":"Flow"},{"location":"integration/om3/masterdataportal/#importer","text":"An integration application, which is responsible to crawl the MasterDataPortal API and converts retailer, brand and location information in the Searchperience format. Info Importer just crawls MDP entities that are publicly available i.e. internal = false","title":"Importer"},{"location":"integration/om3/masterdataportal/#crawling","text":"Frequency Description Every 1 hour All entities configured - depends on the project - are crawled and updated.","title":"Crawling"},{"location":"integration/om3/masterdataportal/#updates","text":"In case of an update MDP will send a message to importer indicating that the updated entity should be crawled again. It should take around 10 min to see the changes in Searchperience API.","title":"Updates"},{"location":"integration/om3/priceengine/","text":"Build product loyalty data for the request \u00b6 To build product variant loyalty data we are requesting the Price Engine with request values depending on the product variant attribute field variant.attributes.pointsPayment . If it's set to true request values are build with optional attributes: variant.attributes.pointRatio variant.attributes.pointsPrice variant.attributes.minPointsRequired variant.attributes.maxPointsRequired","title":"Price Engine"},{"location":"integration/om3/priceengine/#build-product-loyalty-data-for-the-request","text":"To build product variant loyalty data we are requesting the Price Engine with request values depending on the product variant attribute field variant.attributes.pointsPayment . If it's set to true request values are build with optional attributes: variant.attributes.pointRatio variant.attributes.pointsPrice variant.attributes.minPointsRequired variant.attributes.maxPointsRequired","title":"Build product loyalty data for the request"},{"location":"integration/tracking/google-tag-integration/","text":"To be able to integrate Searchperience Tracker with Enhanced Ecommerce events of Google Tag Manager ( GTM ) we need to do some manual steps: Include the Searchperience Tracking Tag Add User-Defined Variables Configure Searchperience Tag Include Searchperience Tracking Tag \u00b6 Include the tag from the Template Gallery . For instructions please check the Google documentation . Navigate to the 'Permission' tab and fill 'Accesses Local Storage' with the key spUser with read and write permissions. 'Reads cookie value(s)' for specific cookies i.e. spSession and spUser . 'Reads URL' to Any 'Reads Data Layer' with keys event , ecommerce.* , userId . 'Sends Pixels' with the Searchperience Tracker URL. 'Sets a cookie value' for the cookies spSession and spUser with wildcard * Domain and Path and Any Value for Session and Secure. Binding from GTM to SP Tracker events GTM Event Type SP Tracker Event Name Description GTM Enhanced Ecommerce productClick click Measuring Product Clicks productDetailImpression view Measuring Views of Product Details addToCart addToCart Measuring Additions or Removals from a Shopping Cart purchase purchase Measuring Purchases productImpression search Used in combination with search query and Measuring Product Impressions The template is also available in GitHub . Add User-Defined Variables \u00b6 The custom tag template \"Searchperience Tracking\" requires some user-defined variables in order to track events. Go to Variables tab in Google tag manager and click \"New\" under User-Defined Variables. More info about User-defined variable types Create variables described below: SP Tracker URL \u00b6 Variable Name Type Description spTrackerUrl Constant Used to configure the SP Tracker URL Value: e.g. https://search-tracker.krisshop.com/ SP User Cookie \u00b6 Variable Name Type Description spUserCookie Custom JavaScript Used to configure a user cookie. Custom JavaScript code that returns a UUID. Value: function() { var uuid = function(a) { return a?(0|Math.random()*16).toString(16):(\"\"+1e7+-1e3+-4e3+-8e3+-1e11).replace(/1|0/g,uuid) }; return uuid(); } SP User Session \u00b6 Variable Name Type Description spUserSession Custom JavaScript Used to configure a user session. Custom JavaScript code that returns a UUID. Value: function() { var uuid = function(a) { return a?(0|Math.random()*16).toString(16):(\"\"+1e7+-1e3+-4e3+-8e3+-1e11).replace(/1|0/g,uuid) }; return uuid(); } Notice spUserCookie and spUserSession return unique values during event triggering. Variable type is 'Custom Javascript', the reason for that: Tag Template Sandboxed JavaScript API is very limited, for instance to generate a UUID we need Math.random() which is not available in the sandbox. Configure Searchperience Tracking Tag \u00b6 At this step we need to create a new tag in GTM workspace and configure it to use our imported custom tag template. Assign variables to be able to use values in the template. Add Trigger to make our tag firing. Tag Configuration \u00b6 In GTM workspace go to 'Tag' section and click 'New' button. Click on 'Tag Configuration' area to choose a tag type. More about tag types . Scroll the list to the 'Custom' section and choose 'Searchperience Tracking' custom template ( Create a Custom Tag Template ). Name it properly like 'Searchperience Tracking'. Assign variables \u00b6 Clicking on 'Plus' button right to the input field (the built-in and user-defined variables list will appear) and select their corresponding variables that we created. Notice Event type must be a built-in variable Event - contains event name, we use it in our custom tag template tracking logic to map to sp-tracker events . Triggering \u00b6 Choose a trigger to make a tag fire. More about triggers . We should use an existing trigger depending on the environment: ' Enhanced Ecommerce Event INTEGRATION ' (for testing) or ' Enhanced Ecommerce Event PRODUCTION '. Notice ' Enhanced Ecommerce Event <environment> ' it's 'Custom Event' type trigger configured to track all eCommerce events. Save it and go back to main screen. Testing changes \u00b6 Before submit changes by clicking 'Preview' mode you can preview and debug workspace by opening your site in a new browser tab. More about preview and debug containers . Apply changes \u00b6 Simply click on 'Submit' button in GTM workspace.","title":"Google Tag Integration"},{"location":"integration/tracking/google-tag-integration/#include-searchperience-tracking-tag","text":"Include the tag from the Template Gallery . For instructions please check the Google documentation . Navigate to the 'Permission' tab and fill 'Accesses Local Storage' with the key spUser with read and write permissions. 'Reads cookie value(s)' for specific cookies i.e. spSession and spUser . 'Reads URL' to Any 'Reads Data Layer' with keys event , ecommerce.* , userId . 'Sends Pixels' with the Searchperience Tracker URL. 'Sets a cookie value' for the cookies spSession and spUser with wildcard * Domain and Path and Any Value for Session and Secure. Binding from GTM to SP Tracker events GTM Event Type SP Tracker Event Name Description GTM Enhanced Ecommerce productClick click Measuring Product Clicks productDetailImpression view Measuring Views of Product Details addToCart addToCart Measuring Additions or Removals from a Shopping Cart purchase purchase Measuring Purchases productImpression search Used in combination with search query and Measuring Product Impressions The template is also available in GitHub .","title":"Include Searchperience Tracking Tag"},{"location":"integration/tracking/google-tag-integration/#add-user-defined-variables","text":"The custom tag template \"Searchperience Tracking\" requires some user-defined variables in order to track events. Go to Variables tab in Google tag manager and click \"New\" under User-Defined Variables. More info about User-defined variable types Create variables described below:","title":"Add User-Defined Variables"},{"location":"integration/tracking/google-tag-integration/#sp-tracker-url","text":"Variable Name Type Description spTrackerUrl Constant Used to configure the SP Tracker URL Value: e.g. https://search-tracker.krisshop.com/","title":"SP Tracker URL"},{"location":"integration/tracking/google-tag-integration/#sp-user-cookie","text":"Variable Name Type Description spUserCookie Custom JavaScript Used to configure a user cookie. Custom JavaScript code that returns a UUID. Value: function() { var uuid = function(a) { return a?(0|Math.random()*16).toString(16):(\"\"+1e7+-1e3+-4e3+-8e3+-1e11).replace(/1|0/g,uuid) }; return uuid(); }","title":"SP User Cookie"},{"location":"integration/tracking/google-tag-integration/#sp-user-session","text":"Variable Name Type Description spUserSession Custom JavaScript Used to configure a user session. Custom JavaScript code that returns a UUID. Value: function() { var uuid = function(a) { return a?(0|Math.random()*16).toString(16):(\"\"+1e7+-1e3+-4e3+-8e3+-1e11).replace(/1|0/g,uuid) }; return uuid(); } Notice spUserCookie and spUserSession return unique values during event triggering. Variable type is 'Custom Javascript', the reason for that: Tag Template Sandboxed JavaScript API is very limited, for instance to generate a UUID we need Math.random() which is not available in the sandbox.","title":"SP User Session"},{"location":"integration/tracking/google-tag-integration/#configure-searchperience-tracking-tag","text":"At this step we need to create a new tag in GTM workspace and configure it to use our imported custom tag template. Assign variables to be able to use values in the template. Add Trigger to make our tag firing.","title":"Configure Searchperience Tracking Tag"},{"location":"integration/tracking/google-tag-integration/#tag-configuration","text":"In GTM workspace go to 'Tag' section and click 'New' button. Click on 'Tag Configuration' area to choose a tag type. More about tag types . Scroll the list to the 'Custom' section and choose 'Searchperience Tracking' custom template ( Create a Custom Tag Template ). Name it properly like 'Searchperience Tracking'.","title":"Tag Configuration"},{"location":"integration/tracking/google-tag-integration/#assign-variables","text":"Clicking on 'Plus' button right to the input field (the built-in and user-defined variables list will appear) and select their corresponding variables that we created. Notice Event type must be a built-in variable Event - contains event name, we use it in our custom tag template tracking logic to map to sp-tracker events .","title":"Assign variables"},{"location":"integration/tracking/google-tag-integration/#triggering","text":"Choose a trigger to make a tag fire. More about triggers . We should use an existing trigger depending on the environment: ' Enhanced Ecommerce Event INTEGRATION ' (for testing) or ' Enhanced Ecommerce Event PRODUCTION '. Notice ' Enhanced Ecommerce Event <environment> ' it's 'Custom Event' type trigger configured to track all eCommerce events. Save it and go back to main screen.","title":"Triggering"},{"location":"integration/tracking/google-tag-integration/#testing-changes","text":"Before submit changes by clicking 'Preview' mode you can preview and debug workspace by opening your site in a new browser tab. More about preview and debug containers .","title":"Testing changes"},{"location":"integration/tracking/google-tag-integration/#apply-changes","text":"Simply click on 'Submit' button in GTM workspace.","title":"Apply changes"},{"location":"integration/tracking/javascript-tracking/","text":"Include the following snippet in the page footer right before the closing </body> tag: <script type=\"text/javascript\"> var ____tu = '___PROJECT_DOMAIN____/'; // server expecting the events var ____td = ____td || []; // can be left out var ____tq = ____tq || []; </script> You then include the JavaScript file: Through a </script> tag: <script type=\"text/javascript\" src=\"http://cnd.somewhere.aoe.host/t.min.js\"></script> Or through JavaScript: <script type=\"text/javascript\"> (function() { var tr = document.createElement('script'); tr.type = 'text/javascript'; tr.async = true; tr.src = 'http://cnd.somewhere.com/t.min.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(tr, s); })(); </script> Warning It is important to load the JavaScript file after the variables are initialized. For the integration following variables should be configured: Variable Description ____td Used to configure default values for events. This values will influence all events tracked (see example below). ____tq Queue array which provides the main API of the tracker described in the following parts. ____tu Used to configure the tracker's URL, which serves the JavaScript library and where events are saved. To configure and trigger actual events just push them to the queue - like this: // a \"click\" event for the item \"268543\" will be added to the tracking queue ____tq.push({item: 'apple_100252828_variant', itemmaster: 'apple_100252828-en_GB-master_foreignID', track: 'click', channel: 'master', locale: 'en_US'}); Event configuration \u00b6 The event description is build with an JavaScript object and some base properties: Name Description Default Multivalues Required when HTML element or CSS selector for the element which should be observed for events. document \u2717 \u2717 is Event type(s) which will trigger the tracking. fire \u2713 \u2717 given Condition(s) which need to be meat before an event is tracked. Conditions can be used in a asynchronous way. - \u2713 \u2717 use Enables to \"collect\" assets which are passed as information to the tracking. - \u2713 \u2717 track Describes the \"action\" value which is actually tracked. - \u2717 \u2713 A full example using all of the options could look like this: ____tq.push({when: 'button.green', is: 'clicked', track: 'click', use: 'itemmaster apple_100252828-en_GB-master_foreignID', ... }); Notice In case there is a when in the event object, an event will be triggered only after the referenced element is manipulated as described in the is property. Convenience aliases \u00b6 Name Description Default Multivalues Required item Alias for use: \"item apple_123_variant\" - no no itemmaster Alias for use: \"itemmaster apple_123_main\" - no no user Alias for use: \"user 123-435-123\" - no no query Alias for use: \"query xxxx\" - no no searchResults Alias for use: \"searchResults 1234,3456,5678\" - - no widget Alias for use: \"widget brandsByIds\" - - no brandCode Alias for use: \"brandCode xxxx\" - no no retailerCode Alias for use: \"retailerCode xxxx\" - no no categoryCodes Alias for use: \"categoryCodes aaa,bbb,ccc\" - no no channel Alias for use: \"channel xxxx\" - no no locale Alias for use: \"locale xxxx\" - no no referer Alias for use: \"referrer xxxx\" - no no An example using an alias could look like this: ____tq.push({ track : 'search', searchResults : \"foreignId_12,foreignId_34,foreignId_78\", query : 'someUserQuery', locale : 'en_US', channel: 'master', referer : 'homepage'}); Event types \u00b6 The options available for events depend on the setup of the specific event. The current options are described below. Variable Description blurred Is triggered when an element lost focus. clicked Is triggered when a click happens on an element. focussed Is triggered when an element gains focus. hovered over Is triggered when the cursor enters the elements bounding box. hovered out of Is triggered when the cursor leaves the elements bounding box. scrolled Is triggered when an element is scrolled. On \"normal\" pages all scroll events will originate from the \"document\" object. submitted Only relevant for <form> elements. changed Only relevant for <input> , <textarea> and <select> elements. loaded Alias for \"fire\" ready Alias for \"fire\" fire Just passes through the event processing and fires the tracking right away. The setting is used as default. Condition types \u00b6 The options available for conditions depend on the setup. The current options are described below. Condition Description XX times Makes sure that an event has been seen XX times before actually being tracked. Useful for scrolling and hovering related events. XXs delay Once triggered, it will delay the tracking for XX seconds. This can, e.g., be used to make sure that a user did not leave the page within a specific time frame. Useful when tracking view events. Asset types \u00b6 The options available for any assets depend on the setup of the specific tracker. Asset Description user XXX Uses the XXX value as the unique user identifier. item XXX Uses the XXX value as the item identifier. This value should be used to differentiate between the variants of a product (marketplaceCode). itemmaster XXX Uses the XXX value as the identifier for the main product (foreign ID). query XXX Uses the XXX value as the query parameter. searchResults XXX,YYY,ZZZ Uses XXX,YYY,ZZZ as the identifiers of a collection of products. Use comma separated non-spaced values. widget XX Uses the XX value as the widget alias, this value should be included when tracking widgets interactions. brandCode XX Uses the XX value as the brandCode of the product, this value should be included when possible. retailerCode XX Uses the XX value as the retailerCode of the product, this value should be included when possible. categoryCodes XXX,YYY,ZZZ Uses the XXX,YYY,ZZZ values as categories codes of the product, this value should be included when possible. channel XX Uses the XX value as the current channel, this value should be included when possible (just one). locale XX Uses the XX value as the locale for the event. referer XX Uses the XX value as the referrer for the action being tracked. For example, homepage (no specific schema atm) As already stated in a previous section, it is possible to use assets directly as properties in an event object. { ... use: 'item apple_100252828_variant' ... } == { ... item: 'apple_100252828_variant' ... } Events \u00b6 Event Description Necessary elements Optional elements addToCart Tracks the placement of a product in the shopping cart from any location. itemmaster , item , channel , locale user , brandCode , retailerCode , categoryCodes checkout Tracks a purchase event. It should be triggered when a purchase is most certain. [1] user , itemmaster , item , channel , locale brandCode , retailerCode , categoryCodes click Indicates that a product received a click. Relevant only when displaying a product teaser. itemmaster , channel , locale , user , referer search Indicates a search event. query , searchResults , channel , locale user , referer view Should be used when a user spends a certain amount of seconds on the product detail page. itemmaster , channel , locale user , brandCode , retailerCode , categoryCodes [1] In order to differentiate the channel/category/brand information on every single product, please create a request for each product with the corresponding itemmaster and item values. Events names & aliases \u00b6 Warning Any events with a invalid event name will return a BAD REQUEST error. Notice The event names that can be used for tracking can be found at http://sp-tracker.location.cloud/events . In order to differentiate between different interactions within the scope of the same event it is possible for the same event to have multiple aliases. For example: search : [ \"search\", \"livesearch\", \"mobilesearch\" ] This implies that one can use search , livesearch and mobilesearch track a search event. This helps us to get more specific metrics and improve our services. Examples \u00b6 # addToCart { when:'button.toBasket', is:'clicked', track:'addToCart', itemmaster:'apple_100252828-en_US-master', item:'apple_100252828_variant', brandCode:'blue', retailerCode:'TheRetailer', categoryCodes:'Technology,Technology.Travel', channel:'master', locale:'en_US' } # checkout { when:'pay.button', is:'clicked', track:'checkout', user:'some-id', itemmaster:'apple_100252828-en_US-master', item:'apple_100252828_variant', brandCode:'blue', retailerCode:'TheRetailer', categoryCodes:'Technology,Technology_Travel', channel:'master', locale:'en_US' } # click { when:'button.clicked', track:'click', itemmaster:'apple_100252828-en_US-master', channel:'master', locale:'en_US' } # widgetclick { when:'widget.clicked', track:'widgetclick', itemmaster:'apple_100252828-en_US-master', widget:'newArrivals', channel:'master', locale:'en_US' referer:'homepage' } # search { track:'search', query:'shiny apple', searchResults:'apple_111-en_US-master,apple_222-en_US-master,apple_333-en_US-master,apple_444-en_US-master,apple_555-en_US-master', channel:'master', locale:'en_US' } # livesearch { track:'livesearch', query:'fast apple', searchResults:'apple_111-en_US-master,apple_222-en_US-master,apple_333-en_US-master,apple_444-en_US-master,apple_555-en_US-master', channel:'master', locale:'en_US' } # widgetshow { track:'widgetshow', searchResults:'apple_111-en_US-master,apple_222-en_US-master,apple_333-en_US-master,apple_444-en_US-master,apple_555-en_US-master', widget:'productsByBrandName' channel:'master', locale:'en_US', referer:'homepage' } # view { when:'document', is:'scrolled', given:'10s delay', track:'view', itemmaster:'apple_100252828-en_US-master', brandCode:'blue', retailerCode:'TheRetailer', categoryCodes:'Technology,Technology_Travel', channel:'master', locale:'en_US' } Global default Values \u00b6 The ____td array can be used to maintain global default values for assets. This can be done with: ____td.push({asset: '<name>', value: '<value>'}); It will affect all following event chains - it won't affect already existing chains. Useful when using a userID as any event tracked after setting the default will contain this value. Resulting Request \u00b6 The tracker transforms each element in the tracking queue into a request. For example: ____tq.push({track: 'search', query: \"someQuery\", results : \"itemA,itemB,itemC,itemD\", channel: 'master', locale: 'en_US' }); is transformed into ___PROJECT_DOMAIN____/_?ucookie=bbccf8d2-c038-4864-85a7-0f084982d97a&usession=49c82dcd-612e-4d80-8225-66c4f9710ee2&action=search&q=someQuery&results=itemA,itemB,itemC,itemD&locale=en_US&channel=master where the usession and ucookie elements were automatically generated by the Searchperience JavaScript. Alternative use of the tracker \u00b6 If you are generating your own calls, please include the user cookie ucookie (which is provided by the tracker through the at the / endpoint ) and user session usession as there are required for a valid request. The following table offers a reference of the elements pushed by the tracking queue and the keys used in a tracking request. Check the Resulting Request part for an example. Element Key Always Required user session usession yes user cookie ucookie yes track action yes user uid no itemmaster imaster no item item no query q no searchResults results no brandCode brandCode no retailerCode retailerCode no categoryCodes categoryCodes no channel channel yes locale locale yes referer referer no raw raw no","title":"Javascript Tracking"},{"location":"integration/tracking/javascript-tracking/#event-configuration","text":"The event description is build with an JavaScript object and some base properties: Name Description Default Multivalues Required when HTML element or CSS selector for the element which should be observed for events. document \u2717 \u2717 is Event type(s) which will trigger the tracking. fire \u2713 \u2717 given Condition(s) which need to be meat before an event is tracked. Conditions can be used in a asynchronous way. - \u2713 \u2717 use Enables to \"collect\" assets which are passed as information to the tracking. - \u2713 \u2717 track Describes the \"action\" value which is actually tracked. - \u2717 \u2713 A full example using all of the options could look like this: ____tq.push({when: 'button.green', is: 'clicked', track: 'click', use: 'itemmaster apple_100252828-en_GB-master_foreignID', ... }); Notice In case there is a when in the event object, an event will be triggered only after the referenced element is manipulated as described in the is property.","title":"Event configuration"},{"location":"integration/tracking/javascript-tracking/#convenience-aliases","text":"Name Description Default Multivalues Required item Alias for use: \"item apple_123_variant\" - no no itemmaster Alias for use: \"itemmaster apple_123_main\" - no no user Alias for use: \"user 123-435-123\" - no no query Alias for use: \"query xxxx\" - no no searchResults Alias for use: \"searchResults 1234,3456,5678\" - - no widget Alias for use: \"widget brandsByIds\" - - no brandCode Alias for use: \"brandCode xxxx\" - no no retailerCode Alias for use: \"retailerCode xxxx\" - no no categoryCodes Alias for use: \"categoryCodes aaa,bbb,ccc\" - no no channel Alias for use: \"channel xxxx\" - no no locale Alias for use: \"locale xxxx\" - no no referer Alias for use: \"referrer xxxx\" - no no An example using an alias could look like this: ____tq.push({ track : 'search', searchResults : \"foreignId_12,foreignId_34,foreignId_78\", query : 'someUserQuery', locale : 'en_US', channel: 'master', referer : 'homepage'});","title":"Convenience aliases"},{"location":"integration/tracking/javascript-tracking/#event-types","text":"The options available for events depend on the setup of the specific event. The current options are described below. Variable Description blurred Is triggered when an element lost focus. clicked Is triggered when a click happens on an element. focussed Is triggered when an element gains focus. hovered over Is triggered when the cursor enters the elements bounding box. hovered out of Is triggered when the cursor leaves the elements bounding box. scrolled Is triggered when an element is scrolled. On \"normal\" pages all scroll events will originate from the \"document\" object. submitted Only relevant for <form> elements. changed Only relevant for <input> , <textarea> and <select> elements. loaded Alias for \"fire\" ready Alias for \"fire\" fire Just passes through the event processing and fires the tracking right away. The setting is used as default.","title":"Event types"},{"location":"integration/tracking/javascript-tracking/#condition-types","text":"The options available for conditions depend on the setup. The current options are described below. Condition Description XX times Makes sure that an event has been seen XX times before actually being tracked. Useful for scrolling and hovering related events. XXs delay Once triggered, it will delay the tracking for XX seconds. This can, e.g., be used to make sure that a user did not leave the page within a specific time frame. Useful when tracking view events.","title":"Condition types"},{"location":"integration/tracking/javascript-tracking/#asset-types","text":"The options available for any assets depend on the setup of the specific tracker. Asset Description user XXX Uses the XXX value as the unique user identifier. item XXX Uses the XXX value as the item identifier. This value should be used to differentiate between the variants of a product (marketplaceCode). itemmaster XXX Uses the XXX value as the identifier for the main product (foreign ID). query XXX Uses the XXX value as the query parameter. searchResults XXX,YYY,ZZZ Uses XXX,YYY,ZZZ as the identifiers of a collection of products. Use comma separated non-spaced values. widget XX Uses the XX value as the widget alias, this value should be included when tracking widgets interactions. brandCode XX Uses the XX value as the brandCode of the product, this value should be included when possible. retailerCode XX Uses the XX value as the retailerCode of the product, this value should be included when possible. categoryCodes XXX,YYY,ZZZ Uses the XXX,YYY,ZZZ values as categories codes of the product, this value should be included when possible. channel XX Uses the XX value as the current channel, this value should be included when possible (just one). locale XX Uses the XX value as the locale for the event. referer XX Uses the XX value as the referrer for the action being tracked. For example, homepage (no specific schema atm) As already stated in a previous section, it is possible to use assets directly as properties in an event object. { ... use: 'item apple_100252828_variant' ... } == { ... item: 'apple_100252828_variant' ... }","title":"Asset types"},{"location":"integration/tracking/javascript-tracking/#events","text":"Event Description Necessary elements Optional elements addToCart Tracks the placement of a product in the shopping cart from any location. itemmaster , item , channel , locale user , brandCode , retailerCode , categoryCodes checkout Tracks a purchase event. It should be triggered when a purchase is most certain. [1] user , itemmaster , item , channel , locale brandCode , retailerCode , categoryCodes click Indicates that a product received a click. Relevant only when displaying a product teaser. itemmaster , channel , locale , user , referer search Indicates a search event. query , searchResults , channel , locale user , referer view Should be used when a user spends a certain amount of seconds on the product detail page. itemmaster , channel , locale user , brandCode , retailerCode , categoryCodes [1] In order to differentiate the channel/category/brand information on every single product, please create a request for each product with the corresponding itemmaster and item values.","title":"Events"},{"location":"integration/tracking/javascript-tracking/#events-names-aliases","text":"Warning Any events with a invalid event name will return a BAD REQUEST error. Notice The event names that can be used for tracking can be found at http://sp-tracker.location.cloud/events . In order to differentiate between different interactions within the scope of the same event it is possible for the same event to have multiple aliases. For example: search : [ \"search\", \"livesearch\", \"mobilesearch\" ] This implies that one can use search , livesearch and mobilesearch track a search event. This helps us to get more specific metrics and improve our services.","title":"Events names &amp; aliases"},{"location":"integration/tracking/javascript-tracking/#examples","text":"# addToCart { when:'button.toBasket', is:'clicked', track:'addToCart', itemmaster:'apple_100252828-en_US-master', item:'apple_100252828_variant', brandCode:'blue', retailerCode:'TheRetailer', categoryCodes:'Technology,Technology.Travel', channel:'master', locale:'en_US' } # checkout { when:'pay.button', is:'clicked', track:'checkout', user:'some-id', itemmaster:'apple_100252828-en_US-master', item:'apple_100252828_variant', brandCode:'blue', retailerCode:'TheRetailer', categoryCodes:'Technology,Technology_Travel', channel:'master', locale:'en_US' } # click { when:'button.clicked', track:'click', itemmaster:'apple_100252828-en_US-master', channel:'master', locale:'en_US' } # widgetclick { when:'widget.clicked', track:'widgetclick', itemmaster:'apple_100252828-en_US-master', widget:'newArrivals', channel:'master', locale:'en_US' referer:'homepage' } # search { track:'search', query:'shiny apple', searchResults:'apple_111-en_US-master,apple_222-en_US-master,apple_333-en_US-master,apple_444-en_US-master,apple_555-en_US-master', channel:'master', locale:'en_US' } # livesearch { track:'livesearch', query:'fast apple', searchResults:'apple_111-en_US-master,apple_222-en_US-master,apple_333-en_US-master,apple_444-en_US-master,apple_555-en_US-master', channel:'master', locale:'en_US' } # widgetshow { track:'widgetshow', searchResults:'apple_111-en_US-master,apple_222-en_US-master,apple_333-en_US-master,apple_444-en_US-master,apple_555-en_US-master', widget:'productsByBrandName' channel:'master', locale:'en_US', referer:'homepage' } # view { when:'document', is:'scrolled', given:'10s delay', track:'view', itemmaster:'apple_100252828-en_US-master', brandCode:'blue', retailerCode:'TheRetailer', categoryCodes:'Technology,Technology_Travel', channel:'master', locale:'en_US' }","title":"Examples"},{"location":"integration/tracking/javascript-tracking/#global-default-values","text":"The ____td array can be used to maintain global default values for assets. This can be done with: ____td.push({asset: '<name>', value: '<value>'}); It will affect all following event chains - it won't affect already existing chains. Useful when using a userID as any event tracked after setting the default will contain this value.","title":"Global default Values"},{"location":"integration/tracking/javascript-tracking/#resulting-request","text":"The tracker transforms each element in the tracking queue into a request. For example: ____tq.push({track: 'search', query: \"someQuery\", results : \"itemA,itemB,itemC,itemD\", channel: 'master', locale: 'en_US' }); is transformed into ___PROJECT_DOMAIN____/_?ucookie=bbccf8d2-c038-4864-85a7-0f084982d97a&usession=49c82dcd-612e-4d80-8225-66c4f9710ee2&action=search&q=someQuery&results=itemA,itemB,itemC,itemD&locale=en_US&channel=master where the usession and ucookie elements were automatically generated by the Searchperience JavaScript.","title":"Resulting Request"},{"location":"integration/tracking/javascript-tracking/#alternative-use-of-the-tracker","text":"If you are generating your own calls, please include the user cookie ucookie (which is provided by the tracker through the at the / endpoint ) and user session usession as there are required for a valid request. The following table offers a reference of the elements pushed by the tracking queue and the keys used in a tracking request. Check the Resulting Request part for an example. Element Key Always Required user session usession yes user cookie ucookie yes track action yes user uid no itemmaster imaster no item item no query q no searchResults results no brandCode brandCode no retailerCode retailerCode no categoryCodes categoryCodes no channel channel yes locale locale yes referer referer no raw raw no","title":"Alternative use of the tracker"}]}