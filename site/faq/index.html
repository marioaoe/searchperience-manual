<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Searchperience Manual" name=description><meta content="Searchperience Team" name=author><link href=../assets/images/searchperience-logo-grey.png rel="shortcut icon"><meta content="mkdocs-1.1.2, mkdocs-material-6.1.7" name=generator><title>FAQ - Searchperience Documentation</title><link href=../assets/stylesheets/main.19753c6b.min.css rel=stylesheet><link href=../assets/stylesheets/palette.196e0c26.min.css rel=stylesheet><meta content=#ff6e42 name=theme-color><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback" rel=stylesheet><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link href=../assets/stylesheets/extras.css rel=stylesheet></head> <body data-md-color-accent=deep-orange data-md-color-primary=deep-orange data-md-color-scheme dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#faq> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header-nav md-grid"> <a aria-label="Searchperience Documentation" class="md-header-nav__button md-logo" href=.. title="Searchperience Documentation"> <img alt=logo src=../assets/images/searchperience-logo-white.png> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Searchperience Documentation </span> <span class="md-header-nav__topic md-ellipsis"> FAQ </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query data-md-state=active name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </label> <button aria-label=Clear class="md-search__icon md-icon" data-md-component=search-reset tabindex=-1 type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Searchperience Documentation" class="md-nav__button md-logo" href=.. title="Searchperience Documentation"> <img alt=logo src=../assets/images/searchperience-logo-white.png> </a> Searchperience Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=..> Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 id=nav-2 type=checkbox> <label class=md-nav__link for=nav-2> Cockpit Manual <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Cockpit Manual" class=md-nav data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Cockpit Manual </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cockpit/api/ class=md-nav__link> API </a> </li> <li class=md-nav__item> <a href=../cockpit/dashboard/ class=md-nav__link> Dashboard </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-3 id=nav-2-3 type=checkbox> <label class=md-nav__link for=nav-2-3> Indexing <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Indexing class=md-nav data-md-level=2> <label class=md-nav__title for=nav-2-3> <span class="md-nav__icon md-icon"></span> Indexing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cockpit/documents/ class=md-nav__link> All Documents </a> </li> <li class=md-nav__item> <a href=../cockpit/crawler/ class=md-nav__link> Crawler </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-4 id=nav-2-4 type=checkbox> <label class=md-nav__link for=nav-2-4> Marketing <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Marketing class=md-nav data-md-level=2> <label class=md-nav__title for=nav-2-4> <span class="md-nav__icon md-icon"></span> Marketing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cockpit/enrichments/ class=md-nav__link> Business Enrichments </a> </li> <li class=md-nav__item> <a href=../cockpit/promotions/ class=md-nav__link> Promotions </a> </li> <li class=md-nav__item> <a href=../cockpit/widgets/ class=md-nav__link> Widgets </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-5 id=nav-2-5 type=checkbox> <label class=md-nav__link for=nav-2-5> Search Intelligence <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Search Intelligence" class=md-nav data-md-level=2> <label class=md-nav__title for=nav-2-5> <span class="md-nav__icon md-icon"></span> Search Intelligence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cockpit/stopwords/ class=md-nav__link> Stopwords </a> </li> <li class=md-nav__item> <a href=../cockpit/synonyms/ class=md-nav__link> Synonyms </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-6 id=nav-2-6 type=checkbox> <label class=md-nav__link for=nav-2-6> Admin Tools <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Admin Tools" class=md-nav data-md-level=2> <label class=md-nav__title for=nav-2-6> <span class="md-nav__icon md-icon"></span> Admin Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cockpit/user-administration/ class=md-nav__link> User Administration </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 id=nav-3 type=checkbox> <label class=md-nav__link for=nav-3> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Concepts class=md-nav data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../concept/suggestions/ class=md-nav__link> Suggestions </a> </li> <li class=md-nav__item> <a href=../concept/document-relevance/ class=md-nav__link> Product Relevance </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> FAQ <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> FAQ </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#frontend> Frontend </a> <nav aria-label=Frontend class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-is-teaserdata-calculated> How is teaserData calculated? </a> <nav aria-label="How is teaserData calculated?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-does-teaserdata-select-variants> How does teaserData select variants? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-teaserprice-applied> How is the teaserPrice applied? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-teaseravailableprices-applied> How is the teaserAvailablePrices applied? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-teaserpriceisfromprice-applied> How is the teaserPriceIsFromPrice applied? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-finalprice-calculated> How is the finalPrice calculated? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-teaserdata-filled> How is teaserData filled? </a> <nav aria-label="How is teaserData filled?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#case-1-configurable-product-no-facet-selection> Case 1: Configurable Product - no facet selection </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#case-2-configurable-product-one-or-more-facets-have-been-selected> Case 2: Configurable Product - one or more facets have been selected </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#case-3-simple-product> Case 3: Simple Product </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#case-4-configurable-product-multiple-variants-have-the-same-cheapest-final-price> Case 4: Configurable Product - multiple variants have the same cheapest final Price </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#cockpit> Cockpit </a> <nav aria-label=Cockpit class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-can-i-hide-a-popular-search-term> How can I hide a popular search term? </a> <nav aria-label="How can I hide a popular search term?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#what-is-a-topkeyword> What is a TopKeyword? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-to-find-the-context-of-a-topkeyword> How to find the context of a TopKeyword? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#find-the-id-of-the-popular-search-item> Find the Id of the popular search item? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-to-hide-a-document-from-showing-in-the-search-results> How to hide a document from showing in the search results? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#indexer> Indexer </a> <nav aria-label=Indexer class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-is-sellingcountviewcount-included-in-a-product> How is sellingCount/viewCount included in a product? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-does-topseller-work> How does TopSeller work? </a> <nav aria-label="How does TopSeller work?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#logic-of-min-and-max-values-calculation> Logic of min and max values calculation </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../features/ class=md-nav__link> Features </a> </li> <li class=md-nav__item> <a href=../glossary/ class=md-nav__link> Glossary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7 id=nav-7 type=checkbox> <label class=md-nav__link for=nav-7> Integrations <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Integrations class=md-nav data-md-level=1> <label class=md-nav__title for=nav-7> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integration/flights/ class=md-nav__link> Flights </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-2 id=nav-7-2 type=checkbox> <label class=md-nav__link for=nav-7-2> Indexing <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Indexing class=md-nav data-md-level=2> <label class=md-nav__title for=nav-7-2> <span class="md-nav__icon md-icon"></span> Indexing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integration/indexing/sqs/ class=md-nav__link> SQS </a> </li> <li class=md-nav__item> <a href=../integration/indexing/crawling/ class=md-nav__link> Crawling </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-3 id=nav-7-3 type=checkbox> <label class=md-nav__link for=nav-7-3> Tracking <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Tracking class=md-nav data-md-level=2> <label class=md-nav__title for=nav-7-3> <span class="md-nav__icon md-icon"></span> Tracking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integration/tracking/google-tag-integration/ class=md-nav__link> Google Tag Integration </a> </li> <li class=md-nav__item> <a href=../integration/tracking/javascript-tracking/ class=md-nav__link> Javascript Tracking </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-4 id=nav-7-4 type=checkbox> <label class=md-nav__link for=nav-7-4> OM3 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=OM3 class=md-nav data-md-level=2> <label class=md-nav__title for=nav-7-4> <span class="md-nav__icon md-icon"></span> OM3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integration/om3/akeneo/ class=md-nav__link> Akeneo </a> </li> <li class=md-nav__item> <a href=../integration/om3/imageservice/ class=md-nav__link> Image Service </a> </li> <li class=md-nav__item> <a href=../integration/om3/masterdataportal/ class=md-nav__link> Master Data Portal </a> </li> <li class=md-nav__item> <a href=../integration/om3/marketplace-frontend/ class=md-nav__link> Marketplace Frontend </a> </li> <li class=md-nav__item> <a href=../integration/om3/ecommerce-api/ class=md-nav__link> Ecommerce API </a> </li> <li class=md-nav__item> <a href=../integration/om3/priceengine/ class=md-nav__link> Price Engine </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#frontend> Frontend </a> <nav aria-label=Frontend class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-is-teaserdata-calculated> How is teaserData calculated? </a> <nav aria-label="How is teaserData calculated?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-does-teaserdata-select-variants> How does teaserData select variants? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-teaserprice-applied> How is the teaserPrice applied? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-teaseravailableprices-applied> How is the teaserAvailablePrices applied? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-teaserpriceisfromprice-applied> How is the teaserPriceIsFromPrice applied? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-the-finalprice-calculated> How is the finalPrice calculated? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-is-teaserdata-filled> How is teaserData filled? </a> <nav aria-label="How is teaserData filled?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#case-1-configurable-product-no-facet-selection> Case 1: Configurable Product - no facet selection </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#case-2-configurable-product-one-or-more-facets-have-been-selected> Case 2: Configurable Product - one or more facets have been selected </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#case-3-simple-product> Case 3: Simple Product </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#case-4-configurable-product-multiple-variants-have-the-same-cheapest-final-price> Case 4: Configurable Product - multiple variants have the same cheapest final Price </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#cockpit> Cockpit </a> <nav aria-label=Cockpit class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-can-i-hide-a-popular-search-term> How can I hide a popular search term? </a> <nav aria-label="How can I hide a popular search term?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#what-is-a-topkeyword> What is a TopKeyword? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-to-find-the-context-of-a-topkeyword> How to find the context of a TopKeyword? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#find-the-id-of-the-popular-search-item> Find the Id of the popular search item? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-to-hide-a-document-from-showing-in-the-search-results> How to hide a document from showing in the search results? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#indexer> Indexer </a> <nav aria-label=Indexer class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#how-is-sellingcountviewcount-included-in-a-product> How is sellingCount/viewCount included in a product? </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#how-does-topseller-work> How does TopSeller work? </a> <nav aria-label="How does TopSeller work?" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#logic-of-min-and-max-values-calculation> Logic of min and max values calculation </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=faq>FAQ<a class=headerlink href=#faq title="Permanent link">¶</a></h1> <h2 id=frontend>Frontend<a class=headerlink href=#frontend title="Permanent link">¶</a></h2> <h3 id=how-is-teaserdata-calculated>How is teaserData calculated?<a class=headerlink href=#how-is-teaserdata-calculated title="Permanent link">¶</a></h3> <p><code>teaserData</code> is a calculated object attached to every product. It is built in the Searchperience Frontend using values available in the product fields.</p> <p>In general:</p> <ul> <li>If we have the sorting set by selling count, then we fill teaserData with the values from the cheapest variant from the most sold variants. Moreover, if we have selected some facets at the same time, then we take into account only the variants which match all the selected facets.</li> <li>If we have some active facet selections, then we fill teaserData with the values from the variant with the cheapest <code>finalPrice</code> matching all of the provided filters/facets. Moreover, if multiple variants have the same cheapest <code>finalPrice</code>, then the smallest variant will be selected based on the fields <code>variant.attributes.clothingSize</code> or <code>variant.attributes.shoeSize</code>.</li> <li>If we do not have any facet selected, then we fill teaserData with values from configurableProduct. If any of the fields are missing from the variant, then we fill those fields with values from configurableProduct.</li> <li>If we have 'availablePrices' data available, then we take into account the price from that section to find the lowest price.</li> </ul> <h4 id=how-does-teaserdata-select-variants>How does teaserData select variants?<a class=headerlink href=#how-does-teaserdata-select-variants title="Permanent link">¶</a></h4> <p>Incoming document</p> <pre><code class=language-json>{
    "foreignId": "Z-en_GB-master",
    "marketplaceCode": "Z",
    "sellingCount": 49,
    "teaserData": "",
    "variants": [{
        "marketplaceCode": "A",
        "sellingCount": 0,
        "color": "red",
        "clothingSize": "s",
        "price": 10.99
    },{
        "marketplaceCode": "B",
        "sellingCount": 0,
        "color": "red",
        "clothingSize": "s",
        "price": 3.99
    },{
        "marketplaceCode": "C",
        "sellingCount": 0,
        "color": "red",
        "clothingSize": "l",
        "price": 3.99
    },{
        "marketplaceCode": "D",
        "sellingCount": 32,
        "color": "blue",
        "clothingSize": "xl",
        "price": 22.00
    },{
        "marketplaceCode": "E",
        "sellingCount": 32,
        "color": "blue",
        "clothingSize": "m",
        "price": 21.00
    },{
        "marketplaceCode": "F",
        "sellingCount": 33,
        "color": "yellow",
        "clothingSize": "s",
        "price": 3.99
    }]
}
</code></pre> <table> <thead> <tr> <th align=left>Criteria</th> <th align=left>logic to choose</th> <th align=left>teaserPrice</th> <th align=left>teaserPriceFromPrice</th> <th align=left>selectedVariant</th> <th align=left>text/image</th> </tr> </thead> <tbody> <tr> <td align=left>nothing selected</td> <td align=left>cheapest variant</td> <td align=left>3,99</td> <td align=left>true (all)</td> <td align=left>none</td> <td align=left>configurableProduct, variants</td> </tr> <tr> <td align=left>color=red</td> <td align=left>cheapest and smallest variant with color=red</td> <td align=left>3,99</td> <td align=left>true (all)</td> <td align=left>B</td> <td align=left>cheapest smallest variant with color=red</td> </tr> <tr> <td align=left>nothing selected, sort by selling count</td> <td align=left>cheapest variant with highest selling count</td> <td align=left>3,99</td> <td align=left>true (all)</td> <td align=left>F</td> <td align=left>cheapest variant with color=red</td> </tr> <tr> <td align=left>color=blue, sort by selling count</td> <td align=left>color=blue, cheapest with highest selling count</td> <td align=left>21,00</td> <td align=left>true (all)</td> <td align=left>E</td> <td align=left>cheapest variant with color=blue, selling count</td> </tr> <tr> <td align=left>color=red, sort by selling count</td> <td align=left>color=red (no selling count available for color=red), cheapest smallest variant</td> <td align=left>3,99</td> <td align=left>true (all)</td> <td align=left>B</td> <td align=left>cheapest smallest variant with color=red</td> </tr> </tbody> </table> <h4 id=how-is-the-teaserprice-applied>How is the teaserPrice applied?<a class=headerlink href=#how-is-the-teaserprice-applied title="Permanent link">¶</a></h4> <p>Filled with the <code>activePrice</code> object taken from the variant with the cheapest <code>finalPrice</code> of all (no facet selection) or matching variants (facet selection).</p> <h4 id=how-is-the-teaseravailableprices-applied>How is the teaserAvailablePrices applied?<a class=headerlink href=#how-is-the-teaseravailableprices-applied title="Permanent link">¶</a></h4> <p>Filled with the <code>availablePrices</code> object taken from the variant with the cheapest <code>finalPrice</code> of all (no facet selection) or matching variants (facet selection).</p> <h4 id=how-is-the-teaserpriceisfromprice-applied>How is the teaserPriceIsFromPrice applied?<a class=headerlink href=#how-is-the-teaserpriceisfromprice-applied title="Permanent link">¶</a></h4> <p>If the <code>finalPrice</code> of some variant's <code>activePrice</code> differs, this value is <code>true</code> indicating the teaserPrice is the "from price" (lowest value) from a range of <code>finalPrice</code> values of either all variants (no facet selections) or the matching variants (facet selection). If the <code>finalPrice</code> of all variants is the same this value is false.</p> <h4 id=how-is-the-finalprice-calculated>How is the finalPrice calculated?<a class=headerlink href=#how-is-the-finalprice-calculated title="Permanent link">¶</a></h4> <p>The <code>finalPrice</code> is a calculated price built using these rules:</p> <ul> <li>If <code>activePrice.isDiscounted</code> is set to true, the finalPrice is the value from the field <code>activePrice.discounted</code>.</li> <li>If <code>activePrice.isDiscounted</code> is set to false or completely missing, the finalPrice is the value from the field <code>activePrice.default</code>.</li> </ul> <h4 id=how-is-teaserdata-filled>How is teaserData filled?<a class=headerlink href=#how-is-teaserdata-filled title="Permanent link">¶</a></h4> <h5 id=case-1-configurable-product-no-facet-selection>Case 1: Configurable Product - no facet selection<a class=headerlink href=#case-1-configurable-product-no-facet-selection title="Permanent link">¶</a></h5> <ul> <li>shortTitle<ul> <li>taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct.</li> </ul> </li> <li>shortDescription<ul> <li>taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct.</li> </ul> </li> <li>teaserPrice<ul> <li>the <code>activePrice</code> object taken from the cheapest-smallest-size variant.</li> </ul> </li> <li>teaserPriceIsFromPrice<ul> <li>if the <code>finalPrice</code> of every variants <code>activePrice</code> differs, this value is <code>true</code> indicating the teaserPrice is the cheapest of all variant's prices.</li> </ul> </li> <li>selectedVariant<ul> <li>not existing in that case</li> </ul> </li> </ul> <h5 id=case-2-configurable-product-one-or-more-facets-have-been-selected>Case 2: Configurable Product - one or more facets have been selected<a class=headerlink href=#case-2-configurable-product-one-or-more-facets-have-been-selected title="Permanent link">¶</a></h5> <ul> <li>shortTitle<ul> <li>taken from the cheapest-smallest-size variant matched by facets/filters, if field not set, taken from configurableProduct.</li> </ul> </li> <li>shortDescription<ul> <li>taken from the cheapest-smallest-size variant matched by facets/filters, if field not set, taken from configurableProduct.</li> </ul> </li> <li>teaserPrice<ul> <li>the <code>activePrice</code> from the cheapest-smallest-size variant matched by facets/filters.</li> </ul> </li> <li>teaserPriceIsFromPrice<ul> <li>if the <code>finalPrice</code> of the matching variants <code>activePrice</code> differs, this value is <code>true</code> indicating the teaserPrice is the cheapest of all matching variant's prices.</li> </ul> </li> <li>selectedVariant<ul> <li>contains the <code>marketplaceCode</code> of the cheapest-smallest-size variant matched by facets/filters.</li> </ul> </li> </ul> <h5 id=case-3-simple-product>Case 3: Simple Product<a class=headerlink href=#case-3-simple-product title="Permanent link">¶</a></h5> <ul> <li>shortTitle<ul> <li>taken from the only variant, if field not set, taken from configurableProduct.</li> </ul> </li> <li>shortDescription<ul> <li>taken from the only variant, if field not set, taken from configurableProduct.</li> </ul> </li> <li>teaserPrice<ul> <li>the <code>activePrice</code> object taken from the first and only variant</li> </ul> </li> <li>teaserPriceIsFromPrice<ul> <li>Always false since we only have one variant and therefore only one activePrice</li> </ul> </li> <li>selectedVariant<ul> <li>not existing in that case</li> </ul> </li> </ul> <h5 id=case-4-configurable-product-multiple-variants-have-the-same-cheapest-final-price>Case 4: Configurable Product - multiple variants have the same cheapest <code>final Price</code><a class=headerlink href=#case-4-configurable-product-multiple-variants-have-the-same-cheapest-final-price title="Permanent link">¶</a></h5> <ul> <li>shortTitle<ul> <li>taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct.</li> </ul> </li> <li>shortDescription<ul> <li>taken from the cheapest-smallest-size variant, if field not set, taken from configurableProduct.</li> </ul> </li> <li>teaserPrice<ul> <li>the <code>activePrice</code> from the cheapest-smallest-size variant.</li> </ul> </li> <li>teaserPriceIsFromPrice<ul> <li>if other variants have a different <code>finalPrice</code>, this value is <code>true</code></li> </ul> </li> <li>selectedVariant<ul> <li>contains the <code>marketplaceCode</code> of the smallest-size variant.</li> </ul> </li> </ul> <h2 id=cockpit>Cockpit<a class=headerlink href=#cockpit title="Permanent link">¶</a></h2> <h3 id=how-can-i-hide-a-popular-search-term>How can I hide a popular search term?<a class=headerlink href=#how-can-i-hide-a-popular-search-term title="Permanent link">¶</a></h3> <p>To hide a popular search one needs to:</p> <ul> <li>Find the context in which the popular search term appears on</li> <li>Find the <code>foreignId</code> of the specific popular search item (also called topkeyword)</li> <li>Find the object in Searchperience's Cockpit and hide it.</li> </ul> <h4 id=what-is-a-topkeyword>What is a TopKeyword?<a class=headerlink href=#what-is-a-topkeyword title="Permanent link">¶</a></h4> <p>The <code>/popularSearches</code> Frontend endpoint returns a collection of TopKeywords objects. Each Topkeyword consists of various elements as can be seen in the next code snippet.</p> <pre><code class=language-json>{
    "foreignId": "a114e69a5746e2cfa326f7c8df21ec1a",    // hash of the fields' contents except occurrences 
    "searchQuery": "henne",                             // user input in search field
    "brandCode": "hennessy",
    "retailerCode": "world-duty-free",
    "categoryCodes": [
        "food_drink",
        "food_drink_wine_spirits",
        "food_drink_wine_spirits_cognac"
    ],
    "channel": "master",
    "locale": "en_GB",
    "referer": "-",
    "occurrences": 1
}
</code></pre> <p>A topkeyword contains a <code>searchQuery</code> and information about the context in which the query lead to a purchase. This is the reason why information as <code>brandCode</code> or <code>retailerCode</code> are also present.</p> <h3 id=how-to-find-the-context-of-a-topkeyword>How to find the context of a TopKeyword?<a class=headerlink href=#how-to-find-the-context-of-a-topkeyword title="Permanent link">¶</a></h3> <p>When sending a request to &lt;<strong><em>PROJECT_DOMAIN_FRONTEND</em></strong>/popularSearches&gt;, it is possible to filter by a series of parameters such as <code>brandCode</code> or <code>categoryCode</code>. Possible filters are documented in the Searchperience API documentation. </p> <p>The context in which a popular search appears depend on the current location of the user in the web store. Depending on the category a user find himself in, the web store will request popular searches with the same category as the one the user is in. </p> <h3 id=find-the-id-of-the-popular-search-item>Find the Id of the popular search item?<a class=headerlink href=#find-the-id-of-the-popular-search-item title="Permanent link">¶</a></h3> <p>With the right context one can reproduce the web stores request to &lt;<strong><em>PROJECT_DOMAIN_FRONTEND</em></strong>/popularSearches&gt; by filtering the request. The resulting JSON contains a set of TopKeywords with the format already described <a href=#How-to-find-the-context-of-a-TopKeyword?>above</a>. Finally, one can obtain the <code>foreignId</code> by matching the <code>searchQuery</code> to the popular search item one is looking for.</p> <h3 id=how-to-hide-a-document-from-showing-in-the-search-results>How to hide a document from showing in the search results?<a class=headerlink href=#how-to-hide-a-document-from-showing-in-the-search-results title="Permanent link">¶</a></h3> <ol> <li>Open Cockpit</li> <li>Go to <code>Indexing &gt; All documents</code> (left navigation panel)</li> <li>Search for the <code>foreignId</code> you obtained by sending a filtered request to the Frontend.</li> <li>Prevent the item from appearing in search results by clicking on the <code>Hidden</code> toggle.</li> </ol> <h2 id=indexer>Indexer<a class=headerlink href=#indexer title="Permanent link">¶</a></h2> <h3 id=how-is-sellingcountviewcount-included-in-a-product>How is sellingCount/viewCount included in a product?<a class=headerlink href=#how-is-sellingcountviewcount-included-in-a-product title="Permanent link">¶</a></h3> <p>Values are enriched in the Indexer pipe step by matching data from data processing file.</p> <p>Data contain information about selling/view count per week, month and year.</p> <pre><code class=language-json>"sorting":
{
  "price": 14.5,
  "sellingCount": {
    "week": 12,
    "month": 12,
    "year": 12
  },
  "viewCount": {
    "week": 14,
    "month": 14,
    "year": 14
  }
}
</code></pre> <h3 id=how-does-topseller-work>How does TopSeller work?<a class=headerlink href=#how-does-topseller-work title="Permanent link">¶</a></h3> <p>Calculation done in the Indexer pipe step by evaluating data from dataprocessing 'topseller' statistic. Depending on settings, top seller flag is set and boosting applied to the document. Setting example from Indexer pipe step configuration:</p> <pre><code class=language-json>'topSeller' =&gt; [
  // values to get top sellers and enrich product
  'count' =&gt; 100,
  'period' =&gt; 'week',
  'boost' =&gt; 100
]
</code></pre> <h4 id=logic-of-min-and-max-values-calculation>Logic of min and max values calculation<a class=headerlink href=#logic-of-min-and-max-values-calculation title="Permanent link">¶</a></h4> <p>You may be wondering how we choose min/max values.</p> <p>When a user provides min and max values for the range facet (e.g. using a slider) we build an Elasticsearch aggregation and an Elasticsearch query filter for it. When the aggregation is returned from the Elasticsearch we use it to build the facet using the new value. For min possible values we take lowest from aggregation or user input, and for the max possible value we take the highest from aggregation or user input. If you look at the table below it may be a bit clearer:</p> <table> <thead> <tr> <th align=left></th> <th align=left>available min from</th> <th align=left>available max from</th> <th align=left>selected min from</th> <th align=left>selected max from</th> </tr> </thead> <tbody> <tr> <td align=left>user did not select anything</td> <td align=left>result</td> <td align=left>result</td> <td align=left>result</td> <td align=left>result</td> </tr> <tr> <td align=left>user selected min &lt; available min [^rangeMinMax]</td> <td align=left>selected value</td> <td align=left>result</td> <td align=left>selected value</td> <td align=left>selected value</td> </tr> <tr> <td align=left>user selected max &gt; available max [^rangeMinMax]</td> <td align=left>result</td> <td align=left>selected value</td> <td align=left>selected value</td> <td align=left>selected value</td> </tr> <tr> <td align=left>user selected min/max available min/max [^rangeMinMax]</td> <td align=left>selected value</td> <td align=left>selected value</td> <td align=left>selected value</td> <td align=left>selected value</td> </tr> </tbody> </table> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav aria-label=Footer class="md-footer-nav__inner md-grid"> <a class="md-footer-nav__link md-footer-nav__link--prev" href=../concept/document-relevance/ rel=prev> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Product Relevance </div> </div> </a> <a class="md-footer-nav__link md-footer-nav__link--next" href=../features/ rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Features </div> </div> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright © Searchperience - AOE GmbH </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.0ac82a11.min.js></script> <script src=../assets/javascripts/bundle.f81dfb4d.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "..",
          features: ['tabs', 'instant'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script> </body> </html>